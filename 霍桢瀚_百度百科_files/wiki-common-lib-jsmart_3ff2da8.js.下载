;/*!wiki-common:widget/lib/jsmart/PHPJS.js*/
define("wiki-common:widget/lib/jsmart/PHPJS",function(e,t,n){function r(e,t){var n={XMLHttpRequest:{},window:{window:{},document:{lastModified:1388954399,getElementsByTagName:function(){return[]}},location:{href:""}}};return n.window.window=n.window,n.strtotime=function(e,t){var n,r,a,s,o,l,i,c,u,g,p=!1;if(!e)return p;if((r=(e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase()).match(/^(\d{1,4})([\-\.\/\:])(\d{1,2})([\-\.\/\:])(\d{1,4})(?:\s(\d{1,2}):(\d{2})?:?(\d{2})?)?(?:\s([A-Z]+)?)?$/))&&r[2]===r[4])if(1901<r[1])switch(r[2]){case"-":return 12<r[3]||31<r[5]?p:new Date(r[1],parseInt(r[3],10)-1,r[5],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3;case".":return p;case"/":return 12<r[3]||31<r[5]?p:new Date(r[1],parseInt(r[3],10)-1,r[5],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3}else if(1901<r[5])switch(r[2]){case"-":case".":return 12<r[3]||31<r[1]?p:new Date(r[5],parseInt(r[3],10)-1,r[1],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3;case"/":return 12<r[1]||31<r[3]?p:new Date(r[5],parseInt(r[1],10)-1,r[3],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3}else switch(r[2]){case"-":return 12<r[3]||31<r[5]||r[1]<70&&38<r[1]?p:(s=0<=r[1]&&r[1]<=38?+r[1]+2e3:r[1],new Date(s,parseInt(r[3],10)-1,r[5],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3);case".":return 70<=r[5]?12<r[3]||31<r[1]?p:new Date(r[5],parseInt(r[3],10)-1,r[1],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3:!(r[5]<60)||r[6]||23<r[1]||59<r[3]?p:(a=new Date,new Date(a.getFullYear(),a.getMonth(),a.getDate(),r[1]||0,r[3]||0,r[5]||0,r[9]||0)/1e3);case"/":return 12<r[1]||31<r[3]||r[5]<70&&38<r[5]?p:(s=0<=r[5]&&r[5]<=38?+r[5]+2e3:r[5],new Date(s,parseInt(r[1],10)-1,r[3],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3);case":":return 23<r[1]||59<r[3]||59<r[5]?p:(a=new Date,new Date(a.getFullYear(),a.getMonth(),a.getDate(),r[1]||0,r[3]||0,r[5]||0)/1e3)}if("now"===e)return null===t||isNaN(t)?(new Date).getTime()/1e3|0:0|t;if(!isNaN(n=Date.parse(e)))return n/1e3|0;function _(e){var e=e.split(" "),t=e[0],n=e[1].substring(0,3),r=/\d+/.test(t),a=("last"===t?-1:1)*("ago"===e[2]?-1:1);if(r&&(a*=parseInt(t,10)),i.hasOwnProperty(n)&&!e[1].match(/^mon(day|\.)?$/i))return o["set"+i[n]](o["get"+i[n]]()+a);if("wee"===n)return o.setDate(o.getDate()+7*a);if("next"===t||"last"===t)e=t,t=a,void 0!==(a=l[a=n])&&(0===(a=a-o.getDay())?a=7*t:0<a&&"last"===e?a-=7:a<0&&"next"===e&&(a+=7),o.setDate(o.getDate()+a));else if(!r)return;return 1}if(o=t?new Date(1e3*t):new Date,l={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},i={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},u="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)",!(r=e.match(new RegExp("([+-]?\\d+\\s(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)|(last|next)\\s(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?))(\\sago)?","gi"))))return p;for(g=0,c=r.length;g<c;g++)if(!_(r[g]))return p;return o.getTime()/1e3},n.strftime=function(e,t){this.php_js=this.php_js||{},this.setlocale("LC_ALL",0);function r(e,t,n){for(void 0===n&&(n=10);parseInt(e,10)<n&&1<n;n/=10)e=t.toString()+e;return e.toString()}for(var n=this.php_js,a=n.localeCategories.LC_TIME,s=n.locales[a].LC_TIME,o={a:function(e){return s.a[e.getDay()]},A:function(e){return s.A[e.getDay()]},b:function(e){return s.b[e.getMonth()]},B:function(e){return s.B[e.getMonth()]},C:function(e){return r(parseInt(e.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(e){return r(parseInt(this.G(e)/100,10),0)},G:function(e){var t=e.getFullYear(),n=parseInt(o.V(e),10),e=parseInt(o.W(e),10);return n<e?t++:0===e&&52<=n&&t--,t},H:["getHours","0"],I:function(e){e=e.getHours()%12;return r(0==e?12:e,0)},j:function(e){var t=e-new Date(e.getFullYear()+"/1/1 GMT"),e=(t+=6e4*e.getTimezoneOffset(),parseInt(t/6e4/60/24,10)+1);return r(e,0,100)},k:["getHours","0"],l:function(e){e=e.getHours()%12;return r(0==e?12:e," ")},m:function(e){return r(e.getMonth()+1,0)},M:["getMinutes","0"],p:function(e){return s.p[12<=e.getHours()?1:0]},P:function(e){return s.P[12<=e.getHours()?1:0]},s:function(e){return Date.parse(e)/1e3},S:["getSeconds","0"],u:function(e){e=e.getDay();return 0===e?7:e},U:function(e){var t=parseInt(o.j(e),10),e=6-e.getDay(),t=parseInt((t+e)/7,10);return r(t,0)},V:function(e){var t=parseInt(o.W(e),10),n=new Date(e.getFullYear()+"/1/1").getDay(),t=t+(4<n||n<=1?0:1);return 53===t&&new Date(e.getFullYear()+"/12/31").getDay()<4?t=1:0===t&&(t=o.V(new Date(e.getFullYear()-1+"/12/31"))),r(t,0)},w:"getDay",W:function(e){var t=parseInt(o.j(e),10),e=7-o.u(e),t=parseInt((t+e)/7,10);return r(t,0,10)},y:function(e){return r(e.getFullYear()%100,0)},Y:"getFullYear",z:function(e){e=e.getTimezoneOffset();return(0<e?"-":"+")+r(parseInt(Math.abs(e/60),10),0)+r(e%60,0)},Z:function(e){return e.toString().replace(/^.*\(([^)]+)\)$/,"$1")},"%":function(e){return"%"}},l=void 0===t?new Date:"object"==typeof t?new Date(t):new Date(1e3*t),i={c:"locale",D:"%m/%d/%y",F:"%y-%m-%d",h:"%b",n:"\n",r:"locale",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"};e.match(/%[cDFhnrRtTxX]/);)e=e.replace(/%([cDFhnrRtTxX])/g,function(e,t){var n=i[t];return"locale"===n?s[t]:n});return e.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,function(e,t){var n=o[t];return"string"==typeof n?l[n]():"function"==typeof n?n(l):"object"==typeof n&&"string"==typeof n[0]?r(l[n[0]](),n[1]):t})},n.setlocale=function(e,t){function r(e){if(e instanceof RegExp)return new RegExp(e);if(e instanceof Date)return new Date(e);var t,n={};for(t in e)"object"==typeof e[t]?n[t]=r(e[t]):n[t]=e[t];return n}var n="",a=[],s=0,o=this.window.document;try{this.php_js=this.php_js||{}}catch(e){this.php_js={}}var l,i,c=this.php_js;if(c.locales||(c.locales={},c.locales.en={LC_COLLATE:function(e,t){return e==t?0:t<e?1:-1},LC_CTYPE:{an:/^[A-Za-z\d]+$/g,al:/^[A-Za-z]+$/g,ct:/^[\u0000-\u001F\u007F]+$/g,dg:/^[\d]+$/g,gr:/^[\u0021-\u007E]+$/g,lw:/^[a-z]+$/g,pr:/^[\u0020-\u007E]+$/g,pu:/^[\u0021-\u002F\u003A-\u0040\u005B-\u0060\u007B-\u007E]+$/g,sp:/^[\f\n\r\t\v ]+$/g,up:/^[A-Z]+$/g,xd:/^[A-Fa-f\d]+$/g,CODESET:"UTF-8",lower:"abcdefghijklmnopqrstuvwxyz",upper:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"},LC_TIME:{a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %r %Z",p:["AM","PM"],P:["am","pm"],r:"%I:%M:%S %p",x:"%m/%d/%Y",X:"%r",alt_digits:"",ERA:"",ERA_YEAR:"",ERA_D_T_FMT:"",ERA_D_FMT:"",ERA_T_FMT:""},LC_MONETARY:{int_curr_symbol:"USD",currency_symbol:"$",mon_decimal_point:".",mon_thousands_sep:",",mon_grouping:[3],positive_sign:"",negative_sign:"-",int_frac_digits:2,frac_digits:2,p_cs_precedes:1,p_sep_by_space:0,n_cs_precedes:1,n_sep_by_space:0,p_sign_posn:3,n_sign_posn:0},LC_NUMERIC:{decimal_point:".",thousands_sep:",",grouping:[3]},LC_MESSAGES:{YESEXPR:"^[yY].*",NOEXPR:"^[nN].*",YESSTR:"",NOSTR:""},nplurals:function(e){return 1!==e?1:0}},c.locales.en_US=r(c.locales.en),c.locales.en_US.LC_TIME.c="%a %d %b %Y %r %Z",c.locales.en_US.LC_TIME.x="%D",c.locales.en_US.LC_TIME.X="%r",c.locales.en_US.LC_MONETARY.int_curr_symbol="USD ",c.locales.en_US.LC_MONETARY.p_sign_posn=1,c.locales.en_US.LC_MONETARY.n_sign_posn=1,c.locales.en_US.LC_MONETARY.mon_grouping=[3,3],c.locales.en_US.LC_NUMERIC.thousands_sep="",c.locales.en_US.LC_NUMERIC.grouping=[],c.locales.en_GB=r(c.locales.en),c.locales.en_GB.LC_TIME.r="%l:%M:%S %P %Z",c.locales.en_AU=r(c.locales.en_GB),c.locales.C=r(c.locales.en),c.locales.C.LC_CTYPE.CODESET="ANSI_X3.4-1968",c.locales.C.LC_MONETARY={int_curr_symbol:"",currency_symbol:"",mon_decimal_point:"",mon_thousands_sep:"",mon_grouping:[],p_cs_precedes:127,p_sep_by_space:127,n_cs_precedes:127,n_sep_by_space:127,p_sign_posn:127,n_sign_posn:127,positive_sign:"",negative_sign:"",int_frac_digits:127,frac_digits:127},c.locales.C.LC_NUMERIC={decimal_point:".",thousands_sep:"",grouping:[]},c.locales.C.LC_TIME.c="%a %b %e %H:%M:%S %Y",c.locales.C.LC_TIME.x="%m/%d/%y",c.locales.C.LC_TIME.X="%H:%M:%S",c.locales.C.LC_MESSAGES.YESEXPR="^[yY]",c.locales.C.LC_MESSAGES.NOEXPR="^[nN]",c.locales.fr=r(c.locales.en),c.locales.fr.nplurals=function(e){return 1<e?1:0},c.locales.fr.LC_TIME.a=["dim","lun","mar","mer","jeu","ven","sam"],c.locales.fr.LC_TIME.A=["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],c.locales.fr.LC_TIME.b=["jan","fév","mar","avr","mai","jun","jui","aoû","sep","oct","nov","déc"],c.locales.fr.LC_TIME.B=["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],c.locales.fr.LC_TIME.c="%a %d %b %Y %T %Z",c.locales.fr.LC_TIME.p=["",""],c.locales.fr.LC_TIME.P=["",""],c.locales.fr.LC_TIME.x="%d.%m.%Y",c.locales.fr.LC_TIME.X="%T",c.locales.fr_CA=r(c.locales.fr),c.locales.fr_CA.LC_TIME.x="%Y-%m-%d"),c.locale||(c.locale="en_US",l="http://www.w3.org/1999/xhtml",i="http://www.w3.org/XML/1998/namespace",o.getElementsByTagNameNS&&o.getElementsByTagNameNS(l,"html")[0]?o.getElementsByTagNameNS(l,"html")[0].getAttributeNS&&o.getElementsByTagNameNS(l,"html")[0].getAttributeNS(i,"lang")?c.locale=o.getElementsByTagName(l,"html")[0].getAttributeNS(i,"lang"):o.getElementsByTagNameNS(l,"html")[0].lang&&(c.locale=o.getElementsByTagNameNS(l,"html")[0].lang):o.getElementsByTagName("html")[0]&&o.getElementsByTagName("html")[0].lang&&(c.locale=o.getElementsByTagName("html")[0].lang)),c.locale=c.locale.replace("-","_"),c.locale in c.locales||c.locale.replace(/_[a-zA-Z]+$/,"")in c.locales&&(c.locale=c.locale.replace(/_[a-zA-Z]+$/,"")),c.localeCategories||(c.localeCategories={LC_COLLATE:c.locale,LC_CTYPE:c.locale,LC_MONETARY:c.locale,LC_NUMERIC:c.locale,LC_TIME:c.locale,LC_MESSAGES:c.locale}),null===t||""===t)t=this.getenv(e)||this.getenv("LANG");else if("[object Array]"===Object.prototype.toString.call(t))for(s=0;s<t.length;s++){if(t[s]in this.php_js.locales){t=t[s];break}if(s===t.length-1)return!1}if("0"===t||0===t){if("LC_ALL"!==e)return this.php_js.localeCategories[e];for(n in this.php_js.localeCategories)a.push(n+"="+this.php_js.localeCategories[n]);return a.join(";")}if(!(t in this.php_js.locales))return!1;if("LC_ALL"===e)for(n in this.php_js.localeCategories)this.php_js.localeCategories[n]=t;else this.php_js.localeCategories[e]=t;return t},n.getenv=function(e){return!!(this.php_js&&this.php_js.ENV&&this.php_js.ENV[e])&&this.php_js.ENV[e]},n.rawurlencode=function(e){return e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},n.rawurldecode=function(e){return decodeURIComponent((e+"").replace(/%(?![\da-f]{2})/gi,function(){return"%25"}))},n.bin2hex=function(e){for(var t,n="",r=0,a=(e+="").length;r<a;r++)n+=(t=e.charCodeAt(r).toString(16)).length<2?"0"+t:t;return n},n.ord=function(e){var e=e+"",t=e.charCodeAt(0);return!(55296<=t&&t<=56319)||1===e.length?t:1024*(t-55296)+(e.charCodeAt(1)-56320)+65536},n.sprintf=function(){var C=arguments,T=0,e=C[T++],y=function(e,t,n,r){n=n||" ";t=e.length>=t?"":new Array(1+t-e.length>>>0).join(n);return r?e+t:t+e},S=function(e,t,n,r,a,s){var o=r-e.length;return e=0<o?n||!a?y(e,r,s,n):e.slice(0,t.length)+y("",o,"0",!0)+e.slice(t.length):e},w=function(e,t,n,r,a,s,o){var l=e>>>0;return e=(n=n&&l&&{2:"0b",8:"0",16:"0x"}[t]||"")+y(l.toString(t),s||0,"0",!1),S(e,n,r,a,o)},M=function(e,t,n,r,a,s){return null!=r&&(e=e.slice(0,r)),S(e,"",t,n,a,s)};return e.replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,function(e,t,n,r,a,s,o){var l,i,c,u,g;if("%%"===e)return"%";for(var p=!1,_="",d=!1,f=!1,h=" ",m=n.length,E=0;n&&E<m;E++)switch(n.charAt(E)){case" ":_=" ";break;case"+":_="+";break;case"-":p=!0;break;case"'":h=n.charAt(E+1);break;case"0":d=!0,h="0";break;case"#":f=!0}if((r=r?"*"===r?+C[T++]:"*"==r.charAt(0)?+C[r.slice(1,-1)]:+r:0)<0&&(r=-r,p=!0),!isFinite(r))throw new Error("sprintf: (minimum-)width must be finite");switch(s=s?"*"===s?+C[T++]:"*"==s.charAt(0)?+C[s.slice(1,-1)]:+s:-1<"fFeE".indexOf(o)?6:"d"===o?0:void 0,g=t?C[t.slice(0,-1)]:C[T++],o){case"s":return M(String(g),p,r,s,d,h);case"c":return M(String.fromCharCode(+g),p,r,s,d);case"b":return w(g,2,f,p,r,s,d);case"o":return w(g,8,f,p,r,s,d);case"x":return w(g,16,f,p,r,s,d);case"X":return w(g,16,f,p,r,s,d).toUpperCase();case"u":return w(g,10,f,p,r,s,d);case"i":case"d":return l=+g||0,g=(i=(l=Math.round(l-l%1))<0?"-":_)+y(String(Math.abs(l)),s,"0",!1),S(g,i,p,r,d);case"e":case"E":case"f":case"F":case"g":case"G":return i=(l=+g)<0?"-":_,c=["toExponential","toFixed","toPrecision"]["efg".indexOf(o.toLowerCase())],u=["toString","toUpperCase"]["eEfFgG".indexOf(o)%2],g=i+Math.abs(l)[c](s),S(g,i,p,r,d)[u]();default:return e}})},n.html_entity_decode=function(e,t){var n,r={},a="",s="",s=e.toString();if(!1===(r=this.get_html_translation_table("HTML_ENTITIES",t)))return!1;for(a in delete r["&"],r["&"]="&amp;",r)n=r[a],s=s.split(n).join(a);return s=s.split("&#039;").join("'")},n.get_html_translation_table=function(e,t){var n,r={},a={},s={},o={};if(s[0]="HTML_SPECIALCHARS",s[1]="HTML_ENTITIES",o[0]="ENT_NOQUOTES",o[2]="ENT_COMPAT",o[3]="ENT_QUOTES",s=isNaN(e)?e?e.toUpperCase():"HTML_SPECIALCHARS":s[e],e=isNaN(t)?t?t.toUpperCase():"ENT_COMPAT":o[t],"HTML_SPECIALCHARS"!==s&&"HTML_ENTITIES"!==s)throw new Error("Table: "+s+" not supported");for(n in r[38]="&amp;","HTML_ENTITIES"===s&&(r[160]="&nbsp;",r[161]="&iexcl;",r[162]="&cent;",r[163]="&pound;",r[164]="&curren;",r[165]="&yen;",r[166]="&brvbar;",r[167]="&sect;",r[168]="&uml;",r[169]="&copy;",r[170]="&ordf;",r[171]="&laquo;",r[172]="&not;",r[173]="&shy;",r[174]="&reg;",r[175]="&macr;",r[176]="&deg;",r[177]="&plusmn;",r[178]="&sup2;",r[179]="&sup3;",r[180]="&acute;",r[181]="&micro;",r[182]="&para;",r[183]="&middot;",r[184]="&cedil;",r[185]="&sup1;",r[186]="&ordm;",r[187]="&raquo;",r[188]="&frac14;",r[189]="&frac12;",r[190]="&frac34;",r[191]="&iquest;",r[192]="&Agrave;",r[193]="&Aacute;",r[194]="&Acirc;",r[195]="&Atilde;",r[196]="&Auml;",r[197]="&Aring;",r[198]="&AElig;",r[199]="&Ccedil;",r[200]="&Egrave;",r[201]="&Eacute;",r[202]="&Ecirc;",r[203]="&Euml;",r[204]="&Igrave;",r[205]="&Iacute;",r[206]="&Icirc;",r[207]="&Iuml;",r[208]="&ETH;",r[209]="&Ntilde;",r[210]="&Ograve;",r[211]="&Oacute;",r[212]="&Ocirc;",r[213]="&Otilde;",r[214]="&Ouml;",r[215]="&times;",r[216]="&Oslash;",r[217]="&Ugrave;",r[218]="&Uacute;",r[219]="&Ucirc;",r[220]="&Uuml;",r[221]="&Yacute;",r[222]="&THORN;",r[223]="&szlig;",r[224]="&agrave;",r[225]="&aacute;",r[226]="&acirc;",r[227]="&atilde;",r[228]="&auml;",r[229]="&aring;",r[230]="&aelig;",r[231]="&ccedil;",r[232]="&egrave;",r[233]="&eacute;",r[234]="&ecirc;",r[235]="&euml;",r[236]="&igrave;",r[237]="&iacute;",r[238]="&icirc;",r[239]="&iuml;",r[240]="&eth;",r[241]="&ntilde;",r[242]="&ograve;",r[243]="&oacute;",r[244]="&ocirc;",r[245]="&otilde;",r[246]="&ouml;",r[247]="&divide;",r[248]="&oslash;",r[249]="&ugrave;",r[250]="&uacute;",r[251]="&ucirc;",r[252]="&uuml;",r[253]="&yacute;",r[254]="&thorn;",r[255]="&yuml;"),"ENT_NOQUOTES"!==e&&(r[34]="&quot;"),"ENT_QUOTES"===e&&(r[39]="&#39;"),r[60]="&lt;",r[62]="&gt;",r)r.hasOwnProperty(n)&&(a[String.fromCharCode(n)]=r[n]);return a},n.htmlentities=function(e,t,n,r){var a=this.get_html_translation_table("HTML_ENTITIES",t),s="";if(e=null==e?"":e+"",!a)return!1;if(t&&"ENT_QUOTES"===t&&(a["'"]="&#039;"),r||null==r)for(s in a)a.hasOwnProperty(s)&&(e=e.split(s).join(a[s]));else e=e.replace(/([\s\S]*?)(&(?:#\d+|#x[\da-f]+|[a-zA-Z][\da-z]*);|$)/g,function(e,t,n){for(s in a)a.hasOwnProperty(s)&&(t=t.split(s).join(a[s]));return t+n});return e},n}void 0!==n&&n.exports?n.exports=r:window.PHP_JS=r});
;/*!wiki-common:widget/lib/jsmart/jsmart.js*/
define("wiki-common:widget/lib/jsmart/jsmart",function(require,exports,module){var PHP_JS=require("wiki-common:widget/lib/jsmart/PHPJS");function obMerge(e,t){for(var r=1;r<arguments.length;++r)for(var a in arguments[r])e[a]=arguments[r][a];return e}function countProperties(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r}function findInArray(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}function evalString(e){return e.replace(/\\t/,"\t").replace(/\\n/,"\n").replace(/\\(['"\\])/g,"$1")}function trimQuotes(e){return evalString(e.replace(/^['"](.*)['"]$/,"$1")).replace(/^\s+|\s+$/g,"")}function findTag(e,t){for(var r=0,a=0,n=jSmart.prototype.left_delimiter,s=jSmart.prototype.right_delimiter,i=jSmart.prototype.auto_literal,o=e?new RegExp("^\\s*("+e+")\\s*$","i"):/^\s*(.+)\s*$/i,p=0;p<t.length;++p)if(t.substr(p,n.length)==n)i&&p+1<t.length&&t.substr(p+1,1).match(/\s/)||(r||(t=t.slice(p),a+=parseInt(p),p=0),++r);else if(t.substr(p,s.length)==s&&!(i&&0<=p-1&&t.substr(p-1,1).match(/\s/))){if(!--r){var c=t.slice(n.length,p).replace(/[\r\n]/g," ").match(o);if(c)return c.index=a,c[0]=t.slice(0,p+s.length),c}r<0&&(r=0)}return null}function findCloseTag(e,t,r){var a,n="",s=null,i=0;do{if(s&&(i+=s[0].length),!(s=findTag(e,r)))throw new Error("Unclosed {"+t+"}")}while(n+=r.slice(0,s.index),i+=s.index,r=r.slice(s.index+s[0].length),(a=findTag(t,n))&&(n=n.slice(a.index+a[0].length)),a);return s.index=i,s}function findElseTag(e,t,r,a){for(var n=0,s=findTag(r,a);s;s=findTag(r,a)){var i=findTag(e,a);if(!i||i.index>s.index)return s.index+=n,s;a=a.slice(i.index+i[0].length),n+=i.index+i[0].length;i=findCloseTag(t,e,a);a=a.slice(i.index+i[0].length),n+=i.index+i[0].length}return null}function execute(code,data){if("string"==typeof code)with({__code:code})with(modifiers)with(data)try{return eval(__code)}catch(e){throw new Error(e.message+" in \n"+code)}return code}function assignVar(e,t,r){e.match(/\[\]$/)?r[e.replace(/\[\]$/,"")].push(t):r[e]=t}var buildInFunctions={expression:{parse:function(e,t){var r=parseExpression(e);return t.push({type:"build-in",name:"expression",expression:r.tree,params:parseParams(e.slice(r.value.length).replace(/^\s+|\s+$/g,""))}),r.tree},process:function(e,t){var r=getActualParamValues(e.params,t),a=process([e.expression],t);if(findInArray(r,"nofilter")<0){for(var n=0;n<default_modifiers.length;++n){var s=default_modifiers[n];s.params.__parsed[0]={type:"text",data:a},a=process([s],t)}escape_html&&(a=modifiers.escape(a)),a=applyFilters(varFilters,a),tpl_modifiers.length&&(__t=function(){return a},a=process(tpl_modifiers,t))}return a}},operator:{process:function(e,t){var r=getActualParamValues(e.params,t),a=r[0];if("binary"!=e.optype){if("!"==e.op)return!a;var n="var"==e.params.__parsed[0].type,s=a=n?getVarValue(e.params.__parsed[0],t):a;if("pre-unary"==e.optype){switch(e.op){case"-":s=-a;break;case"++":s=++a;break;case"--":s=--a}n&&getVarValue(e.params.__parsed[0],t,a)}else{switch(e.op){case"++":a++;break;case"--":a--}getVarValue(e.params.__parsed[0],t,a)}return s}var i=r[1];if("="==e.op)return getVarValue(e.params.__parsed[0],t,i),"";if(e.op.match(/(\+=|-=|\*=|\/=|%=)/)){switch(a=getVarValue(e.params.__parsed[0],t),e.op){case"+=":a+=i;break;case"-=":a-=i;break;case"*=":a*=i;break;case"/=":a/=i;break;case"%=":a%=i}return getVarValue(e.params.__parsed[0],t,a)}if(e.op.match(/div/))return"div"!=e.op^a%i==0;if(e.op.match(/even/))return"even"!=e.op^a/i%2==0;if(e.op.match(/xor/))return(a||i)&&!(a&&i);switch(e.op){case"==":return a==i;case"!=":return a!=i;case"+":return parseInt(a,10)+parseInt(i,10);case"-":return parseInt(a,10)-parseInt(i,10);case"*":return parseInt(a,10)*parseInt(i,10);case"/":return parseInt(a,10)/parseInt(i,10);case"%":return parseInt(a,10)%parseInt(i,10);case"&&":return a&&i;case"||":return a||i;case"<":return a<i;case"<=":return a<=i;case">":return i<a;case">=":return i<=a;case"===":return a===i;case"!==":return a!==i}}},section:{type:"block",parse:function(e,t,r){var a=[],n=[],t=(t.push({type:"build-in",name:"section",params:e,subTree:a,subTreeElse:n}),findElseTag("section [^}]+","/section","sectionelse",r));t?(parse(r.slice(0,t.index),a),parse(r.slice(t.index+t[0].length).replace(/^[\r\n]/,""),n)):parse(r,a)},process:function(e,t){var r=getActualParamValues(e.params,t),a={},n=(t.smarty.section[r.__get("name",null,0)]=a,r.__get("show",!0));if(!(a.show=n))return process(e.subTreeElse,t);for(var s=parseInt(r.__get("start",0)),i=r.loop instanceof Object?countProperties(r.loop):isNaN(r.loop)?0:parseInt(r.loop),o=parseInt(r.__get("step",1)),p=parseInt(r.__get("max")),c=(isNaN(p)&&(p=Number.MAX_VALUE),s<0?(s+=i)<0&&(s=0):i<=s&&(s=i?i-1:0),0),l=s;0<=l&&l<i&&c<p;l+=o,++c)0;a.total=c,a.loop=c;for(var c=0,u="",l=s;0<=l&&l<i&&c<p&&!t.smarty.break;l+=o,++c)a.first=l==s,a.last=l+o<0||i<=l+o,a.index=l,a.index_prev=l-o,a.index_next=l+o,a.iteration=a.rownum=c+1,u+=process(e.subTree,t),t.smarty.continue=!1;return t.smarty.break=!1,c?u:process(e.subTreeElse,t)}},setfilter:{type:"block",parseParams:function(e){return[parseExpression("__t()|"+e).tree]},parse:function(e,t,r){t.push({type:"build-in",name:"setfilter",params:e,subTree:parse(r,[])})},process:function(e,t){tpl_modifiers=e.params;e=process(e.subTree,t);return tpl_modifiers=[],e}},for:{type:"block",parseParams:function(e){var t=e.match(/^\s*\$(\w+)\s*=\s*([^\s]+)\s*to\s*([^\s]+)\s*(?:step\s*([^\s]+))?\s*(.*)$/);if(t)return parseParams("varName='"+t[1]+"' from="+t[2]+" to="+t[3]+" step="+(t[4]||"1")+" "+t[5]);throw new Error("Invalid {for} parameters: "+e)},parse:function(e,t,r){var a=[],n=[],t=(t.push({type:"build-in",name:"for",params:e,subTree:a,subTreeElse:n}),findElseTag("for\\s[^}]+","/for","forelse",r));t?(parse(r.slice(0,t.index),a),parse(r.slice(t.index+t[0].length),n)):parse(r,a)},process:function(e,t){for(var r=getActualParamValues(e.params,t),a=parseInt(r.__get("from")),n=parseInt(r.__get("to")),s=parseInt(r.__get("step")),i=(isNaN(s)&&(s=1),parseInt(r.__get("max"))),o=(isNaN(i)&&(i=Number.MAX_VALUE),0),p="",c=Math.min(Math.ceil((1+(0<s?n-a:a-n))/Math.abs(s)),i),l=parseInt(r.from);o<c&&!t.smarty.break;l+=s,++o)t[r.varName]=l,p+=process(e.subTree,t),t.smarty.continue=!1;return t.smarty.break=!1,p=o?p:process(e.subTreeElse,t)}},if:{type:"block",parse:function(e,t,r){var a=[],n=[],t=(t.push({type:"build-in",name:"if",params:e,subTreeIf:a,subTreeElse:n}),findElseTag("if\\s+[^}]+","/if","else[^}]*",r));t?(parse(r.slice(0,t.index),a),r=r.slice(t.index+t[0].length),(e=t[1].match(/^else\s*if(.*)/))?buildInFunctions.if.parse(parseParams(e[1]),n,r.replace(/^\n/,"")):parse(r.replace(/^\n/,""),n)):parse(r,a)},process:function(e,t){return getActualParamValues(e.params,t)[0]?process(e.subTreeIf,t):process(e.subTreeElse,t)}},foreach:{type:"block",parseParams:function(e){var t=e.match(/^\s*([$].+)\s*as\s*[$](\w+)\s*(=>\s*[$](\w+))?\s*$/i);return t&&(e="from="+t[1]+" item="+(t[4]||t[2]),t[4]&&(e+=" key="+t[2])),parseParams(e)},parse:function(e,t,r){var a=[],n=[],t=(t.push({type:"build-in",name:"foreach",params:e,subTree:a,subTreeElse:n}),findElseTag("foreach\\s[^}]+","/foreach","foreachelse",r));t?(parse(r.slice(0,t.index),a),parse(r.slice(t.index+t[0].length).replace(/^[\r\n]/,""),n)):parse(r,a)},process:function(e,t){var r=getActualParamValues(e.params,t),a=r.from;if(null==a)return"";var n,s=countProperties(a=a instanceof Object?a:[a]),i=(t[r.item+"__total"]=s,"name"in r&&(t.smarty.foreach[r.name]={},t.smarty.foreach[r.name].total=s),""),o=0;for(n in a)if(a.hasOwnProperty(n)){if(t.smarty.break)break;t[r.item+"__key"]=isNaN(n)?n:parseInt(n),"key"in r&&(t[r.key]=t[r.item+"__key"]),t[r.item]=a[n],t[r.item+"__index"]=parseInt(o),t[r.item+"__iteration"]=parseInt(o+1),t[r.item+"__first"]=0===o,t[r.item+"__last"]=o==s-1,"name"in r&&(t.smarty.foreach[r.name].index=parseInt(o),t.smarty.foreach[r.name].iteration=parseInt(o+1),t.smarty.foreach[r.name].first=0===o?1:"",t.smarty.foreach[r.name].last=o==s-1?1:""),++o,i+=process(e.subTree,t),t.smarty.continue=!1}return t.smarty.break=!1,t[r.item+"__show"]=0<o,r.name&&(t.smarty.foreach[r.name].show=0<o?1:""),0<o?i:process(e.subTreeElse,t)}},function:{type:"block",parse:function(e,t,r){var a=[];plugins[trimQuotes(e.name||e[0])]={type:"function",subTree:a,defautParams:e,process:function(e,t){var r=getActualParamValues(this.defautParams,t);return delete r.name,process(this.subTree,obMerge({},t,r,e))}},parse(r,a)}},php:{type:"block",parse:function(e,t,r){}},extends:{type:"function",parse:function(e,t){t.splice(0,t.length),getTemplate(trimQuotes(e.file||e[0]),t)}},block:{type:"block",parse:function(t,e,r){e.push({type:"build-in",name:"block",params:t}),t.append=0<=findInArray(t,"append"),t.prepend=0<=findInArray(t,"prepend"),t.hide=0<=findInArray(t,"hide"),t.hasChild=t.hasParent=!1,onParseVar=function(e){e.match(/^\s*[$]smarty.block.child\s*$/)&&(t.hasChild=!0),e.match(/^\s*[$]smarty.block.parent\s*$/)&&(t.hasParent=!0)};e=parse(r,[]),onParseVar=function(e){},r=trimQuotes(t.name||t[0]);r in blocks||(blocks[r]=[]),blocks[r].push({tree:e,params:t})},process:function(e,t){t.smarty.block.parent=t.smarty.block.child="";e=trimQuotes(e.params.name||e.params[0]);return this.processBlocks(blocks[e],blocks[e].length-1,t),t.smarty.block.child},processBlocks:function(e,t,r){if(!t&&e[t].params.hide)r.smarty.block.child="";else for(var a=!0,n=!1;0<=t;--t){e[t].params.hasParent&&(s=r.smarty.block.child,r.smarty.block.child="",this.processBlocks(e,t-1,r),r.smarty.block.parent=r.smarty.block.child,r.smarty.block.child=s);var s=r.smarty.block.child,i=process(e[t].tree,r);r.smarty.block.child=s,e[t].params.hasChild?r.smarty.block.child=i:a?r.smarty.block.child=i+r.smarty.block.child:n&&(r.smarty.block.child+=i),a=e[t].params.append,n=e[t].params.prepend}}},strip:{type:"block",parse:function(e,t,r){parse(r.replace(/[ \t]*[\r\n]+[ \t]*/g,""),t)}},literal:{type:"block",parse:function(e,t,r){parseText(r,t)}},ldelim:{type:"function",parse:function(e,t){parseText(jSmart.prototype.left_delimiter,t)}},rdelim:{type:"function",parse:function(e,t){parseText(jSmart.prototype.right_delimiter,t)}},while:{type:"block",parse:function(e,t,r){t.push({type:"build-in",name:"while",params:e,subTree:parse(r,[])})},process:function(e,t){for(var r="";getActualParamValues(e.params,t)[0]&&!t.smarty.break;)r+=process(e.subTree,t),t.smarty.continue=!1;return t.smarty.break=!1,r}}},plugins={},modifiers={},files={},blocks=null,scripts=null,tpl_modifiers=[];function parse(e,t){for(var r=findTag("",e);r;r=findTag("",e)){r.index&&parseText(e.slice(0,r.index),t),e=e.slice(r.index+r[0].length);var a,n,s,i,o=r[1].match(/^\s*(\w+)(.*)$/);o?(a=o[1],o=2<o.length?o[2].replace(/^\s+|\s+$/g,""):"",a in buildInFunctions?(i=("parseParams"in(n=buildInFunctions[a])?n.parseParams:parseParams)(o),"block"==n.type?(s=findCloseTag("/"+a,a+" +[^}]*",e=e.replace(/^\n/,"")),n.parse(i,t,e.slice(0,s.index)),e=e.slice(s.index+s[0].length)):(n.parse(i,t),"extends"==a&&(t=[])),e=e.replace(/^\n/,"")):a in plugins?("block"==(n=plugins[a]).type?(s=findCloseTag("/"+a,a+" +[^}]*",e),parsePluginBlock(a,parseParams(o),t,e.slice(0,s.index)),e=e.slice(s.index+s[0].length)):"function"==n.type&&parsePluginFunc(a,parseParams(o),t),"append"!=a&&"assign"!=a&&"capture"!=a&&"eval"!=a&&"include"!=a||(e=e.replace(/^\n/,""))):buildInFunctions.expression.parse(r[1],t)):"build-in"==(i=buildInFunctions.expression.parse(r[1],t)).type&&"operator"==i.name&&"="==i.op&&(e=e.replace(/^\n/,""))}return e&&parseText(e,t),t}function parseText(e,t){if(parseText.parseEmbeddedVars)for(var r=/([$][\w@]+)|`([^`]*)`/,a=r.exec(e);a;a=r.exec(e))t.push({type:"text",data:e.slice(0,a.index)}),t.push(parseExpression(a[1]||a[2]).tree),e=e.slice(a.index+a[0].length);return t.push({type:"text",data:e}),t}function parseFunc(e,t,r){return t.__parsed.name=parseText(e,[])[0],r.push({type:"plugin",name:"__func",params:t}),r}function parseOperator(e,t,r,a){a.push({type:"build-in",name:"operator",op:e,optype:t,precedence:r,params:{}})}function parseVar(e,t,r){for(var a=t.token,n=[{type:"text",data:r.replace(/^(\w+)@(key|index|iteration|first|last|show|total)/gi,"$1__$2")}],s=/^(?:\.|\s*->\s*|\[\s*)/,i=e.match(s);i;i=e.match(s)){t.token+=i[0],e=e.slice(i[0].length);var o,p,c={value:"",tree:[]};i[0].match(/\[/)?((c=parseExpression(e))&&(t.token+=c.value,n.push(c.tree),e=e.slice(c.value.length)),(o=e.match(/\s*\]/))&&(t.token+=o[0],e=e.slice(o[0].length))):(o=parseModifiers.stop,parseModifiers.stop=!0,lookUp(e,c)?(t.token+=c.value,"plugin"==(p=c.tree[0]).type&&"__func"==p.name&&(p.hasOwner=!0),n.push(p),e=e.slice(c.value.length)):c=!1,parseModifiers.stop=o),c||n.push({type:"text",data:""})}return t.tree.push({type:"var",parts:n}),t.value+=t.token.substr(a.length),onParseVar(t.token),e}function onParseVar(e){}var tokens=[{re:/^\$([\w@]+)/,parse:function(e,t){parseModifiers(parseVar(t,e,RegExp.$1),e)}},{re:/^(true|false)/i,parse:function(e,t){parseText(e.token.match(/true/i)?"1":"",e.tree)}},{re:/^'([^'\\]*(?:\\.[^'\\]*)*)'/,parse:function(e,t){parseText(evalString(RegExp.$1),e.tree),parseModifiers(t,e)}},{re:/^"([^"\\]*(?:\\.[^"\\]*)*)"/,parse:function(e,t){var r=evalString(RegExp.$1),a=r.match(tokens[0].re);if(a){var n={token:a[0],tree:[]};if(parseVar(r,n,a[1]),n.token.length==r.length)return void e.tree.push(n.tree[0])}parseText.parseEmbeddedVars=!0,e.tree.push({type:"plugin",name:"__quoted",params:{__parsed:parse(r,[])}}),parseText.parseEmbeddedVars=!1,parseModifiers(t,e)}},{re:/^(\w+)\s*[(]([)]?)/,parse:function(e,t){var r=RegExp.$1,a=parseParams(RegExp.$2?"":t,/^\s*,\s*/);parseFunc(r,a,e.tree),e.value+=a.toString(),parseModifiers(t.slice(a.toString().length),e)}},{re:/^\s*\(\s*/,parse:function(e,t){var r=[];e.tree.push(r),r.parent=e.tree,e.tree=r}},{re:/^\s*\)\s*/,parse:function(e,t){e.tree.parent&&(e.tree=e.tree.parent)}},{re:/^\s*(\+\+|--)\s*/,parse:function(e,t){e.tree.length&&"var"==e.tree[e.tree.length-1].type?parseOperator(RegExp.$1,"post-unary",1,e.tree):parseOperator(RegExp.$1,"pre-unary",1,e.tree)}},{re:/^\s*(===|!==|==|!=)\s*/,parse:function(e,t){parseOperator(RegExp.$1,"binary",6,e.tree)}},{re:/^\s+(eq|ne|neq)\s+/i,parse:function(e,t){parseOperator(RegExp.$1.replace(/ne(q)?/,"!=").replace(/eq/,"=="),"binary",6,e.tree)}},{re:/^\s*!\s*/,parse:function(e,t){parseOperator("!","pre-unary",2,e.tree)}},{re:/^\s+not\s+/i,parse:function(e,t){parseOperator("!","pre-unary",2,e.tree)}},{re:/^\s*(=|\+=|-=|\*=|\/=|%=)\s*/,parse:function(e,t){parseOperator(RegExp.$1,"binary",10,e.tree)}},{re:/^\s*(\*|\/|%)\s*/,parse:function(e,t){parseOperator(RegExp.$1,"binary",3,e.tree)}},{re:/^\s+mod\s+/i,parse:function(e,t){parseOperator("%","binary",3,e.tree)}},{re:/^\s*(\+|-)\s*/,parse:function(e,t){e.tree.length&&"operator"!=e.tree[e.tree.length-1].name?parseOperator(RegExp.$1,"binary",4,e.tree):parseOperator(RegExp.$1,"pre-unary",4,e.tree)}},{re:/^\s*(<=|>=|<>|<|>)\s*/,parse:function(e,t){parseOperator(RegExp.$1.replace(/<>/,"!="),"binary",5,e.tree)}},{re:/^\s+(lt|lte|le|gt|gte|ge)\s+/i,parse:function(e,t){parseOperator(RegExp.$1.replace(/lt/,"<").replace(/l(t)?e/,"<=").replace(/gt/,">").replace(/g(t)?e/,">="),"binary",5,e.tree)}},{re:/^\s+(is\s+(not\s+)?div\s+by)\s+/i,parse:function(e,t){parseOperator(RegExp.$2?"div_not":"div","binary",7,e.tree)}},{re:/^\s+is\s+(not\s+)?(even|odd)(\s+by\s+)?\s*/i,parse:function(e,t){parseOperator(RegExp.$1?"odd"==RegExp.$2?"even":"even_not":"odd"==RegExp.$2?"even_not":"even","binary",7,e.tree),RegExp.$3||parseText("1",e.tree)}},{re:/^\s*(&&)\s*/,parse:function(e,t){parseOperator(RegExp.$1,"binary",8,e.tree)}},{re:/^\s*(\|\|)\s*/,parse:function(e,t){parseOperator(RegExp.$1,"binary",9,e.tree)}},{re:/^\s+and\s+/i,parse:function(e,t){parseOperator("&&","binary",11,e.tree)}},{re:/^\s+xor\s+/i,parse:function(e,t){parseOperator("xor","binary",12,e.tree)}},{re:/^\s+or\s+/i,parse:function(e,t){parseOperator("||","binary",13,e.tree)}},{re:/^#(\w+)#/,parse:function(e,t){var r={token:"$smarty",tree:[]};parseVar(".config."+RegExp.$1,r,"smarty"),e.tree.push(r.tree[0]),parseModifiers(t,e)}},{re:/^\s*\[\s*/,parse:function(e,t){var r=parseParams(t,/^\s*,\s*/,/^('[^'\\]*(?:\\.[^'\\]*)*'|"[^"\\]*(?:\\.[^"\\]*)*"|\w+)\s*=>\s*/),t=(parsePluginFunc("__array",r,e.tree),e.value+=r.toString(),t.slice(r.toString().length).match(/\s*\]/));t&&(e.value+=t[0])}},{re:/^[\d.]+/,parse:function(e,t){-1<e.token.indexOf(".")?e.token=parseFloat(e.token):e.token=parseInt(e.token,10),parseText(e.token,e.tree),parseModifiers(t,e)}},{re:/^\w+/,parse:function(e,t){parseText(e.token,e.tree),parseModifiers(t,e)}}];function parseModifiers(e,t){if(!parseModifiers.stop){var r=e.match(/^\|(\w+)/);if(r){t.value+=r[0];for(var a="default"==r[1]?"defaultValue":r[1],n=(e=e.slice(r[0].length).replace(/^\s+/,""),parseModifiers.stop=!0,[]),s=e.match(/^\s*:\s*/);s;s=e.match(/^\s*:\s*/)){t.value+=e.slice(0,s[0].length);var i={value:"",tree:[]};lookUp(e=e.slice(s[0].length),i)?(t.value+=i.value,n.push(i.tree[0]),e=e.slice(i.value.length)):parseText("",n)}parseModifiers.stop=!1,n.unshift(t.tree.pop()),t.tree.push(parseFunc(a,{__parsed:n},[])[0]),parseModifiers(e,t)}}}function lookUp(e,t){if(e){if(e.substr(0,jSmart.prototype.left_delimiter.length)==jSmart.prototype.left_delimiter){var r=findTag("",e);if(r)return t.token=r[0],t.value+=r[0],parse(r[0],t.tree),parseModifiers(e.slice(t.value.length),t),1}for(var a=0;a<tokens.length;++a)if(e.match(tokens[a].re))return t.token=RegExp.lastMatch,t.value+=RegExp.lastMatch,tokens[a].parse(t,e.slice(t.token.length)),1}}function bundleOp(e,t,r){var a=t[e];if("operator"==a.name&&a.precedence==r&&!a.params.__parsed){if("binary"==a.optype)return a.params.__parsed=[t[e-1],t[e+1]],t.splice(e-1,3,a),!0;if("post-unary"==a.optype)return a.params.__parsed=[t[e-1]],t.splice(e-1,2,a),!0;a.params.__parsed=[t[e+1]],t.splice(e,2,a)}return!1}function composeExpression(e){for(var t=0,t=0;t<e.length;++t)e[t]instanceof Array&&(e[t]=composeExpression(e[t]));for(var r=1;r<14;++r)if(2==r||10==r)for(t=e.length;0<t;--t)t-=bundleOp(t-1,e,r);else for(t=0;t<e.length;++t)t-=bundleOp(t,e,r);return e[0]}function parseExpression(e){for(var t={value:"",tree:[]};lookUp(e.slice(t.value.length),t););return!!t.tree.length&&(t.tree=composeExpression(t.tree),t)}function parseParams(e,t,r){var a=e.replace(/\n/g," ").replace(/^\s+|\s+$/g,""),n=[],e=(n.__parsed=[],"");if(!a)return n;for(t||(t=/^\s+/,r=/^(\w+)\s*=\s*/);a;){var s=null,i=(!r||(i=a.match(r))&&(s=trimQuotes(i[1]),e+=a.slice(0,i[0].length),a=a.slice(i[0].length)),parseExpression(a));if(!i)break;s?(n[s]=i.value,n.__parsed[s]=i.tree):(n.push(i.value),n.__parsed.push(i.tree)),e+=a.slice(0,i.value.length);s=(a=a.slice(i.value.length)).match(t);if(!s)break;e+=a.slice(0,s[0].length),a=a.slice(s[0].length)}return n.toString=function(){return e},n}function parsePluginBlock(e,t,r,a){r.push({type:"plugin",name:e,params:t,subTree:parse(a,[])})}function parsePluginFunc(e,t,r){r.push({type:"plugin",name:e,params:t})}function getActualParamValues(e,t){var r,a,n=[];for(r in e.__parsed)e.__parsed.hasOwnProperty(r)&&(a=process([e.__parsed[r]],t),n[r]=a);return n.__get=function(e,t,r){if(e in n&&void 0!==n[e])return n[e];if(void 0!==r&&void 0!==n[r])return n[r];if(null===t)throw new Error("The required attribute '"+e+"' is missing");return t},n}function getVarValue(e,t,r){for(var a=t,n="",s=0;s<e.parts.length;++s){var i=e.parts[s];if("plugin"==i.type&&"__func"==i.name&&i.hasOwner)t.__owner=a,a=process([e.parts[s]],t),delete t.__owner;else if(!(n=(n=process([i],t))in t.smarty.section&&"text"==i.type&&"smarty"!=process([e.parts[0]],t)?t.smarty.section[n].index:n)&&void 0!==r&&a instanceof Array&&(n=a.length),void 0!==r&&s==e.parts.length-1&&(a[n]=r),"object"==typeof a&&null!==a&&n in a)a=a[n];else{if(void 0===r)return r;a[n]={},a=a[n]}}return a}function process(e,t){for(var r="",a=0;a<e.length;++a){var n="",s=e[a];if("text"==s.type)n=s.data;else if("var"==s.type)n=getVarValue(s,t);else if("build-in"==s.type)n=buildInFunctions[s.name].process(s,t);else if("plugin"==s.type){var i=plugins[s.name];if("block"==i.type){var o={value:!0};for(i.process(getActualParamValues(s.params,t),"",t,o);o.value;)o.value=!1,n+=i.process(getActualParamValues(s.params,t),process(s.subTree,t),t,o)}else"function"==i.type&&(n=i.process(getActualParamValues(s.params,t),t))}if("boolean"==typeof n&&(n=n?"1":""),1==e.length)return n;if(r+=n,t.smarty.continue||t.smarty.break)return r}return r}function getTemplate(e,t,r){if(!r&&e in files)t=files[e];else{r=jSmart.prototype.getTemplate(e);if("string"!=typeof r)throw new Error("No template for "+e);parse(applyFilters(jSmart.prototype.filters_global.pre,stripComments(r.replace(/\r\n/g,"\n"))),t),files[e]=t}return t}function stripComments(e){for(var t="",r=e.match(/{\*/);r;r=e.match(/{\*/)){t+=e.slice(0,r.index);var a=(e=e.slice(r.index+r[0].length)).match(/\*}/);if(!a)throw new Error("Unclosed {*");e=e.slice(a.index+a[0].length)}return t+e}function applyFilters(e,t){for(var r=0;r<e.length;++r)t=e[r](t);return t}var jSmart=function(e){this.tree=[],this.tree.blocks={},this.scripts={},this.default_modifiers=[],this.filters={variable:[],post:[]},this.smarty={smarty:{block:{},break:!1,capture:{},continue:!1,counter:{},cycle:{},foreach:{},section:{},now:Math.floor((new Date).getTime()/1e3),const:{},config:{},current_dir:"/",template:"",ldelim:jSmart.prototype.left_delimiter,rdelim:jSmart.prototype.right_delimiter,version:"2.13.1"}},blocks=this.tree.blocks,parse(applyFilters(jSmart.prototype.filters_global.pre,stripComments(new String(e||"").replace(/\|f_escape_\w+/g,"").replace(/\r\n/g,"\n"))),this.tree)},httpsTransMap=(jSmart.prototype.fetch=function(e){blocks=this.tree.blocks,scripts=this.scripts,escape_html=this.escape_html,default_modifiers=jSmart.prototype.default_modifiers_global.concat(this.default_modifiers),this.data=obMerge("object"==typeof e?e:{},this.smarty),varFilters=jSmart.prototype.filters_global.variable.concat(this.filters.variable);e=process(this.tree,this.data);return jSmart.prototype.debugging&&plugins.debug.process([],this.data),applyFilters(jSmart.prototype.filters_global.post.concat(this.filters.post),e)},jSmart.prototype.escape_html=!1,jSmart.prototype.registerPlugin=function(e,t,r){"modifier"==e?modifiers[t]=r:plugins[t]={type:e,process:r}},jSmart.prototype.registerFilter=function(e,t){(this.tree?this.filters:jSmart.prototype.filters_global)["output"==e?"post":e].push(t)},jSmart.prototype.filters_global={pre:[],variable:[],post:[]},jSmart.prototype.configLoad=function(e,t,r){r=r||this.data;for(var a=/^\s*(?:\[([^\]]+)\]|(?:(\w+)[ \t]*=[ \t]*("""|'[^'\\\n]*(?:\\.[^'\\\n]*)*'|"[^"\\\n]*(?:\\.[^"\\\n]*)*"|[^\n]*)))/m,n="",s=(i=e.replace(/\r\n/g,"\n").replace(/^\s+|\s+$/g,"")).match(a);s;s=i.match(a)){var i=i.slice(s.index+s[0].length),o=(s[1]?n=s[1]:n&&n!=t||"."==n.substr(0,1)||('"""'==s[3]?(o=i.match(/"""/))&&(r.smarty.config[s[2]]=i.slice(0,o.index),i=i.slice(o.index+o[0].length)):r.smarty.config[s[2]]=trimQuotes(s[3])),i.match(/\n+/));if(!o)break;i=i.slice(o.index+o[0].length)}},jSmart.prototype.clearConfig=function(e){e?delete this.data.smarty.config[e]:this.data.smarty.config={}},jSmart.prototype.addDefaultModifier=function(e){e instanceof Array||(e=[e]);for(var t=0;t<e.length;++t){var r={value:"",tree:[0]};parseModifiers("|"+e[t],r),(this.tree?this.default_modifiers:this.default_modifiers_global).push(r.tree[0])}},jSmart.prototype.default_modifiers_global=[],jSmart.prototype.getTemplate=function(e){return __inline(e)},jSmart.prototype.getFile=function(e){return __inline(e)},jSmart.prototype.getJavascript=function(e){return __inline(e)},jSmart.prototype.getConfig=function(e){return __inline(e)},jSmart.prototype.auto_literal=!0,jSmart.prototype.left_delimiter="{%",jSmart.prototype.right_delimiter="%}",jSmart.prototype.debugging=!1,jSmart.prototype.PHPJS=function(fnm,modifier){if("function"==eval("typeof "+fnm))return"object"==typeof window?window:global;if("function"==typeof PHP_JS)return new PHP_JS;throw new Error("Modifier '"+modifier+"' uses JavaScript port of PHP function '"+fnm+"'. You can find one at http://phpjs.org")},jSmart.prototype.makeTimeStamp=function(e){return e?isNaN(e)?-1==(t=jSmart.prototype.PHPJS("strtotime","date_format").strtotime(e))||!1===t?Math.floor((new Date).getTime()/1e3):t:14==(e=new String(e)).length?Math.floor(new Date(e.substr(0,4),e.substr(4,2)-1,e.substr(6,2),e.substr(8,2),e.substr(10,2)).getTime()/1e3):parseInt(e):Math.floor((new Date).getTime()/1e3);var t},jSmart.prototype.registerPlugin("function","__array",function(e,t){var r,a=[];for(r in e)e.hasOwnProperty(r)&&e[r]&&"function"!=typeof e[r]&&(a[r]=e[r]);return a}),jSmart.prototype.registerPlugin("function","__func",function(e,t){for(var r=[],a={},n=0;n<e.length;++n)r.push(e.name+"__p"+n),a[e.name+"__p"+n]=e[n];return execute(("__owner"in t&&e.name in t.__owner?"__owner."+e.name:e.name)+"("+r.join(",")+")",obMerge({},t,a))}),jSmart.prototype.registerPlugin("function","__quoted",function(e,t){return e.join("")}),jSmart.prototype.registerPlugin("function","append",function(e,t){var r=e.__get("var",null,0),a=(r in t&&t[r]instanceof Array||(t[r]=[]),e.__get("index",!1)),e=e.__get("value",null,1);return!1===a?t[r].push(e):t[r][a]=e,""}),jSmart.prototype.registerPlugin("function","assign",function(e,t){return assignVar(e.__get("var",null,0),e.__get("value",null,1),t),""}),jSmart.prototype.registerPlugin("function","break",function(e,t){return t.smarty.break=!0,""}),jSmart.prototype.registerPlugin("function","call",function(e,t){var r=e.__get("name",null,0),a=(delete e.name,e.__get("assign",!1)),r=(delete e.assign,plugins[r].process(e,t));return a?(assignVar(a,r,t),""):r}),jSmart.prototype.registerPlugin("block","capture",function(e,t,r,a){return t&&(t=t.replace(/^\n/,""),r.smarty.capture[e.__get("name","default",0)]=t,"assign"in e&&assignVar(e.assign,t,r),(e=e.__get("append",!1))&&(e in r?r[e]instanceof Array&&r[e].push(t):r[e]=[t])),""}),jSmart.prototype.registerPlugin("function","continue",function(e,t){return t.smarty.continue=!0,""}),jSmart.prototype.registerPlugin("function","counter",function(e,t){var r,a=e.__get("name","default");return a in t.smarty.counter?(r=t.smarty.counter[a],"start"in e?r.value=parseInt(e.start):(r.value=parseInt(r.value),r.skip=parseInt(r.skip),"down"==r.direction?r.value-=r.skip:r.value+=r.skip),r.skip=e.__get("skip",r.skip),r.direction=e.__get("direction",r.direction),r.assign=e.__get("assign",r.assign)):t.smarty.counter[a]={value:parseInt(e.__get("start",1)),skip:parseInt(e.__get("skip",1)),direction:e.__get("direction","up"),assign:e.__get("assign",!1)},t.smarty.counter[a].assign?(t[t.smarty.counter[a].assign]=t.smarty.counter[a].value,""):e.__get("print",!0)?t.smarty.counter[a].value:""}),jSmart.prototype.registerPlugin("function","cycle",function(e,t){var r=e.__get("name","default"),a=e.__get("reset",!1),n=(r in t.smarty.cycle||(t.smarty.cycle[r]={arr:[""],delimiter:e.__get("delimiter",","),index:0},a=!0),e.__get("delimiter",!1)&&(t.smarty.cycle[r].delimiter=e.delimiter),e.__get("values",!1));if(n){var s=[];if(n instanceof Object)for(nm in n)s.push(n[nm]);else s=n.split(t.smarty.cycle[r].delimiter);s.length==t.smarty.cycle[r].arr.length&&s[0]==t.smarty.cycle[r].arr[0]||(t.smarty.cycle[r].arr=s,a=!(t.smarty.cycle[r].index=0))}return e.__get("advance","true")&&(t.smarty.cycle[r].index+=1),(t.smarty.cycle[r].index>=t.smarty.cycle[r].arr.length||a)&&(t.smarty.cycle[r].index=0),e.__get("assign",!1)?(assignVar(e.assign,t.smarty.cycle[r].arr[t.smarty.cycle[r].index],t),""):e.__get("print",!0)?t.smarty.cycle[r].arr[t.smarty.cycle[r].index]:""}),jSmart.prototype.print_r=function(e,t){if(e instanceof Object){var r,a=(e instanceof Array?"Array["+e.length+"]":"Object")+"<br>";for(r in e)e.hasOwnProperty(r)&&(a+=t+"&nbsp;&nbsp;<strong>"+r+"</strong> : "+jSmart.prototype.print_r(e[r],t+"&nbsp;&nbsp;&nbsp;")+"<br>");return a}return e},jSmart.prototype.registerPlugin("function","debug",function(e,t){"undefined"!=typeof dbgWnd&&dbgWnd.close(),dbgWnd=window.open("","","width=680,height=600,resizable,scrollbars=yes");var r,a="",n=0;for(r in t)a+="<tr class="+(++n%2?"odd":"even")+"><td><strong>"+r+"</strong></td><td>"+jSmart.prototype.print_r(t[r],"")+"</td></tr>";return dbgWnd.document.write("                  <html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en'>                  <head>                   <title>jSmart Debug Console</title>                     <style type='text/css'>                        table {width: 100%;}                        td {vertical-align:top;width: 50%;}                        .even td {background-color: #fafafa;}                     </style>                  </head>                  <body>                     <h1>jSmart Debug Console</h1>                     <h2>assigned template variables</h2>                     <table>"+a+"</table>                  </body>                  </html>               "),""}),jSmart.prototype.registerPlugin("function","eval",function(e,t){var r=[],r=(parse(e.__get("var","",0),r),process(r,t));return"assign"in e?(assignVar(e.assign,r,t),""):r}),jSmart.prototype.registerPlugin("function","fetch",function(e,t){var r=jSmart.prototype.getFile(e.__get("file",null,0));return"assign"in e?(assignVar(e.assign,r,t),""):r}),jSmart.prototype.registerPlugin("function","html_checkboxes",function(e,t){var r,a,n,s=e.__get("type","checkbox"),i=e.__get("name",s),o=e.__get("name",s),p=e.__get("values",e.options),c=e.__get("options",[]),l="options"in e,u=e.__get("selected",!1),m=e.__get("separator",""),g=Boolean(e.__get("labels",!0)),f=Boolean(e.__get("label_ids",!1)),d=[],h=0,_="";if("checkbox"==s&&(i+="[]"),!l)for(r in e.output)c.push(e.output[r]);for(r in p)p.hasOwnProperty(r)&&(n=o+"_"+(a=l?r:p[r]),_=g?f?'<label for="'+n+'">':"<label>":"",_+='<input type="'+s+'" name="'+i+'" value="'+a+'" ',f&&(_+='id="'+n+'" '),u==(l?r:p[r])&&(_+='checked="checked" '),_=(_+="/>"+c[l?r:h++])+(g?"</label>":"")+m,d.push(_));return"assign"in e?(assignVar(e.assign,d,t),""):d.join("\n")}),jSmart.prototype.registerPlugin("function","html_image",function(e,t){var r,a=e.__get("file",null),n=e.__get("width",!1),s=e.__get("height",!1),i=e.__get("alt",""),o=e.__get("href",e.__get("link",!1)),p={file:1,width:1,height:1,alt:1,href:1,basedir:1,path_prefix:1,link:1},c='<img src="'+e.__get("path_prefix","")+a+'" alt="'+i+'"'+(n?' width="'+n+'"':"")+(s?' height="'+s+'"':"");for(r in e)!e.hasOwnProperty(r)||"string"!=typeof e[r]||r in p||(c+=" "+r+'="'+e[r]+'"');return c+=" />",o?'<a href="'+o+'">'+c+"</a>":c}),jSmart.prototype.registerPlugin("function","html_options",function(e,t){var r,a=e.__get("values",e.options),n=e.__get("options",[]),s="options"in e;if(!s)for(r in e.output)n.push(e.output[r]);var i=e.__get("selected",!1),o=[],p="",c=0;for(r in a)a.hasOwnProperty(r)&&(p='<option value="'+(s?r:a[r])+'"',i==(s?r:a[r])&&(p+=' selected="selected"'),p+=">"+n[s?r:c++]+"</option>",o.push(p));var l=e.__get("name",!1);return(l?'<select name="'+l+'">\n'+o.join("\n")+"\n</select>":o.join("\n"))+"\n"}),jSmart.prototype.registerPlugin("function","html_radios",function(e,t){return e.type="radio",plugins.html_checkboxes.process(e,t)}),jSmart.prototype.registerPlugin("function","html_select_date",function(e,t){for(var e=e.__get("prefix","Date_"),r=["January","February","March","April","May","June","July","August","September","October","November","December"],a="",n=(a+='<select name="'+e+'Month">\n',0),n=0;n<r.length;++n)a+='<option value="'+n+'">'+r[n]+"</option>\n";for(a=a+"</select>\n"+('<select name="'+e+'Day">\n'),n=0;n<31;++n)a+='<option value="'+n+'">'+n+"</option>\n";return a+="</select>\n"}),jSmart.prototype.registerPlugin("function","html_table",function(e,t){var r,a=[];if(e.loop instanceof Array)a=e.loop;else for(r in e.loop)e.loop.hasOwnProperty(r)&&a.push(e.loop[r]);var n=e.__get("rows",!1),s=(s=e.__get("cols",!1))||(n?Math.ceil(a.length/n):3),i=[];if(isNaN(s)){if("object"==typeof s)for(r in s)s.hasOwnProperty(r)&&i.push(s[r]);else i=s.split(/\s*,\s*/);s=i.length}for(var n=n||Math.ceil(a.length/s),o=e.__get("inner","cols"),p=e.__get("caption",""),c=e.__get("table_attr",'border="1"'),l=e.__get("th_attr",!1),u=(l&&"object"!=typeof l&&(l=[l]),e.__get("tr_attr",!1)),m=(u&&"object"!=typeof u&&(u=[u]),e.__get("td_attr",!1)),g=(m&&"object"!=typeof m&&(m=[m]),e.__get("trailpad","&nbsp;")),f=e.__get("hdir","right"),d=e.__get("vdir","down"),h="",_=0;_<n;++_){h+="<tr"+(u?" "+u[_%u.length]:"")+">\n";for(var y=0;y<s;++y){var b="cols"==o?("down"==d?_:n-1-_)*s+("right"==f?y:s-1-y):("right"==f?y:s-1-y)*n+("down"==d?_:n-1-_);h+="<td"+(m?" "+m[y%m.length]:"")+">"+(b<a.length?a[b]:g)+"</td>\n"}h+="</tr>\n"}var v="";if(i.length){for(var v="\n<thead><tr>",x=0;x<i.length;++x)v+="\n<th"+(l?" "+l[x%l.length]:"")+">"+i["right"==f?x:i.length-1-x]+"</th>";v+="\n</tr></thead>"}return"<table "+c+">"+(p?"\n<caption>"+p+"</caption>":"")+v+"\n<tbody>\n"+h+"</tbody>\n</table>\n"}),jSmart.prototype.registerPlugin("function","include",function(e,t){var r=e.__get("file",null,0),a=obMerge({},t,e),r=process(getTemplate(a.smarty.template=r,[],0<=findInArray(e,"nocache")),a);return"assign"in e?(assignVar(e.assign,r,t),""):r}),jSmart.prototype.registerPlugin("function","include_javascript",function(e,t){var r=e.__get("file",null,0);if(e.__get("once",!0)&&r in scripts)return"";scripts[r]=!0;r=execute(jSmart.prototype.getJavascript(r),{$this:t});return"assign"in e?(assignVar(e.assign,r,t),""):r}),jSmart.prototype.registerPlugin("function","include_php",function(e,t){return plugins.include_javascript.process(e,t)}),jSmart.prototype.registerPlugin("function","insert",function(params,data){var fparams={},nm;for(nm in params)params.hasOwnProperty(nm)&&isNaN(nm)&&params[nm]&&"string"==typeof params[nm]&&"name"!=nm&&"assign"!=nm&&"script"!=nm&&(fparams[nm]=params[nm]);var prefix="insert_",func=("script"in params&&(eval(jSmart.prototype.getJavascript(params.script)),prefix="smarty_insert_"),eval(prefix+params.__get("name",null,0))),s=func(fparams,data);return"assign"in params?(assignVar(params.assign,s,data),""):s}),jSmart.prototype.registerPlugin("block","javascript",function(e,t,r,a){return execute(t,r.$this=r),delete r.$this,""}),jSmart.prototype.registerPlugin("function","config_load",function(e,t){return jSmart.prototype.configLoad(jSmart.prototype.getConfig(e.__get("file",null,0)),e.__get("section","",1),t),""}),jSmart.prototype.registerPlugin("function","mailto",function(e,t){var r=e.__get("address",null),a=e.__get("encode","none"),n=e.__get("text",r),i=jSmart.prototype.PHPJS("rawurlencode","mailto").rawurlencode(e.__get("cc","")).replace("%40","@"),o=jSmart.prototype.PHPJS("rawurlencode","mailto").rawurlencode(e.__get("bcc","")).replace("%40","@"),p=jSmart.prototype.PHPJS("rawurlencode","mailto").rawurlencode(e.__get("followupto","")).replace("%40","@"),c=jSmart.prototype.PHPJS("rawurlencode","mailto").rawurlencode(e.__get("subject","")),l=jSmart.prototype.PHPJS("rawurlencode","mailto").rawurlencode(e.__get("newsgroups","")),e=e.__get("extra","");if(s='<a href="mailto:'+(r=(r=(r+=i?"?cc="+i:"")+(o?(i?"&":"?")+"bcc="+o:"")+(c?(i||o?"&":"?")+"subject="+c:""))+(l?(i||o||c?"&":"?")+"newsgroups="+l:"")+(p?(i||o||c||l?"&":"?")+"followupto="+p:""))+'" '+e+">"+n+"</a>","javascript"==a){s="document.write('"+s+"');";for(var u="",m=0;m<s.length;++m)u+="%"+jSmart.prototype.PHPJS("bin2hex","mailto").bin2hex(s.substr(m,1));return'<script type="text/javascript">eval(unescape(\''+u+"'))<\/script>"}if("javascript_charcode"==a){for(var g=[],m=0;m<s.length;++m)g.push(jSmart.prototype.PHPJS("ord","mailto").ord(s.substr(m,1)));return'<script type="text/javascript" language="javascript">\n\x3c!--\n{document.write(String.fromCharCode('+g.join(",")+"))}\n//--\x3e\n<\/script>\n"}if("hex"!=a)return s;if(r.match(/^.+\?.+$/))throw new Error("mailto: hex encoding does not work with extra attributes. Try javascript.");for(var f="",m=0;m<r.length;++m)r.substr(m,1).match(/\w/)?f+="%"+jSmart.prototype.PHPJS("bin2hex","mailto").bin2hex(r.substr(m,1)):f+=r.substr(m,1);for(var d="",m=0;m<n.length;++m)d+="&#x"+jSmart.prototype.PHPJS("bin2hex","mailto").bin2hex(n.substr(m,1))+";";return'<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;'+f+'" '+e+">"+d+"</a>"}),jSmart.prototype.registerPlugin("function","math",function(params,data){with(Math)with(params)var res=eval(params.__get("equation",null).replace(/pi\(\s*\)/g,"PI"));return"format"in params&&(res=jSmart.prototype.PHPJS("sprintf","math").sprintf(params.format,res)),"assign"in params?(assignVar(params.assign,res,data),""):res}),jSmart.prototype.registerPlugin("block","nocache",function(e,t,r,a){return t}),jSmart.prototype.registerPlugin("block","textformat",function(e,t,r,a){if(!t)return"";for(var n=e.__get("wrap",80),s=e.__get("wrap_char","\n"),i=e.__get("wrap_cut",!1),o=e.__get("indent_char"," "),p=e.__get("indent",0),c=new Array(p+1).join(o),l=e.__get("indent_first",0),u=new Array(l+1).join(o),m=("email"==e.__get("style","")&&(n=72),t.split(/[\r\n]{2}/)),g=0;g<m.length;++g){var f=m[g];f&&(f=f.replace(/^\s+|\s+$/,"").replace(/\s+/g," "),f=modifiers.wordwrap(f=0<l?u+f:f,n-p,s,i),0<p&&(f=f.replace(/^/gm,c)),m[g]=f)}o=m.join(s+s);return"assign"in e?(assignVar(e.assign,o,r),""):o}),jSmart.prototype.registerPlugin("modifier","capitalize",function(e,t){for(var r=new RegExp(t?"[\\W\\d]+":"\\W+"),a=null,n="",a=e.match(r);a;a=e.match(r)){var s=e.slice(0,a.index);s.match(/\d/)?n+=s:n+=s.charAt(0).toUpperCase()+s.slice(1),n+=e.slice(a.index,a.index+a[0].length),e=e.slice(a.index+a[0].length)}return e.match(/\d/)?n+e:n+e.charAt(0).toUpperCase()+e.slice(1)}),jSmart.prototype.registerPlugin("modifier","cat",function(e,t){return e+(t=t||"")}),jSmart.prototype.registerPlugin("modifier","count",function(e,t){if(null==e)return 0;if(e.constructor!==Array&&e.constructor!==Object)return 1;t=Boolean(t);var r,a=0;for(r in e)e.hasOwnProperty(r)&&(a++,t&&e[r]&&(e[r].constructor===Array||e[r].constructor===Object)&&(a+=modifiers.count(e[r],!0)));return a}),jSmart.prototype.registerPlugin("modifier","count_characters",function(e,t){return(t?e:e.replace(/\s/g,"")).length}),jSmart.prototype.registerPlugin("modifier","count_paragraphs",function(e){e=e.match(/\n+/g);return e?e.length+1:1}),jSmart.prototype.registerPlugin("modifier","count_sentences",function(e){e=e.match(/[^\s]\.(?!\w)/g);return e?e.length:0}),jSmart.prototype.registerPlugin("modifier","count_words",function(e){e=e.match(/\w+/g);return e?e.length:0}),jSmart.prototype.registerPlugin("modifier","date_format",function(e,t,r){return jSmart.prototype.PHPJS("strftime","date_format").strftime(t||"%b %e, %Y",jSmart.prototype.makeTimeStamp(e||r))}),jSmart.prototype.registerPlugin("modifier","defaultValue",function(e,t){return null==e||""===e||"array"==typeof e&&0==e.length?null==t||""===t||"array"==typeof t&&0==e.length?"":t.toString():e.toString()}),jSmart.prototype.registerPlugin("modifier","unescape",function(e,t,r){switch(e=new String(e),r=r||"UTF-8",t=t||"html"){case"html":return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#039;/g,"'").replace(/&quot;/g,'"');case"entity":case"htmlall":return jSmart.prototype.PHPJS("html_entity_decode","unescape").html_entity_decode(e,r);case"url":return jSmart.prototype.PHPJS("rawurldecode","unescape").rawurldecode(e)}return e}),jSmart.prototype.registerPlugin("modifier","escape",function(e,t,r,a){switch(e=new String(e),t=t||"html",r=r||"UTF-8",a=void 0===a||Boolean(a),t){case"html":return(e=a?e.replace(/&/g,"&amp;"):e).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;");case"htmlall":return jSmart.prototype.PHPJS("htmlentities","escape").htmlentities(e,3,r);case"url":return jSmart.prototype.PHPJS("rawurlencode","escape").rawurlencode(e);case"urlpathinfo":return jSmart.prototype.PHPJS("rawurlencode","escape").rawurlencode(e).replace(/%2F/g,"/");case"quotes":return e.replace(/(^|[^\\])'/g,"$1\\'");case"hex":for(var n="",s=0;s<e.length;++s)n+="%"+jSmart.prototype.PHPJS("bin2hex","escape").bin2hex(e.substr(s,1));return n;case"hexentity":for(n="",s=0;s<e.length;++s)n+="&#x"+jSmart.prototype.PHPJS("bin2hex","escape").bin2hex(e.substr(s,1)).toUpperCase()+";";return n;case"decentity":for(n="",s=0;s<e.length;++s)n+="&#"+jSmart.prototype.PHPJS("ord","escape").ord(e.substr(s,1))+";";return n;case"mail":return e.replace(/@/g," [AT] ").replace(/[.]/g," [DOT] ");case"nonstd":for(n="",s=0;s<e.length;++s){var i=jSmart.prototype.PHPJS("ord","escape").ord(e.substr(s,1));n+=126<=i?"&#"+i+";":e.substr(s,1)}return n;case"javascript":return e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/<\//g,"</");case"none":return e}return e}),jSmart.prototype.registerPlugin("modifier","indent",function(e,t,r){t=t||4,r=r||" ";for(var a="";t--;)a+=r;var n=e.match(/\n+$/);return a+e.replace(/\n+$/,"").replace(/\n/g,"\n"+a)+(n?n[0]:"")}),jSmart.prototype.registerPlugin("modifier","lower",function(e){return e.toLowerCase()}),jSmart.prototype.registerPlugin("modifier","nl2br",function(e){return e.replace(/\n/g,"<br />\n")}),jSmart.prototype.registerPlugin("modifier","regex_replace",function(e,t,r){t=t.match(/^ *\/(.*)\/(.*) *$/);return new String(e).replace(new RegExp(t[1],"g"+(1<t.length?t[2]:"")),r)}),jSmart.prototype.registerPlugin("modifier","replace",function(e,t,r){if(!t)return e;e=new String(e),t=new String(t),r=new String(r);for(var a="",n=-1,n=e.indexOf(t);0<=n;n=e.indexOf(t))a+=e.slice(0,n)+r,n+=t.length,e=e.slice(n);return a+e}),jSmart.prototype.registerPlugin("modifier","spacify",function(e,t){return e.replace(/(\n|.)(?!$)/g,"$1"+(t=t||" "))}),jSmart.prototype.registerPlugin("modifier","noprint",function(e){return""}),jSmart.prototype.registerPlugin("modifier","string_format",function(e,t){return jSmart.prototype.PHPJS("sprintf","string_format").sprintf(t,e)}),jSmart.prototype.registerPlugin("modifier","strip",function(e,t){return t=t||" ",new String(e).replace(/[\s]+/g,t)}),jSmart.prototype.registerPlugin("modifier","strip_tags",function(e,t){return t=null==t||t,new String(e).replace(/<[^>]*?>/g,t?" ":"")}),jSmart.prototype.registerPlugin("modifier","truncate",function(e,t,r,a,n){return r=null!=r?r:"...",e.length<=(t=t||80)?e:(t-=Math.min(t,r.length),n?e.slice(0,Math.floor(t/2))+r+e.slice(e.length-Math.floor(t/2)):(e=a?e:e.slice(0,t+1).replace(/\s+?(\S+)?$/,"")).slice(0,t)+r)}),jSmart.prototype.registerPlugin("modifier","upper",function(e){return e.toUpperCase()}),jSmart.prototype.registerPlugin("modifier","wordwrap",function(e,t,r,a){t=t||80,r=r||"\n";for(var n=e.split("\n"),s=0;s<n.length;++s){for(var i=n[s],o="";i.length>t;){for(var p=0,c=i.slice(p).match(/\s+/);c&&p+c.index<=t;c=i.slice(p).match(/\s+/))p+=c.index+c[0].length;p=p||(a?t:c?c.index+c[0].length:i.length),o+=i.slice(0,p).replace(/\s+$/,""),p<i.length&&(o+=r),i=i.slice(p)}n[s]=o+i}return n.join("\n")}),String.prototype.fetch=function(e){return new jSmart(this).fetch(e)},jSmart.prototype.PHPJS=PHP_JS,jSmart.prototype.baiekDebug=jSmart.prototype.baiekDebug||function(e){if(!jSmart.prototype.debugging)return!1;switch(e=e||""){case"modifier":console&&console.log(modifiers);break;case"function":case"block":case"":case"all":var t,r={},a={};for(t in plugins)"function"===plugins[t].type?r[t]=plugins[t].process:"block"===plugins[t].type&&(a[t]=plugins[t].process);""===e||"all"===e?console&&console.log({modifiers:modifiers,functions:r,blocks:a}):"function"===e?console&&console.log(r):"block"===e&&console&&console.log(a);break;default:console&&console.error("jsmart的baikeDebug参数：[modifier|function|block|all]")}},{"https://baike.baidu.com":"https://baike.baidu.com","https://wapbaike.baidu.com":"https://wapbaike.baidu.com","https://bkssl.bdimg.com":"https://bkssl.bdimg.com","https://baikebcs.bdimg.com":"https://baikebcs.bdimg.com","https://imgsa.baidu.com":"https://imgsa.baidu.com","https://imgsa.baidu.com":"https://imgsa.baidu.com","https://imgsa.baidu.com":"https://imgsa.baidu.com","https://imgsa.baidu.com":"https://imgsa.baidu.com","https://imgsa.baidu.com":"https://imgsa.baidu.com","https://imgsa.baidu.com":"https://imgsa.baidu.com","https://imgsa.baidu.com":"https://imgsa.baidu.com","https://imgsa.baidu.com":"https://imgsa.baidu.com","https://imgsa.baidu.com":"https://imgsa.baidu.com","https://imgsa.baidu.com":"https://imgsa.baidu.com","https://m.baidu.com":"https://m.baidu.com","https://drm.media.baidubce.com":"https://drm.media.baidubce.com","https://baikebcs.bdimg.com":"https://baikebcs.bdimg.com","https://passport.baidu.com":"https://passport.baidu.com","https://wappass.baidu.com":"https://wappass.baidu.com","https://bkimg.cdn.bcebos.com":"https://bkimg.cdn.bcebos.com","https://jsapi.qq.com":"https://jsapi.qq.com","https://img.baidu.com":"https://img.baidu.com","https://himg.baidu.com":"https://himg.baidu.com","https://himg.bdimg.com":"https://himg.bdimg.com","https://tts.baidu.com":"https://tts.baidu.com","https://gss0.baidu.com/yrwHcj7d1QgTmNK7m9_UKT6zgBYnreHg-_":"https://gss0.baidu.com/yrwHcj7d1QgTmNK7m9_UKT6zgBYnreHg-_","https://nssug.baidu.com":"https://nssug.baidu.com","https://msg.baidu.com":"https://msg.baidu.com","https://gsp0.baidu.com/5aAHeD3nKhI2p27j8IqW0jdnxx1xbK":"https://gsp0.baidu.com/5aAHeD3nKhI2p27j8IqW0jdnxx1xbK"});jSmart.prototype.registerPlugin("modifier","wiki_common_https_trans",function(e){if(e&&"undefined"!==e&&"https:"===window.location.protocol)if(-1===e.indexOf("https://timg01.bdimg.com"))e=e.replace(/http:\/\/[^\/]+/,function(e,t,r){return httpsTransMap[e]||e});else try{var n,s,i,o;e.split("?")[1].split("#")[0].split("&").forEach(function(e){var t=e.split("=");if(t[1])switch(t[0]){case"src":n=t[1];break;case"size":switch(t[1][0]){case"b":var r=t[1].slice(1).split("_");s=r[0],i=r[1];break;case"w":s=t[1].slice(1);break;case"h":i=t[1].slice(1)}break;case"crop":var a=t[1].split(",");o="/crop"+(a[0]?",x_"+a[0]:"")+(a[1]?",y_"+a[1]:"")+(a[2]<=4096?",w_"+a[2]:"")+(a[3]<=4096?",h_"+a[3]:"")}}),n+="?x-bce-process=image",(s||i)&&(n+="/resize,m_lfit"+(s?",w_"+s:"")+(i?",h_"+i:"")),e=n+=(o||"")+"/quality,Q_90"}catch(e){}return e}),void 0!==module&&module.exports?module.exports=jSmart:window.jSmart=jSmart});