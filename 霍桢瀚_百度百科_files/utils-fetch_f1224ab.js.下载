;/*!wiki-common:packages/utils/fetch.js*/
define("wiki-common:packages/utils/fetch",function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.fetch=function(){return i.fetch.apply(i,arguments)},t.get=function(){return i.get.apply(i,arguments)},t.post=function(){return i.post.apply(i,arguments)};var s=a(e("wiki-common:node_modules/axios/index")),u=a(e("wiki-common:node_modules/qs/index")),l=e("wiki-common:packages/utils/obj");function a(e){return e&&e.__esModule?e:{default:e}}function o(t,e){var r,a=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)),a}function c(a){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){var t,r;t=a,r=n[e=e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(n,e))})}return a}function n(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var e=function(){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this,r=a;if(!(t instanceof r))throw new TypeError("Cannot call a class as a function");this.errorMap=e.errorMap||{},this.errorNumberKey=e.errorNumberKey||"",this.defaultParams=e.defaultParams||{},this.defaultUrlParams=e.defaultUrlParams||{},this.resFilter=e.resFilter}var e,t,r;return e=a,(t=[{key:"fetch",value:function(){var t,e,n=this,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=o.resFilter||this.resFilter;return delete o.resFilter,"get"===o.method.toLowerCase()?o.params=c(c({},this.defaultParams),o.params):o.data=c(c({},this.defaultParams),o.data),this.defaultUrlParams&&Object.keys(this.defaultUrlParams).length&&(t=[],Object.keys(this.defaultUrlParams).map(function(e){t.push("".concat(e,"=").concat(n.defaultUrlParams[e]))}),e=t.join("&"),o.url+=(0<o.url.indexOf("?")?"&":"?").concat(e)),"form"===o.postType&&"post"===o.method.toLowerCase()&&(o.data=u.default.stringify(o.data),o.headers=o.headers||{},o.headers["Content-Type"]="application/x-www-form-urlencoded"),new Promise(function(r,a){(0,s.default)(o).then(function(e){if(200<=e.status&&e.status<300&&e.data){var t=(0,l.get)(e.data,n.errorNumberKey);if(n.errorNumberKey&&t)return(0,l.isFunction)(n.errorMap[t])?(t=n.errorMap[t](e.data),void a(t)):void a(e.data);(0,l.isFunction)(i)?Promise.resolve(i(e.data)).then(function(e){r(e)}):r(e.data)}else a({statusText:e.statusText,status:e.status})}).catch(function(e){a(e)})})}},{key:"get",value:function(){return this.fetch(c({method:"get",url:0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",params:1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}))}},{key:"post",value:function(){return this.fetch(c({method:"post",url:0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",data:1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}))}}])&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(),i=new(t.default=e)({errorNumberKey:"errno"})});