;/*!wiki-common:widget/ui/bubble/bubble.js*/
define("wiki-common:widget/ui/bubble/bubble",function(t,i,e){var r=t("wiki-common:widget/lib/jquery/jquery"),o=t("wiki-common:widget/util/safeCall");function s(t){var i=r.extend("http://www.w3.org/2000/svg"==this.host[0].namespaceURI?this.host[0].getBBox():{width:this.host.outerWidth(),height:this.host.outerHeight()},this.host.offset()),e=r(document),o=r(window);r.extend(i,{viewTop:i.top-e.scrollTop(),viewRight:o.width()-(i.left-e.scrollLeft()+i.width),viewBottom:o.height()-(i.top-e.scrollTop()+i.height),viewLeft:i.left-e.scrollLeft()});var s=this.node.outerWidth(),h=this.node.outerHeight(),e=[o.width()*i.viewTop,o.height()*i.viewRight,o.width()*i.viewBottom,o.height()*i.viewLeft],o=[e[1],e[3]],n=[e[0],e[2]],l=(~this.pos.indexOf("auto")?this.pos="auto-"+["top","right","bottom","left"][r(e).index(Math.max.apply(null,e))]:~this.pos.indexOf("hor")?this.pos="hor-"+["right","left"][r(o).index(Math.max.apply(null,o))]:~this.pos.indexOf("ver")&&(this.pos="ver-"+["top","bottom"][r(n).index(Math.max.apply(null,n))]),{}),a="SLIDE"==this.animation,e=this.pos.replace(/(?:auto|ver|hor)-/,""),o="pos_"+(e||"bottom");switch(e){case"top":this.aniSlide={direction:"top",len:a?-20:0},l.top=i.top-h-this.marginFromHost+(t?0:this.aniSlide.len);break;case"right":this.aniSlide={direction:"left",len:a?20:0},l.left=i.left+i.width+this.marginFromHost+(t?0:this.aniSlide.len);break;case"left":this.aniSlide={direction:"left",len:a?-20:0},l.left=i.left-s-this.marginFromHost+(t?0:this.aniSlide.len);break;default:this.aniSlide={direction:"top",len:a?20:0},l.top=i.top+i.height+this.marginFromHost+(t?0:this.aniSlide.len)}~this.align.indexOf("auto")&&(this.align="auto-",/top|bottom/.test(this.pos)?this.align+=i.viewLeft*i.viewRight<0?i.viewLeft<i.viewRight?"right":"left":0<((i.width-s)/2+i.viewLeft)*((i.width-s)/2+i.viewRight)?"center":i.viewLeft>i.viewRight?"right":"left":this.align+=i.viewTop*i.viewBottom<0?i.viewTop<i.viewBottom?"bottom":"top":0<((i.height-h)/2+i.viewTop)*((i.height-h)/2+i.viewBottom)?"center":i.viewTop>i.viewBottom?"bottom":"top");n=this.align.replace(/auto-/,"");switch(o+=" align_"+(n||"center"),n){case"top":l.top=i.top;break;case"right":l.left=i.left+i.width-s;break;case"bottom":l.top=i.top+i.height-h;break;case"left":l.left=i.left;break;default:isNaN(parseInt(l.left))?l.left=i.left+(i.width-s)/2:l.top=i.top+(i.height-h)/2}this.node.css({top:l.top+this.offset.top,left:l.left+this.offset.left}).removeClass("pos_top pos_right pos_bottom pos_left align_top align_right align_bottom align_left align_center").addClass(o)}function h(t){!function(t){if(!t)throw new Error("[Bubble Exception]: No arguments.");if(!r(t.host).length)throw new Error('[Bubble Exception]: Invalid argument "host".');this.host=r(t.host),this.extClassNames=t.classNames||"",this.showTail="boolean"==r.type(t.showTail)&&t.showTail,this.marginFromHost=isNaN(parseInt(t.marginFromHost))?this.showTail?10:0:parseInt(t.marginFromHost),this.offset=r.extend({top:0,left:0},this.marginFromHost?null:t.offset),this.hideWhenBlur="boolean"!=r.type(t.hideWhenBlur)||t.hideWhenBlur,this.animation=/^FADE|SLIDE$/i.test(t.animation)?t.animation:"",this.hideAfterDelay=parseInt(t.hideAfterDelay)?parseInt(t.hideAfterDelay)+(this.animation?200:0):0,this.content=t.content||"",this.onShow="function"==r.type(t.onShow)?t.onShow:null,this.onHide="function"==r.type(t.onHide)?t.onHide:null,this.isVisible=!1,this.blurProtect=[this.host[0]],t.blurProtect&&(t.blurProtect=[].concat(t.blurProtect),e=this,r(t.blurProtect).each(function(t,i){i=r(i);i.length&&i[0]!=e.host[0]&&!r.contains(e.host[0],i[0])&&e.blurProtect.push(i[0])}));var e,t=t.pos&&t.pos.match(/^auto|(?:(top|right|bottom|left|hor|ver)(?:[- |]?(top|right|bottom|left|center|auto))?)$/i);this.pos=t?(t[1]||t[0]).toLowerCase():"auto",this.align="auto"==this.pos?"auto":t&&t[2]&&t[2]!=t[1]?t[2].toLowerCase():/ver|hor/.test(this.pos)?"auto":"center","hor"==this.pos&&(this.align=/^top|center|bottom|auto$/.test(this.align)?RegExp.$_:"auto"),"ver"==this.pos&&(this.align=/^left|center|right|auto$/.test(this.align)?RegExp.$_:"auto")}.call(this,t),this.node=r('<div class="wgt_bubble"></div>').append(this.content).append(this.showTail?'<em class="tail"></em>':"").addClass(this.extClassNames).appendTo(r("body")).hide(),this.blurProtect.push(this.node[0]);var i=this;this.hideWhenBlur&&r("body").on("click.bubble",function(e){var o=!1;r.each(i.blurProtect,function(t,i){try{if(e.target==i||r.contains(i,e.target))return!(o=!0)}catch(t){}}),o||i.hide()}),r(window).on("resize.bubble",function(){i.resetPos()}).on("scroll.bubble",function(){i.resetPos()})}h.prototype={constructor:h,setHost:function(t){if(r(t).length)return this.blurProtect.splice(r.inArray(this.host[0],this.blurProtect),1),this.host=r(t),this.blurProtect.push(this.host[0]),this},setContent:function(t){return this.content=t,this.node.empty().append(this.content),this.showTail&&this.node.append('<em class="tail"></em>'),this},resetPos:function(){return this.isVisible&&s.call(this,!0),this},getNode:function(){return this.node},show:function(t){var i,e;if(!this.isVisible)return(i=this).isVisible=!0,this.node.show(),s.call(i),i.animation?((e={opacity:1})[i.aniSlide.direction]="-="+i.aniSlide.len,i.node.css("opacity",0).animate(e,{duration:200,queue:!1,complete:function(){i.node.show(),o(t,null,i),o(i.onShow,null,i)}})):(o(t,null,i),o(i.onShow,null,i)),clearTimeout(i.hideDelayTimer),i.hideAfterDelay&&(i.hideDelayTimer=setTimeout(function(){i.hide()},i.hideAfterDelay)),this;s.call(this,!0)},hide:function(t){var i,e;if(this.isVisible)return(i=this).isVisible=!1,this.animation?((e={opacity:0})[this.aniSlide.direction]="+="+this.aniSlide.len,this.node.animate(e,{duration:200,queue:!1,complete:function(){i.node.hide(),o(t,null,i),o(i.onHide,null,i)}})):(this.node.hide(),o(t,null,i),o(this.onHide,null,i)),this}},e.exports=h});
;/*!wiki-common:widget/ui/carousel/aniTypes/aniType_dissolve.js*/
define("wiki-common:widget/ui/carousel/aniTypes/aniType_dissolve",function(i,n,t){var e=i("wiki-common:widget/lib/jquery/jquery"),a=i("wiki-common:widget/util/safeCall"),r=i("wiki-common:widget/util/animation"),s=i("wiki-common:widget/util/checkCSS"),o=i("wiki-common:widget/util/addStyleSheet"),c={top:"bottom",right:"left",bottom:"top",left:"right"};t.exports={name:"dissolve",requiredCSS:["transform","transition","background-size"],checkAniConfig:function(){var i,n,t=(this.aniConfig.direction+"").match(/^(top|right|bottom|left)(?:[- |]?(top|right|bottom|left))?$/i);t?(i=[t[1].toLowerCase()],n=[c[i]],t[2]&&(t[2]=t[2].toLowerCase(),t[2]!=i[1]&&t[2]!=c[t[1]]&&(i.push(t[2]),n.push(c[t[2]]))),this.aniConfig.direction=i.sort().join(" "),this.aniConfig.reverseDirection=n.sort().join(" ")):(this.aniConfig.direction="random",this.aniConfig.reverseDirection="random"),this.aniConfig.dissolveDuration=Math.min(isNaN(parseInt(this.aniConfig.dissolveDuration))?500:Math.abs(parseInt(this.aniConfig.dissolveDuration)),this.autoPlayInterval),this.aniConfig.resolutionX=isNaN(parseInt(this.aniConfig.resolutionX))?10:Math.min(Math.max(parseInt(this.aniConfig.resolutionX),1),this.aniUnitSize.width),this.aniConfig.resolutionY=isNaN(parseInt(this.aniConfig.resolutionY))?10:Math.min(Math.max(parseInt(this.aniConfig.resolutionY),1),this.aniUnitSize.height),this.aniConfig.cssTransform=s("transform")},init:function(){var i={position:"absolute",width:this.aniUnitSize.width/this.aniConfig.resolutionX+"px",height:this.aniUnitSize.height/this.aniConfig.resolutionY+"px"};i[s("background-size")]=this.aniUnitSize.width+"px "+this.aniUnitSize.height+"px",i[s("transition")]=this.aniConfig.dissolveDuration-("random"==this.aniConfig.direction?200:0)+"ms ease-in",o({".wgt_carousel_aniUnit .img-slice":i}),e.each(this.aniUnits,function(i,n){e(n).css({position:"absolute",left:"0",top:"0"})}),/^relative|absolute|fixed$/.test(this.container.css("position"))||this.container.css("position","relative"),this.imgSlices={},this.imgSlices[this.aniConfig.direction]=[],this.imgSlices[this.aniConfig.reverseDirection]=[],this.container.empty().append(e(this.aniUnits[this.ani.curIndex||0]).clone())},playAni:function(t){var o=this,i=e("img",this.ani.prevAniUnit),n="",s=(i.length?n=i[0].src:(s=this.ani.prevAniUnit.css("background-image").match(/url\(['"]?(.+)['"]?\)/))&&(n=s[1]),this.ani.curDirection=!this.aniConfig.autoReverse||this.ani.curTick<this.ani.targetTick?this.aniConfig.direction:this.aniConfig.reverseDirection,this.imgSlices[this.ani.curDirection][this.ani.curIndex]||(s=this.sliceImg(this.aniConfig.resolutionX,this.aniConfig.resolutionY,this.ani.curDirection),e(s.slices).each(function(){e(this).css("background-image","url("+n+")")}),this.imgSlices[this.ani.curDirection][this.ani.curIndex]=s),this.ani.imgSliceGroups=this.imgSlices[this.ani.curDirection][this.ani.curIndex].sliceGroups,this.ani.prevAniUnit.clone().empty().append(this.imgSlices[this.ani.curDirection][this.ani.curIndex].slices));i.length||s.css("background-image",""),this.container.prepend(e(this.aniUnits[this.ani.targetIndex]).clone()),this.ani.prevAniUnit.replaceWith(s),this.ani.prevAniUnit=s,this.ani.lastDissolvedSliceGroupIndex=0,this.ani.engine?this.ani.engine.resume():this.ani.engine=r({duration:this.aniConfig.duration,easing:this.aniConfig.easing,onStart:function(){a(t.onStart,null,o)},onStep:function(i){var n=Math.min(Math.floor(1.1*i*o.ani.imgSliceGroups.length),o.ani.imgSliceGroups.length);if("random"==o.aniConfig.direction)for(var t=o.ani.lastDissolvedSliceGroupIndex;t<n;++t)o.ani.imgSliceGroups[t].css(o.aniConfig.cssTransform,"scale(0.5)").css("opacity","0");else for(t=o.ani.lastDissolvedSliceGroupIndex;t<n;++t)for(var s=0;s<o.ani.imgSliceGroups[t].length;++s)o.ani.imgSliceGroups[t][s].css(o.aniConfig.cssTransform,"scale(0.5)").css("opacity","0");o.ani.lastDissolvedSliceGroupIndex=n},onComplete:function(){setTimeout(function(){if("random"==o.aniConfig.direction)for(var i=0;i<o.ani.imgSliceGroups.length;++i)o.ani.imgSliceGroups[i].css(o.aniConfig.cssTransform,"").css("opacity","");else for(i=0;i<o.ani.imgSliceGroups.length;++i)for(var n=0;n<o.ani.imgSliceGroups[i].length;++n)o.ani.imgSliceGroups[i][n].css(o.aniConfig.cssTransform,"").css("opacity","");a(t.onComplete,null,o)},o.aniConfig.dissolveDuration)}})}}});
;/*!wiki-common:widget/ui/carousel/aniTypes/aniType_fade.js*/
define("wiki-common:widget/ui/carousel/aniTypes/aniType_fade",function(i,n,t){var e=i("wiki-common:widget/lib/jquery/jquery"),a=i("wiki-common:widget/util/safeCall"),o=i("wiki-common:widget/util/animation");t.exports={name:"fade",init:function(){e.each(this.aniUnits,function(i,n){e(n).css({position:"absolute",left:"0",top:"0"})}),/^relative|absolute|fixed$/.test(this.container.css("position"))||this.container.css("position","relative"),this.container.empty().append(e(this.aniUnits[this.ani.curIndex||0]))},playAni:function(i){var n=this;this.container.prepend(this.aniUnits[this.ani.targetIndex]),this.ani.engine?this.ani.engine.resume():this.ani.engine=o({duration:this.aniConfig.duration,easing:this.aniConfig.easing,onStart:function(){a(i.onStart,null,n)},onStep:function(i){n.ani.prevAniUnit.css("opacity",1-i)},onComplete:function(){n.ani.prevAniUnit.css("opacity",""),a(i.onComplete,null,n)}})}}});
;/*!wiki-common:widget/ui/carousel/aniTypes/aniType_ripple.js*/
define("wiki-common:widget/ui/carousel/aniTypes/aniType_ripple",function(i,n,t){var e=i("wiki-common:widget/lib/jquery/jquery"),a=i("wiki-common:widget/util/safeCall"),s=i("wiki-common:widget/util/animation"),o=i("wiki-common:widget/util/checkCSS"),r={top:"bottom",right:"left",bottom:"top",left:"right"};t.exports={name:"ripple",requiredCSS:["mask-image"],checkAniConfig:function(){var i=(this.aniConfig.rippleCenter+"").match(/^(top|right|bottom|left|center)(?:[- |]?(top|right|bottom|left|center))?$/i);i?(this.aniConfig.rippleCenter=i[1].toLowerCase(),i[2]&&(i[2]=i[2].toLowerCase(),("center"==i[2]||i[2]!=i[1]&&i[2]!=r[i[1]])&&(this.aniConfig.rippleCenter+=" "+i[2]))):this.aniConfig.rippleCenter="center center",this.aniConfig.direction=/^shrink|expand$/.test(this.aniConfig.direction)?RegExp.$_.toLowerCase():"expand",this.aniConfig.cssMaskImage=o("maskImage");try{this.aniConfig.cssMaskImage.match(/(webkit|moz)/)?this.aniConfig.cssGradient="-"+this.aniConfig.cssMaskImage.match(/(webkit|moz)/)[1]+"-radial-gradient":this.aniConfig.cssGradient="-radial-gradient"}catch(i){}},init:function(){e.each(this.aniUnits,function(i,n){e(n).css({position:"absolute",left:"0",top:"0"})}),/^relative|absolute|fixed$/.test(this.container.css("position"))||this.container.css("position","relative"),this.container.empty().append(e(this.aniUnits[this.ani.curIndex||0]))},playAni:function(i){var t=this;this.container.prepend(this.aniUnits[this.ani.targetIndex]),this.ani.shouldReverse=!!("expand"==this.aniConfig.direction^(!this.aniConfig.autoReverse||this.ani.curTick<this.ani.targetTick)),this.ani.engine?this.ani.engine.resume():this.ani.engine=s({duration:this.aniConfig.duration,easing:this.aniConfig.easing,onStart:function(){a(i.onStart,null,t)},onStep:function(i){var n;t.ani.shouldReverse?t.ani.prevAniUnit.css(t.aniConfig.cssMaskImage,t.aniConfig.cssGradient+"("+t.aniConfig.rippleCenter+",circle, black "+(n=100*(1-2*i))+"%, rgba(0,0,0,0.3) "+(n+30)+"%, transparent "+(n+55)+"%, rgba(0,0,0,0.15) "+(n+75)+"%, transparent "+(n+90)+"%, transparent "+(n+100)+"%)"):t.ani.prevAniUnit.css(t.aniConfig.cssMaskImage,t.aniConfig.cssGradient+"("+t.aniConfig.rippleCenter+",circle, transparent "+(n=100*(2*i-1))+"%, rgba(0,0,0,0.15) "+(n+10)+"%, transparent "+(n+25)+"%, rgba(0,0,0,0.3) "+(n+45)+"%, transparent "+(n+70)+"%, black "+(n+100)+"%)")},onComplete:function(){t.ani.prevAniUnit.css(o("maskImage"),""),a(i.onComplete,null,t)}})}}});
;/*!wiki-common:widget/ui/carousel/aniTypes/aniType_scale.js*/
define("wiki-common:widget/ui/carousel/aniTypes/aniType_scale",function(i,n,t){var s=i("wiki-common:widget/lib/jquery/jquery"),e=i("wiki-common:widget/util/safeCall"),a=i("wiki-common:widget/util/animation"),o=i("wiki-common:widget/util/checkCSS");t.exports={name:"scale",requiredCSS:["transform"],checkAniConfig:function(){this.aniConfig.scaleMode=/^(?:expand|shrink)$/i.test(this.aniConfig.scaleMode)?RegExp.$_.toLowerCase():"expand",this.aniConfig.cssTransform=o("transform")},init:function(){s.each(this.aniUnits,function(i,n){s(n).css({position:"absolute",left:"0",top:"0"})}),/^relative|absolute|fixed$/.test(this.container.css("position"))||this.container.css("position","relative"),this.container.empty().append(s(this.aniUnits[this.ani.curIndex||0]))},playAni:function(i){var n=this;this.ani.targetAniUnit=s(this.aniUnits[this.ani.targetIndex]),this.ani.shouldReverse=!!("expand"==this.aniConfig.scaleMode^(!this.aniConfig.autoReverse||this.ani.curTick<this.ani.targetTick)),this.container[this.ani.shouldReverse?"prepend":"append"].call(this.container,this.ani.targetAniUnit),this.ani.engine?this.ani.engine.resume():this.ani.engine=a({duration:this.aniConfig.duration,easing:this.aniConfig.easing,onStart:function(){e(i.onStart,null,n)},onStep:function(i){n.ani.prevAniUnit.css("opacity",1-.5*i).css(n.aniConfig.cssTransform,"scale("+(n.ani.shouldReverse?1-i:9*i+1)+")"),n.ani.targetAniUnit.css("opacity",.5*i+.5).css(n.aniConfig.cssTransform,"scale("+(n.ani.shouldReverse?10-9*i:i)+")")},onComplete:function(){n.ani.prevAniUnit.css("opacity","").css(n.aniConfig.cssTransform,""),n.ani.targetAniUnit.css("opacity","").css(n.aniConfig.cssTransform,""),e(i.onComplete,null,n)}})}}});
;/*!wiki-common:widget/ui/carousel/aniTypes/aniType_slide.js*/
define("wiki-common:widget/ui/carousel/aniTypes/aniType_slide",function(i,t,n){var e=i("wiki-common:widget/lib/jquery/jquery"),s=i("wiki-common:widget/util/safeCall"),o=i("wiki-common:widget/util/animation");n.exports={name:"slide",checkAniConfig:function(){this.aniConfig.direction=/^(?:top|right|bottom|left)$/i.test(this.aniConfig.direction)?RegExp.$_.toLowerCase():"left",this.aniConfig.isPositive=/^(?:left|top)$/.test(this.aniConfig.direction),this.aniConfig.isVertical=/^(?:top|bottom)$/.test(this.aniConfig.direction)},init:function(){e.each(this.aniUnits,function(i,t){e(t).css({float:"left",position:""})}),this.container.css("position","absolute").css(this.aniConfig.isVertical?{width:this.aniUnitSize.width+"px",height:2*this.aniUnitSize.height+"px",top:"",left:""}:{width:2*this.aniUnitSize.width+"px",height:this.aniUnitSize.height+"px",top:"",left:""}).empty().append(e(this.aniUnits[this.ani.curIndex||0]))},playAni:function(i){var t=this;this.ani.shouldPrependAniUnit=!!(this.aniConfig.isPositive^(!this.aniConfig.autoReverse||this.ani.curTick<this.ani.targetTick)),this.ani.shouldPrependAniUnit&&this.container.css(this.aniConfig.isVertical?{top:"-"+this.aniUnitSize.height+"px"}:{left:"-"+this.aniUnitSize.width+"px"}),this.container[this.ani.shouldPrependAniUnit?"prepend":"append"].call(this.container,this.aniUnits[this.ani.targetIndex]),this.ani.engine?this.ani.engine.resume():this.ani.engine=o({duration:this.aniConfig.duration,easing:this.aniConfig.easing,onStart:function(){s(i.onStart,null,t)},onStep:function(i){t.container.css(t.aniConfig.isVertical?"top":"left",(t.ani.shouldPrependAniUnit?i-1:-i)*(t.aniConfig.isVertical?t.aniUnitSize.height:t.aniUnitSize.width)+"px")},onComplete:function(){t.container.css(t.aniConfig.isVertical?"top":"left","0"),s(i.onComplete,null,t)}})}}});
;/*!wiki-common:widget/ui/carousel/aniTypes/aniType_wipe.js*/
define("wiki-common:widget/ui/carousel/aniTypes/aniType_wipe",function(i,n,t){var e=i("wiki-common:widget/lib/jquery/jquery"),a=i("wiki-common:widget/util/safeCall"),o=i("wiki-common:widget/util/animation"),s=i("wiki-common:widget/util/checkCSS"),r={top:"bottom",right:"left",bottom:"top",left:"right"},c={deg:360,grad:400,rad:2*Math.PI,turn:1};t.exports={name:"wipe",requiredCSS:["mask-image"],checkAniConfig:function(){var i,n,t=(this.aniConfig.direction+"").match(/^(top|right|bottom|left)(?:[- |]?(top|right|bottom|left))?|(([+-]?\d+(?:\.\d*)?)(deg|grad|turn|rad))$/i);t?t[3]?(i=t[5].toLowerCase(),n=Number(t[4]%c[i]),this.aniConfig.direction=n+i,this.aniConfig.reverseDirection=(n+c[i]/2)%c[i]+i):(this.aniConfig.direction=t[1].toLowerCase(),this.aniConfig.reverseDirection=r[this.aniConfig.direction],t[2]&&(t[2]=t[2].toLowerCase(),t[2]!=t[1]&&t[2]!=r[t[1]]&&(this.aniConfig.direction+=" "+t[2],this.aniConfig.reverseDirection+=" "+r[t[2]]))):(this.aniConfig.direction="left",this.aniConfig.reverseDirection="right"),this.aniConfig.feather=isNaN(parseInt(this.aniConfig.feather))?.2:Math.max(Math.min(this.aniConfig.feather,1),0),this.aniConfig.cssMaskImage=s("maskImage");try{this.aniConfig.cssMaskImage.match(/(webkit|moz)/)?this.aniConfig.cssGradient="-"+this.aniConfig.cssMaskImage.match(/(webkit|moz)/)[1]+"-linear-gradient":this.aniConfig.cssGradient="-linear-gradient"}catch(i){}},init:function(){e.each(this.aniUnits,function(i,n){e(n).css({position:"absolute",left:"0",top:"0"})}),/^relative|absolute|fixed$/.test(this.container.css("position"))||this.container.css("position","relative"),this.container.empty().append(e(this.aniUnits[this.ani.curIndex||0]))},playAni:function(i){var n=this;this.container.prepend(this.aniUnits[this.ani.targetIndex]),this.ani.curDirection=!this.aniConfig.autoReverse||this.ani.curTick<this.ani.targetTick?this.aniConfig.direction:this.aniConfig.reverseDirection,this.ani.engine?this.ani.engine.resume():this.ani.engine=o({duration:this.aniConfig.duration,easing:this.aniConfig.easing,onStart:function(){a(i.onStart,null,n)},onStep:function(i){i=i*(n.aniConfig.feather+1)-n.aniConfig.feather;n.ani.prevAniUnit.css(n.aniConfig.cssMaskImage,n.aniConfig.cssGradient+"("+n.ani.curDirection+", transparent "+100*i+"%, black "+100*(i+n.aniConfig.feather)+"%)")},onComplete:function(){n.ani.prevAniUnit.css(s("maskImage"),""),a(i.onComplete,null,n)}})}}});
;/*!wiki-common:widget/ui/carousel/carousel.js*/
define("wiki-common:widget/ui/carousel/carousel",function(i,t,n){var a=i("wiki-common:widget/lib/jquery/jquery"),e=i("wiki-common:widget/util/checkCSS"),s=i("wiki-common:widget/util/safeCall"),r=i("wiki-common:widget/ui/carousel/aniTypes/aniType_slide"),T=i("wiki-common:widget/util/number");function o(i){var t=null!=i&&"object"==a.type(i)&&!a.isEmptyObject(i);if(t&&(t=!i.requiredCSS||"array"==a.type(i.requiredCSS)&&0<i.requiredCSS.length,i.requiredCSS))for(var n=0;t&&n<i.requiredCSS.length;++n)t=!!e(i.requiredCSS[n]);return t}function y(i,t){return a('<div class="img-slice"></div>').css({left:i+"px",top:t+"px","background-position":"-"+i+"px -"+t+"px"})}function u(i,t,n){var e=[],a=[],s=this.aniUnitSize.width/i,r=this.aniUnitSize.height/t;switch(n){case"left":case"right":for(var o=0;o<i;++o){for(var u=[],h=0;h<t;++h){var l=y(o*s,h*r);u.push(l),e.push(l)}a.push(u)}"right"==n&&a.reverse();break;case"top":case"bottom":for(o=0;o<t;++o){for(u=[],h=0;h<i;++h){l=y(h*s,o*r);u.push(l),e.push(l)}a.push(u)}"bottom"==n&&a.reverse();break;case"left top":case"bottom right":for(var o=0,c=i+t-1;o<c;++o){for(var u=[],h=Math.min(0,i),g=Math.min(o,i);h<=g;++h){l=y((o-h)*s,h*r);u.push(l),e.push(l)}a.push(u)}~n.indexOf("bottom")&&a.reverse();break;case"right top":case"bottom left":for(o=1-t;o<i;++o){for(u=[],h=Math.max(0,o),g=Math.min(o+t,i);h<g;++h){l=y(h*s,(h-o)*r);u.push(l),e.push(l)}a.push(u)}~n.indexOf("top")&&a.reverse();break;default:for(var p=T.getSerialNums(i*t);p.length;){var f=p.splice(Math.floor(Math.random()*p.length),1),l=y(f%i*s,Math.floor(f/i)*r);e.push(l),a.push(l)}}return{slices:e,sliceGroups:a}}function h(){var t=null,n=!1,e=this;a(this.pausingTriggers).on("mouseenter.carousel",function(i){t=setTimeout(function(){n=!(!e.autoPlayTimer||!e.autoPlayInterval),t=null,e.stop()},200)}).on("mouseleave.carousel",function(i){!t&&n&&e.autoPlay(),clearTimeout(t),t=null})}function l(i){this.sliceImg=u,function(i){if(!i)throw new Error("[Carousel Exception]: No arguments.");if(!a(i.container).length)throw new Error('[Carousel Exception]: Invalid argument "container".');this.container=a(i.container),this.aniUnits=a(".wgt_carousel_aniUnit",this.container).toArray(),this.aniUnitCount=this.aniUnits.length,this.aniQueue=[],this.aniType=o(i.aniType)?i.aniType:r,this.pausingTriggers=[this.container[0]],i.pausingTriggers&&(i.pausingTriggers=[].concat(i.pausingTriggers),n=this,e=!1,a(i.pausingTriggers).each(function(i,t){t=a(t);t.length&&t[0]!=n.container[0]&&(a.contains(n.container[0],t[0])||a.contains(t[0],n.container[0])?a.contains(t[0],n.container[0])&&(n.pausingTriggers.push(t[0]),e=!0):n.pausingTriggers.push(t[0]))}),e&&n.pausingTriggers.splice(0,1));var n,e,t=a(this.aniUnits[0]);this.aniUnitSize=a.extend({width:t.outerWidth(),height:t.outerHeight()},"object"!=a.type(i.aniUnitSize)||a.isEmptyObject(i.aniUnitSize)?null:i.aniUnitSize),this.autoPlayInterval=isNaN(parseInt(i.autoPlayInterval))?4e3:Math.abs(parseInt(i.autoPlayInterval)),this.autoPlayTimer=null,this.onAniStart="function"==a.type(i.onAniStart)?i.onAniStart:null,this.onAniComplete="function"==a.type(i.onAniComplete)?i.onAniComplete:null,this.aniConfig=a.extend({},i.aniConfig),this.aniConfig.duration=isNaN(parseInt(this.aniConfig.duration))?2e3:Math.abs(parseInt(this.aniConfig.duration)),this.aniConfig.autoReverse="boolean"!=typeof this.aniConfig.autoReverse||this.aniConfig.autoReverse,this.ani={engine:null,curTick:0,targetTick:0,curIndex:0,targetIndex:0,prevAniUnit:null,state:"STOP"},s(this.aniType.checkAniConfig,null,this)}.call(this,i),h.call(this),s(this.aniType.init,null,this),this.autoPlayInterval&&this.autoPlay()}l.prototype={constructor:l,autoPlay:function(){var i=this;this.autoPlayTimer=setTimeout(function(){i.play()},this.autoPlayInterval)},play:function(i){var t=this;!1!==i&&this.aniQueue.push(i),"STOP"==this.ani.state&&(clearTimeout(this.autoPlayTimer),i=this.aniQueue.shift(),i=isNaN(parseInt(i))?this.ani.curTick+1:i<0?this.ani.curTick-1:Math.floor(this.ani.curTick/this.aniUnitCount)*this.aniUnitCount+i%this.aniUnitCount,this.ani.targetTick=i,this.ani.curIndex=(this.ani.curTick%this.aniUnitCount+this.aniUnitCount)%this.aniUnitCount,this.ani.targetIndex=(this.ani.targetTick%this.aniUnitCount+this.aniUnitCount)%this.aniUnitCount,this.ani.curIndex!=this.ani.targetIndex&&(this.ani.prevAniUnit=a(".wgt_carousel_aniUnit",this.container),s(this.aniType.playAni,{onStart:function(){t.ani.state="PLAY",s(t.onAniStart,[t.ani.curIndex,t.ani.targetIndex],t)},onComplete:function(){t.ani.state="STOP",t.ani.curTick=t.ani.targetTick,t.ani.curIndex=t.ani.targetIndex,t.ani.prevAniUnit.remove(),s(t.onAniComplete,t.ani.curIndex,t),t.aniQueue.length?t.play(!1):t.autoPlayTimer&&t.autoPlayInterval&&t.autoPlay()}},this)))},stop:function(t){var n,e=this;clearTimeout(this.autoPlayTimer),this.autoPlayTimer=null,"PLAY"==this.ani.state&&t?(n=this.onAniComplete,this.onAniComplete=function(i){s(n,i,e),s(t,i,e),e.onAniComplete=n,n=null}):s(t,e.ani.curIndex,e)},reset:function(i,t){var n,e=this;i&&(t="boolean"!=typeof t||t,this.aniQueue=[],this.aniType=(o(i.aniType)?i:this).aniType,a.each(this.pausingTriggers,function(i,t){(i=a(i)).length?i.off(".carousel"):e.pausingTriggers.splice(t,1)}),i.pausingTriggers&&(i.pausingTriggers=[].concat(i.pausingTriggers),e=this,n=!1,a(i.pausingTriggers).each(function(i,t){t=a(t);t.length&&t[0]!=e.container[0]&&(a.contains(e.container[0],t[0])||a.contains(t[0],e.container[0])?a.contains(t[0],e.container[0])&&(e.pausingTriggers.push(t[0]),n=!0):e.pausingTriggers.push(t[0]))}),n&&e.pausingTriggers[0]==e.container[0]&&e.pausingTriggers.splice(0,1)),h.call(this),this.autoPlayInterval=isNaN(parseInt(i.autoPlayInterval))?this.autoPlayInterval:Math.abs(parseInt(i.autoPlayInterval)),this.autoPlayTimer=null,this.onAniStart=("function"==a.type(i.onAniStart)?i:this).onAniStart,this.onAniComplete=("function"==a.type(i.onAniComplete)?i:this).onAniComplete,this.aniConfig=a.extend(this.aniConfig,i.aniConfig),this.aniConfig.duration=isNaN(parseInt(this.aniConfig.duration))?2e3:Math.abs(parseInt(this.aniConfig.duration)),this.aniConfig.autoReverse="boolean"!=typeof this.aniConfig.autoReverse||this.aniConfig.autoReverse,this.ani={engine:null,curTick:t?this.ani.curTick:0,targetTick:t?this.ani.targetTick:0,curIndex:t?this.ani.curIndex:0,targetIndex:t?this.ani.targetIndex:0,prevAniUnit:t?this.ani.prevAniUnit:null,state:"STOP"},t=a(this.aniUnits[this.ani.curIndex]),this.aniUnitSize=a.extend({width:t.outerWidth(),height:t.outerHeight()},("object"!=a.type(i.aniUnitSize)||a.isEmptyObject(i.aniUnitSize)?this:i).aniUnitSize),s(this.aniType.checkAniConfig,null,this),s(this.aniType.init,null,this))},destroy:function(){a(this.pausingTriggers).off(".carousel"),this.container.empty().append(this.aniUnits)}},n.exports=l});
;/*!wiki-common:widget/ui/casecadeControl/casecadeControl.js*/
define("wiki-common:widget/ui/casecadeControl/casecadeControl",function(t,e,a){var o=t("wiki-common:widget/lib/jquery/jquery"),i=t("wiki-common:widget/lib/jsmart/jsmart");function n(t){t.data=t.data||[],t.caseNum=t.data.length||2,t.wrapper=o(t.wrapper)||o("#wgt-casecade-control_wrapper"),t.namePrev=t.namePrev||"wgt-casecade-control",t.selectArr=t.selectArr||[],this.opt=t,this.init()}n.prototype.init=function(){this.tpl=new i('<select name="{%$data.name|cat:\'_\'|cat:{%$data.indexNum+1%}%}" id="wgt-control_select_{%$data.indexNum|f_escape_xml%}" \r\nclass="wgt-control_select" data-number="{%$data.indexNum|f_escape_xml%}"\r\n    {%if $data.list|count == 0%}\r\n        disabled="disabled">\n<option value="-1">无选项，不用选</option>\n{%else%}\n><option value="0">请选择</option>\n{%foreach $data.list as $key=>$item%}\n<option value="{%$item|f_escape_xml%}" {%if $data.selectedVal && $data.selectedVal == $item%}selected="selected"{%/if%}>{%$item|f_escape_xml%}</option>\n{%/foreach%}\n{%/if%}\n</select>');for(var t=[this.opt.data[0]],e=1,a=this.opt.caseNum;e<a;e++)t.push([]);this.opt.selectArr&&0<this.opt.selectArr.length&&(t=this.autoSelect()),this.initOption(t,this.opt.selectArr),this.bind()},n.prototype.bind=function(){var i=this,n=this.tpl;this.opt.wrapper.on("change","select",function(t){var e,a;i.opt.caseNum!==o(this).index()+1&&(a=o(this).val(),e=parseInt(o(this).attr("data-number"),10)||0,a=i.opt.data[e+1][a],a=n.fetch({data:{list:a,indexNum:e+1,name:i.opt.namePrev}}),o(this).next("select").replaceWith(a),o(this).next("select").focus().nextAll("select").attr("disabled","disabled").html(""))})},n.prototype.initOption=function(t,e){var a=this.opt.wrapper,i="";e=e||[];for(var n=0,o=(t=t||[]).length;n<o;n++)i+=this.tpl.fetch({data:{list:t[n],indexNum:n,name:this.opt.namePrev,selectedVal:e[n]}});a.html(i)},n.prototype.autoSelect=function(){var t=[],e=this.opt.selectArr,a=this.opt.data;if(e&&0<e.length)for(var i=0,n=a.length;i<n;i++)t[i]=0<i?a[i][e[i-1]]||[]:a[i];return t},n.prototype.rander=function(){},n.prototype.request=function(){},a.exports=n});
;/*!wiki-common:widget/ui/counter/counter.js*/
define("wiki-common:widget/ui/counter/counter",function(t,i,n){var o=t("wiki-common:widget/lib/jquery/jquery"),u=t("wiki-common:widget/util/safeCall"),c=t("wiki-common:widget/util/animation"),h=t("wiki-common:widget/util/number"),l=t("wiki-common:widget/util/checkCSS"),s={INCREASE:{init:function(t){this.container.html(this.numSplit(h.pad(t,this.numLen)))},countUpTo:function(t){var i=this,n=parseInt(t-this.value);n&&c(this.duration,function(t){i.init(parseInt(i.value+n*t))},"linear",function(){i.value=parseInt(t),i.init(i.value),u(i.onCountComplete,null,i)})}},ROLLER:{init:function(t){var s=this,t=this.numSplit(h.pad(Math.abs(t),this.numLen)),e=o('<ul class="wgt_counter_roller cmn-clearfix">');o.each(t.split(""),function(t,i){var n=o("<li>");","===i?n.text(i).addClass("symbol"):n.append('<ol style="top:'+(i-10)*s.numHeight+'px"><li>0</li><li>9</li><li>8</li><li>7</li><li>6</li><li>5</li><li>4</li><li>3</li><li>2</li><li>1</li><li>0</li></ol>'),e.append(n)}),this.rollers=o("ol",e),this.container.empty().append(e)},countUpTo:function(t){if((t=((t=isNaN(Math.abs(parseInt(t)))?this.value:Math.abs(parseInt(t)))+"").substr(-this.numLen))!=this.value){for(var s=[],i=o.map(h.pad(t,this.numLen).split(""),function(t){return parseInt(t)}),e=o.map(h.pad(this.value,this.numLen).split(""),function(t){return parseInt(t)}),n=t-this.value,l=n/Math.abs(n),a=0;a<this.numLen;++a)s[a]=((i[a]-e[a])*l+10)%10*l;var r=this;c(this.duration,function(n){o.each(r.rollers,function(t,i){o(i).css("top",((e[t]+s[t]*n)%10-10)%10*r.numHeight+"px")})},null,function(){r.value=parseInt(t),u(r.onCountComplete,null,r)})}}},CARD:{init:function(t){var t=this.numSplit(h.pad(Math.abs(t),this.numLen)),s=o('<ul class="wgt_counter_card cmn-clearfix">');o.each(t.split(""),function(t,i){var n=o("<li>");","===i?n.text(i).addClass("symbol"):n.append("<ol><li>"+i+"</li><li>"+i+"</li></ol><ol><li>"+i+"</li><li>"+i+"</li></ol>"),s.append(n)}),this.cards=o("ol",s),this.container.empty().append(s)},countUpTo:function(i){if((i=((i=isNaN(Math.abs(parseInt(i)))?this.value:Math.abs(parseInt(i)))+"").substr(-this.numLen))!=this.value){var n=o.map(h.pad(i,this.numLen).split(""),function(t){return parseInt(t)}),s=o.map(h.pad(this.value,this.numLen).split(""),function(t){return parseInt(t)}),e=this;if(i>this.value){for(var t=0;t<this.numLen;++t)o("li:first-child",this.cards[2*t]).text(n[t]),o("li:last-child",this.cards[2*t+1]).text(n[t]);c(this.duration,function(t){for(var i=0;i<e.numLen;++i)n[i]!=s[i]&&(o(e.cards[2*i+1]).css(l("transform"),"rotateX("+-180*t+"deg)"),o("li:last-child",e.cards[2*i]).css("-webkit-filter","brightness("+(100-20*t)+"%)"),o("li:last-child",e.cards[2*i+1]).css("-webkit-filter","brightness("+(20*t+80)+"%)"))},null,function(){for(var t=0;t<e.numLen;++t)o("li:last-child",e.cards[2*t]).text(n[t]).css("-webkit-filter","brightness(100%)"),o("li:first-child",e.cards[2*t+1]).text(n[t]),o(e.cards[2*t+1]).css(l("transform"),"none"),e.value=parseInt(i),u(e.onCountComplete,null,e)})}else for(t=0;t<this.numLen;++t)o("li:first-child",this.cards[2*t+1]).text(n[t]),o(this.cards[2*t+1]).css(l("transform"),"rotateX(-180deg)"),o("li:last-child",this.cards[2*t]).text(n[t]),c(this.duration,function(t){for(var i=0;i<e.numLen;++i)n[i]!=s[i]&&(o(e.cards[2*i+1]).css(l("transform"),"rotateX("+-180*(1-t)+"deg)"),o("li:first-child",e.cards[2*i]).css("-webkit-filter","brightness("+(120-40*t)+"%)"),o("li:last-child",e.cards[2*i]).css("-webkit-filter","brightness("+(40*t+60)+"%)"))},null,function(){for(var t=0;t<e.numLen;++t)o("li:first-child",e.cards[2*t]).text(n[t]).css("-webkit-filter","brightness(100%)"),o("li:last-child",e.cards[2*t+1]).text(n[t]),o(e.cards[2*t+1]).css(l("transform"),"none"),e.value=parseInt(i),u(e.onCountComplete,null,e)})}}}};n.exports=function(t){if(!t)throw new Error("[Counter Exception]: No arguments.");if(!o(t.container).length)throw new Error('[Counter Exception]: Invalid argument "container".');this.container=o(t.container),this.value=parseInt(t.value)||0,this.numStyle=/^ROLLER|CARD$/i.test(t.numStyle)?t.numStyle:"INCREASE",this.numSplit="boolean"!=o.type(t.useSplit)||t.useSplit?h.split:String,this.numLen=parseInt(t.numLen)||(/^ROLLER|CARD$/i.test(this.numStyle)?(this.value+"").length:0),this.numHeight=parseInt(t.numHeight)||0,this.duration=parseInt(t.duration)||500,this.onCountComplete="function"==o.type(t.onCountComplete)?t.onCountComplete:null,this.init=s[this.numStyle].init,this.countUpTo=s[this.numStyle].countUpTo,this.init.call(this,this.value)}});
;/*!wiki-common:widget/ui/datePicker/datePicker.js*/
define("wiki-common:widget/ui/datePicker/datePicker",function(e,t,a){var Y=e("wiki-common:widget/lib/jquery/jquery"),s=e("wiki-common:widget/lib/jsmart/jsmart"),i=e("wiki-common:widget/ui/bubble/bubble"),c=e("wiki-common:widget/util/timeFormater"),C=e("wiki-common:widget/util/checkCSS"),o=e("wiki-common:widget/util/url").queryToJson,M=e("wiki-common:widget/util/safeCall"),l=new s('<div class="wgt_datePicker"><div class="calendar-header"><a href="javascript:;" class="header-switch-reduce{%if $reduceDisabled%} disabled{%/if%}" evt-action="headerSwitch" evt-data="type=DATE&method=REDUCE"><em></em></a><a href="javascript:;" class="header-content{%if $reduceDisabled || $increaseDisabled%} disabled{%/if%}" evt-action="headerContent" evt-data="type=DATE">{%$headerText%}</a><a href="javascript:;" class="header-switch-increase{%if $increaseDisabled%} disabled{%/if%}" evt-action="headerSwitch" evt-data="type=DATE&method=INCREASE"><em></em></a></div><div class="calendar-body"><div class="ani-box">{%$bodyContent%}</div></div><div class="calendar-footer"{%if $isTodayAvailable%} evt-action="pickUp" evt-data="type=TODAY" title="选择今日"{%/if%}><a href="javascript:;"{%if !$isTodayAvailable%} class="disabled"{%/if%}>今日：{%$footerText%}</a></div></div>'),T=new s('<div class="page-block new">{%foreach $yData as $item%}<a href="javascript:;" class="big{%$item.disabled%}{%$item.now%}{%$item.selected%}" evt-action="{%if !$item.disabled%}pickUp{%/if%}" evt-data="type=YEAR&value={%$item.value%}">{%$item.value%}</a>{%/foreach%}</div>'),E=new s('<div class="page-block new">{%foreach $mData as $i => $item%}<a href="javascript:;" class="big{%$item.disabled%}{%$item.now%}{%$item.selected%}" evt-action="{%if !$item.disabled%}pickUp{%/if%}" evt-data="type=MONTH&value={%$i%}">{%$i + 1%}月</a>{%/foreach%}</div>'),h='<div class="page-block new"><div class="week"><week /></div><div class="day">{%foreach $dData as $item%}<a href="javascript:;" class="small{%$item.holiday%}{%$item.disabled%}{%$item.now%}{%$item.selected%}" evt-action="{%if !$item.disabled%}pickUp{%/if%}" evt-data="type=DATE&value={%$item.value%}">{%$item.value%}</a>{%/foreach%}</div></div>';function n(e){e=e||this.selectedDate,this.curYear=e.getFullYear(),this.curMonth=e.getMonth(),this.curDate=e.getDate()}function $(){for(var e=new Date(this.curYear,this.curMonth,1,0,0,0,0),t=(e.getDay()||7)-this.firstDayOfWeek,a=42-t,s=[],i=-t;i<a;++i){var c=new Date(e.getTime()+24*i*3600*1e3),o=c.getMonth()!=e.getMonth()||!1===M(this.onDateCheck,c,this)||!1===M(this.onMonthCheck,[c.getFullYear(),c.getMonth()],this)||!1===M(this.onYearCheck,c.getFullYear(),this);s.push({holiday:c.getDay()%6?"":" holiday",disabled:o?" disabled":"",selected:o||c.getTime()!=this.selectedDate.getTime()?"":" selected",now:c.getTime()==this.today.getTime()?" now":"",value:c.getDate()})}return this._dateTpl.fetch({dData:s})}function r(e,t){var a,s=this.bubble.getNode(),i=Y(".header-content",s),c=Y(".calendar-body .ani-box",s),o=Y(".header-switch-reduce",s),l=Y(".header-switch-increase",s),h=(i.attr("evt-data","type="+e),o.attr("evt-data","type="+e+"&method=REDUCE"),l.attr("evt-data","type="+e+"&method=INCREASE"),Y(".new",c).removeClass("new").addClass("old")),n=h.outerWidth();switch(e){case"YEAR":i.addClass("disabled").html(this.curYear-this.curYear%10+"-"+(this.curYear-this.curYear%10+9)),c.css("left","slideRight"==t?-n:0),a=Y(function(e){for(var t=this.curYear-this.curYear%10,a=[],s=-1;s<=10;++s){var i=(s+1)%11==0||!1===M(this.onYearCheck,t+s,this);a.push({disabled:i?" disabled":"",selected:i||t+s!=(e?this.curYear:this.selectedDate.getFullYear())?"":" selected",now:t+s==this.today.getFullYear()?" now":"",value:t+s})}return T.fetch({yData:a})}.call(this,"shrink"==t)),c[/slideLeft|expand/.test(t)?"append":"prepend"](a);break;case"MONTH":"YEAR"==this.selectRange?(i.addClass("disabled"),o.addClass("disabled"),l.addClass("disabled")):i.removeClass("disabled"),i.html(this.curYear+"年"),c.css("left","slideRight"==t?-n:0),a=Y(function(e){for(var t=[],a=0;a<12;++a){var s=!1===M(this.onMonthCheck,[this.curYear,a],this)||!1===M(this.onYearCheck,this.curYear,this);t.push({disabled:s?" disabled":"",selected:s||(e?a!=this.curMonth:this.curYear!=this.selectedDate.getFullYear()||a!=this.selectedDate.getMonth())?"":" selected",now:this.curYear==this.today.getFullYear()&&a==this.today.getMonth()?" now":""})}return E.fetch({mData:t})}.call(this,"shrink"==t)),c[/slideLeft|expand/.test(t)?"append":"prepend"](a);break;case"DATE":"MONTH"==this.selectRange?(i.addClass("disabled"),o.addClass("disabled"),l.addClass("disabled")):(i.removeClass("disabled"),"YEAR"==this.selectRange&&(o[0==this.curMonth?"addClass":"removeClass"].call(o,"disabled"),l[11==this.curMonth?"addClass":"removeClass"].call(l,"disabled"))),i.html(this.curYear+"年"+(this.curMonth+1)+"月"),c.css("left","slideRight"==t?-n:0),a=Y($.call(this)),c[/slideLeft|expand/.test(t)?"append":"prepend"](a)}switch(t){case"slideRight":c.animate({left:0},300,function(){h.remove()});break;case"slideLeft":c.animate({left:-n},300,function(){h.remove(),c.css("left",0)});break;case"shrink":case"expand":Y(".page-block",c).css({position:"absolute",left:0,top:0});var r=Y("shrink"==t?Y(".big",a)["MONTH"==e?this.curMonth:this.curYear%10+1]:Y(".big",h)["MONTH"==e?this.curYear%10+1:this.curMonth]),d=r.position(),u=r.outerWidth(),r=r.outerHeight(),f=h.outerWidth(),p=h.outerHeight(),m=f/u,b=p/r,u=d.left+u/2,d=d.top+r/2,v=u-f/2,y=d-p/2,D=1-1/m,g=1-1/b,k=m-1,w=b-1;"shrink"==t?(a.css(C("transform-origin"),u+"px "+d+"px"),a.css(C("transform"),"scale("+m+","+b+")"),a.css("opacity",0),Y({n:1}).animate({n:0},{duration:300,step:function(e){h.css("opacity",e),a.css(C("transform"),"scale("+(1+e*k)+","+(1+e*w)+")"),e=1-e,h.css(C("transform"),"translate("+e*v+"px,"+e*y+"px)scale("+(1-e*D)+","+(1-e*g)+")"),a.css("opacity",e)},complete:function(){h.remove(),a.removeAttr("style")}})):(h.css(C("transform-origin"),u+"px "+d+"px"),a.css("opacity",0),a.css(C("transform"),"translate("+v+"px,"+y+"px)scale("+1/m+","+1/b+")"),Y({n:0}).animate({n:1},{duration:300,step:function(e){a.css("opacity",e),h.css(C("transform"),"scale("+(1+e*k)+","+(1+e*w)+")"),h.css("opacity",e=1-e),a.css(C("transform"),"translate("+e*v+"px,"+e*y+"px)scale("+(1-e*D)+","+(1-e*g)+")")},complete:function(){h.remove(),a.removeAttr("style")}}))}}function d(e,t){if(t=t||this.isHtml,host=this.host,void 0===e)return t?host.html():host.val();t?host.html(e):host.val(e)}function u(){this.hide(),M(this.onSelect,this.selectedDate,this),this.hostAutoFill&&d.call(this,c.format(this.selectedDate,this.datePattern))}function f(e){if(!e)throw new Error("[DatePicker Exception]: No arguments.");this.host=Y(e.host),this.hostAutoFill="boolean"!=typeof e.hostAutoFill||e.hostAutoFill,this.showWhenHostOnFocus="boolean"!=typeof e.showWhenHostOnFocus||e.showWhenHostOnFocus,this.isHtml="boolean"==typeof e.isHtml&&e.isHtml,this.datePattern=e.datePattern||"yyyy-MM-dd",this.firstDayOfWeek=isNaN(parseInt(e.firstDayOfWeek))?0:Math.max(Math.min(e.firstDayOfWeek,6),0),this.selectRange=((e.selectRange+"").match(/^(?:YEAR|MONTH)$/i)||[""])[0].toUpperCase(),this.onSelect="function"==Y.type(e.onSelect)?e.onSelect:null,this.onYearCheck="function"==Y.type(e.onYearCheck)?e.onYearCheck:null,this.onMonthCheck="function"==Y.type(e.onMonthCheck)?e.onMonthCheck:null,this.onDateCheck="function"==Y.type(e.onDateCheck)?e.onDateCheck:null;try{this.today=c.build(e.today)}catch(e){this.today=new Date}finally{this.today.setHours(0,0,0,0)}this.bubble=new i({host:this.host,pos:e.pos,classNames:e.classNames,zIndex:e.zIndex,marginFromHost:e.marginFromHost,offset:e.offset,showTail:e.showTail,hideWhenBlur:e.hideWhenBlur,blurProtect:e.blurProtect,animation:e.animation,onShow:e.onShow,onHide:e.onHide}),function(){var e=this.bubble.getNode(),a=this;this.showWhenHostOnFocus&&this.host.focus(function(){a.show()}),e.on("click.datePicker",'[evt-action="headerContent"]',function(){var e=Y(this);if(!e.hasClass("disabled"))switch(o(Y(this).attr("evt-data")).type){case"MONTH":r.call(a,"YEAR","shrink");break;case"DATE":r.call(a,"MONTH","shrink")}}),e.on("click.datePicker",'[evt-action="headerSwitch"]',function(){var e=o(Y(this).attr("evt-data")),t=new Date(a.curYear,a.curMonth,1,0,0,0,0);switch(e.type){case"YEAR":t.setFullYear(t.getFullYear()+("REDUCE"==e.method?-10:10));break;case"MONTH":t.setFullYear(t.getFullYear()+("REDUCE"==e.method?-1:1));break;case"DATE":t.setMonth(t.getMonth()+("REDUCE"==e.method?-1:1))}n.call(a,t),r.call(a,e.type,"REDUCE"==e.method?"slideRight":"slideLeft")}),e.on("click.datePicker",'[evt-action="pickUp"]',function(e){var t=o(Y(this).attr("evt-data"));switch(e.stopPropagation(),t.type){case"YEAR":a.curYear=parseInt(t.value),r.call(a,"MONTH","expand");break;case"MONTH":a.curMonth=parseInt(t.value),r.call(a,"DATE","expand");break;case"DATE":a.curDate=parseInt(t.value),a.selectedDate=new Date(a.curYear,a.curMonth,a.curDate,0,0,0,0),u.call(a);break;case"TODAY":a.selectedDate=new Date(a.today.setHours(0,0,0,0)),u.call(a)}})}.call(this);e=(e=['<span class="holiday">日</span>',"<span>一</span>","<span>二</span>","<span>三</span>","<span>四</span>","<span>五</span>",'<span class="holiday">六</span>']).concat(e.splice(0,this.firstDayOfWeek));this._dateTpl=new s(h.replace("<week />",e.join("")))}f.prototype={constructor:f,getDate:function(){return this.selectedDate||this.today||(new Date).setHours(0,0,0,0)},show:function(e){if(!this.bubble.isVisible)try{this.selectedDate=c.build(e||this.hostAutoFill&&d.call(this)||this.today)}catch(e){this.selectedDate=new Date(this.today)}finally{this.selectedDate.setHours(0,0,0,0),n.call(this),this.bubble.setContent(function(){var e=this.today.getFullYear(),t=this.today.getMonth(),t={headerText:c.format(this.selectedDate,"yyyy年M月"),bodyContent:$.call(this),footerText:c.format(this.today,"yyyy年M月d日 "),isTodayAvailable:!(!1===M(this.onDateCheck,this.today,this)||!1===M(this.onMonthCheck,[e,t],this)||!1===M(this.onYearCheck,e,this)||"MONTH"==this.selectRange&&(e!=this.curYear||t!=this.curMonth)||"YEAR"==this.selectRange&&e!=this.curYear),reduceDisabled:"MONTH"==this.selectRange||"YEAR"==this.selectRange&&0==this.curMonth,increaseDisabled:"MONTH"==this.selectRange||"YEAR"==this.selectRange&&11==this.curMonth};return l.fetch(t)}.call(this));var t=this;this.bubble.show(function(){t.hostAutoFill&&!1!==M(t.onDateCheck,t.selectedDate,t)&&!1!==M(t.onMonthCheck,[t.selectedDate.getFullYear(),t.selectedDate.getMonth()],t)&&!1!==M(t.onYearCheck,t.selectedDate.getFullYear(),t)&&d.call(t,c.format(t.selectedDate,t.datePattern))})}},hide:function(){this.bubble.hide()}},a.exports=f});
;/*!wiki-common:widget/ui/overlay/overlay.js*/
define("wiki-common:widget/ui/overlay/overlay",function(o,t,i){function s(o){this.host=n((o=o||{}).host).length?n(o.host):n("body"),this.opacity=isNaN(parseFloat(o.opacity))?.6:Math.min(Math.max(parseFloat(o.opacity),0),1),this.onShow="function"==n.type(o.onShow)?o.onShow:null,this.onHide="function"==n.type(o.onHide)?o.onHide:null,this.isShown=!1,n(".wgt_overlay",this.host).length?this.node=n(".wgt_overlay"):this.node=n('<div class="wgt_overlay"></div>').css("opacity",0).appendTo(this.host),"body"==this.host[0].tagName.toLowerCase()?this.node.css("position","fixed"):(this.node.css("position","absolute"),/^relative|absolute$/.test(this.host.css("position"))||this.host.css("position","relative"))}var n=o("wiki-common:widget/lib/jquery/jquery"),e=o("wiki-common:widget/util/safeCall"),a=o("wiki-common:widget/util/animation");s.prototype={constructor:s,getNode:function(){return this.node},show:function(o,t){var i;this.isShown||(i=this,o=isNaN(parseInt(o))?200:Math.abs(parseInt(o)),this.node.css("opacity",0).show(),a(o,function(o){i.node.css("opacity",o*i.opacity)},"linear",function(){i.node.css("opacity",i.opacity),e(t,null,i),e(i.onShow,null,i)}),this.isShown=!0)},hide:function(o,t){var i;this.isShown&&(i=this,o=isNaN(parseInt(o))?200:Math.abs(parseInt(o)),a(o,function(o){i.node.css("opacity",(1-o)*i.opacity)},"linear",function(){i.node.hide(),e(t,null,i),e(i.onHide,null,i)}),this.isShown=!1)}},i.exports=s});
;/*!wiki-common:widget/ui/dialog/windowScroll.js*/
define("wiki-common:widget/ui/dialog/windowScroll",function(o,n,l){l.exports={disableScroll:function(){var o=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;window.onscroll=function(){window.scrollTo(o,n)}},enableScroll:function(){window.onscroll=null}}});
;/*!wiki-common:widget/ui/dialog/dialog.js*/
define("wiki-common:widget/ui/dialog/dialog",function(t,n,i){var s=t("wiki-common:widget/lib/jquery/jquery"),o=t("wiki-common:widget/util/safeCall"),e=t("wiki-common:widget/ui/overlay/overlay"),l=t("wiki-common:widget/lib/jsmart/jsmart"),a=t("wiki-common:widget/util/animation"),c=t("wiki-common:widget/util/checkCSS"),h=t("wiki-common:widget/ui/bubble/bubble"),m=t("wiki-common:widget/ui/dialog/windowScroll"),d=new l('\n<dl class="wgt_dialog{%if !$title%} no-title{%/if%} {%$type|lower|f_escape_xml%} {%if $classNames%} {%$classNames|f_escape_xml%} {%/if%}">\n{%if $title%}\n<dt>{%$title|f_escape_xml%}</dt>\n{%/if%}\n{%if $hasCloseBtn%}\n<dd class="close dialog-btn" title="关闭" btn-key="close"><em class="cmn-icon cmn-icons cmn-icons_close"></em></dd>\n{%/if%}\n<dd class="con{%if !$icon%} no-icon{%/if%}{%if !$subMsg%} no-sub-msg{%/if%}">\n{%if $content%}\n{%$content|f_escape_xml%}\n{%else%}\n{%if $icon%}\n<em class="cmn-icon cmn-icons cmn-icons_dialog-{%$icon|lower|f_escape_xml%} cmn-dialog-icons cmn-inline-block"></em>\n{%/if%}\n<div class="msg cmn-inline-block">\n<h1>{%$mainMsg|f_escape_xml%}</h1>\n{%if $subMsg%}\n<pre>{%$subMsg|f_escape_xml%}</pre>\n{%/if%}\n{%if $extInfo%}\n<p class="ext-info">{%$extInfo|f_escape_xml%}</p>\n{%/if%}\n</div>\n{%/if%}\n{%if $btns%}\n<div class="btns">\n{%foreach $btns as $btn%}\n{%if $btn.style == \'white\'%}\n<a href="javascript:;" class="cmn-btn-hover-blue cmn-btn-bottom dialog-btn" btn-key="{%$btn.key|default:$btn@index|f_escape_xml%}">{%$btn.text|default:\'\'|f_escape_xml%}</a>\n{%elseif $btn.style == \'link\'%}\n<a href="javascript:;" class="gray-link dialog-btn" btn-key="{%$btn.key|default:$btn@index|f_escape_xml%}">{%$btn.text|default:\'\'|f_escape_xml%}</a>\n{%elseif $btn.style == \'disabled\'%}\n<a href="javascript:;" class="cmn-btn-blue cmn-btn-bottom dialog-btn disabled" btn-key="{%$btn.key|default:$btn@index|f_escape_xml%}">{%$btn.text|default:\'\'|f_escape_xml%}</a>\n{%else%}\n<a href="javascript:;" class="cmn-btn-blue cmn-btn-bottom dialog-btn" btn-key="{%$btn.key|default:$btn@index|f_escape_xml%}">{%$btn.text|default:\'\'|f_escape_xml%}</a>\n{%/if%}\n{%/foreach%}\n</div>\n{%/if%}\n</dd>\n</dl>'.replace(/\s*<!--[\s\S]*?-->\s*/g,"")),u=new e;c("transform");function b(){return s(d.fetch(s.extend({type:this.type,title:this.title,hasCloseBtn:this.hasCloseBtn&&"BUBBLE"!=this.type,btns:this.btns},this.content?{content:this.content}:{icon:this.icon,mainMsg:this.mainMsg,subMsg:this.subMsg,classNames:this.extClassNames||"",extInfo:this.autoCloseTime&&"BUBBLE"!=this.type?"<i>"+this.autoCloseTime+"</i>&nbsp;秒钟后自动关闭":""})))}function f(t){switch(this.type){case"MODAL":this.node.css({"margin-left":-this.node.outerWidth()/2+"px","margin-top":-this.node.outerHeight()/2-(t?0:40)+"px"});break;case"BUBBLE":this.bubble.resetPos()}}function r(t){var n;this.type=/^MODAL|BUBBLE$/i.test((t=t||{}).type)?RegExp.$_.toUpperCase():"MODAL",this.extClassNames=t.classNames||"",this.hasCloseBtn="boolean"!=s.type(t.hasCloseBtn)||t.hasCloseBtn,this.title=t.title?t.title+"":"",this.content=t.content?s(t.content).length&&s(t.content).closest("body").length?s(t.content).remove().show().prop("outerHTML"):t.content+"":"",this.content||(this.icon=/^WARNING|QUESTION|CHECK|ERROR|LOADING$/i.test(t.icon)?RegExp.$_:"",this.mainMsg=t.mainMsg?t.mainMsg+"":"",this.subMsg=t.subMsg?t.subMsg+"":""),this.btns=t.btns?[].concat(t.btns):null,this.autoCloseTime=Math.abs(parseInt(t.autoCloseTime))||0,this.autoCloseTimer=null,this.onShow="function"==s.type(t.onShow)?t.onShow:null,this.onHide="function"==s.type(t.onHide)?t.onHide:null,this.onBtnClick="function"==s.type(t.onBtnClick)?t.onBtnClick:null,this.isVisible=!1,this.node=b.call(this),this.node.data("dialogObj",this),"BUBBLE"==this.type?(n=this).bubble=new h({host:t.host,content:this.node,classNames:this.extClassNames,pos:t.pos,marginFromHost:t.marginFromHost,hideWhenBlur:t.hideWhenBlur,hideAfterDelay:1e3*this.autoCloseTime,animation:"SLIDE",showTail:!0,onShow:function(){n.isVisible=!0,o(n.onShow,null,this)},onHide:function(){n.isVisible=!1,o(n.onHide,null,this)}}):this.node.addClass(this.extClassNames).css({display:"none"}).appendTo(s("body"))}s("body").on("click",".wgt_dialog .dialog-btn",function(){var t=s(this),n=t.parents(".wgt_dialog").data("dialogObj");!1!==o(n.onBtnClick,t.attr("btn-key"),n)&&n.hide()}).on("click",".wgt_dialog .close",function(){s(this).parents(".wgt_dialog").data("dialogObj").hide()}),r.prototype={constructor:r,show:function(t){if(!this.isVisible){this.isVisible=!0;var n=this;switch(this.type){case"MODAL":this.node.css({opacity:0}).show(),f.call(this);var i=parseInt(this.node.css("margin-top"));m.disableScroll(),u.show(),a({duration:200,onStep:function(t){n.node.css({opacity:t,"margin-top":i+40*t+"px"})},onComplete:function(){n.node.css("opacity","1"),n.autoCloseTime&&(n.autoCloseTimer=a(1e3*n.autoCloseTime,function(t){s(".ext-info",n.node).html("<i>"+Math.ceil((1-t)*n.autoCloseTime)+"</i>&nbsp;秒钟后自动关闭")},"linear",function(){n.autoCloseTimer=null,n.hide()})),o(t,null,n),o(n.onShow,null,n)}});break;case"BUBBLE":this.bubble.show(t)}}},hide:function(t){if(this.isVisible){var n=this.isVisible=!1,i=(s(".bg-player-modal").length&&"block"===s(".lemmaWgt-secondsKnow-dialog").css("display")&&"none"!==s(".bg-player-modal").css("display")&&(n=!0),s(".J-sl-upload-video").length&&(n=!1),this.autoCloseTime&&this.autoCloseTimer&&(this.autoCloseTimer.stop(),this.autoCloseTimer=null),this);switch(this.type){case"MODAL":var e=parseInt(this.node.css("margin-top"));s(".bg-player-modal").length&&s(".bg-player-modal").css("display","none"),m.enableScroll(),n||u.hide(),a({duration:200,easing:"easeInQuad",onStep:function(t){i.node.css({opacity:1-t,"margin-top":e-40*t+"px"})},onComplete:function(){i.node.css("opacity","0").hide(),o(t,null,i),o(i.onHide,null,i)}});break;case"BUBBLE":this.bubble.hide(t)}}},resetPos:function(){f.call(this,!0)},setContent:function(t){this.hasCloseBtn=("boolean"==s.type((t=t||{}).hasCloseBtn)?t:this).hasCloseBtn,this.title=t.title?t.title+"":this.title,this.content=t.content?s(t.content).length?s(t.content).remove().show().prop("outerHTML"):t.content+"":"",this.content||(this.icon=/^WARNING|QUESTION|CHECK|ERROR|LOADING$/i.test(t.icon)?RegExp.$_:this.icon,this.mainMsg=t.mainMsg?t.mainMsg+"":this.mainMsg,this.subMsg=t.subMsg?t.subMsg+"":this.subMsg),this.btns=t.btns?[].concat(t.btns):this.btns;var n=b.call(this);switch(this.node.removeData("dialogObj"),this.type){case"MODAL":this.node.replaceWith(n);break;case"BUBBLE":this.bubble.setContent(n)}this.node=n,this.node.data("dialogObj",this),f.call(this,!0)}},r.alert=function(n){var t="width-fixed";n.classNames&&(t+=" "+n.classNames),new r({classNames:t,title:n.title,icon:/^WARNING|CHECK|ERROR|LOADING$/i.test(n.icon)?RegExp.$_:"",mainMsg:n.mainMsg,subMsg:n.subMsg,autoCloseTime:n.autoCloseTime,btns:n.autoCloseTime?null:{key:"confirm",text:n.confirmTxt||"确定"},onBtnClick:function(t){if("confirm"===t)return o(n.onConfirm,"confirm",this)},onShow:function(){o(n.onShow,null,this)},onHide:function(){o(n.onHide,null,this),this.node.removeData("dialogObj"),this.node.remove()}}).show()},r.confirm=function(n){var t="width-fixed";n.classNames&&(t+=" "+n.classNames),new r({classNames:t,title:n.title,icon:n.noIcon?"":"QUESTION",mainMsg:n.mainMsg,subMsg:n.subMsg,btns:[{key:"confirm",text:n.confirmTxt||"确定"},{key:"cancel",style:"white",text:n.cancelTxt||"取消"}],onBtnClick:function(t){return"confirm"!==t?o(n.onCancel,"cancel",this):o(n.onConfirm,"confirm",this)},onShow:function(){o(n.onShow,null,this)},onHide:function(){o(n.onHide,null,this),this.node.removeData("dialogObj"),this.node.remove()}}).show()},r.inform=function(t){return new r({classNames:"width-fixed",hasCloseBtn:!1,title:t.title,icon:/^WARNING|CHECK|ERROR|LOADING$/i.test(t.icon)?RegExp.$_:"",mainMsg:t.mainMsg,subMsg:t.subMsg,onShow:function(){o(t.onShow,null,this)},onHide:function(){o(t.onHide,null,this)}})},r.tips=function(t){new r({classNames:"width-fixed",title:t.title,icon:/^WARNING|CHECK|ERROR|LOADING$/i.test(t.icon)?RegExp.$_:"",content:t.content,autoCloseTime:t.autoCloseTime,btns:t.confirmBtn?{key:"confirm",text:"确定"}:null,onShow:function(){o(t.onShow,null,this)},onHide:function(){o(t.onHide,null,this),this.node.removeData("dialogObj"),this.node.remove()}}).show()},i.exports=r});
;/*!wiki-common:widget/ui/dialogPlayer/constants.js*/
define("wiki-common:widget/ui/dialogPlayer/constants",function(e,a,i){i.exports={ClassNames:{PLAYING:"dpr-list-el-playing",DEFAULT_DIALOG_CLASS_NAMES:"wgt-player-dialog",SHAER_BTN_CLASS_NAME:"J-dpr-detail__share-btn"},Events:{PLAY:"play",PAUSE:"pause",ENDED:"ended",SHOW:"show",HIDE:"hide",CHANGE:"change",SHARE:"share",SHARE_BTN_CLICK:"sharebtnclick",TIME_UPDATE:"timeupdate"},DataFlag:{PLAYING_SIGN:"__playing",INDEX:"__index"}}});
;/*!wiki-common:widget/ui/dialogPlayer/eventful.js*/
define("wiki-common:widget/ui/dialogPlayer/eventful",function(i,n,o){var e=i("wiki-common:widget/lib/jquery/jquery");o.exports=function(i){var o=e("<div>");i.on=function(i,n){o.on(i,n)},i.off=function(i,n){o.off(i,n)},i.trigger=function(i,n){o.trigger(i,n)}}});
;/*!wiki-common:widget/ui/dialogPlayer/dataManager.js*/
define("wiki-common:widget/ui/dialogPlayer/dataManager",function(t,i,n){var r=t("wiki-common:widget/lib/jquery/jquery"),e=t("wiki-common:widget/ui/dialogPlayer/eventful"),t=t("wiki-common:widget/ui/dialogPlayer/constants"),l=t.DataFlag,o=t.Events;function s(t){this.validate(t.list),this.list=this.normalize(t.list,t.initialIndex),this.idAttribute=l.INDEX,e(this)}s.prototype={constructor:s,normalize:function(t,n){return r.each(t,function(t,i){i[l.INDEX]=t,i[l.PLAYING_SIGN]=t===n}),t},validate:function(t){var i=r.isArray(t);if(!i)throw new Error("[DialogPlayer Error] list must be an array.");for(var n=!0,e=0;e<t.length;e++)this.validateModel(t[e])||(n=!1);if(n)return i&&n;throw new Error("[DialogPlayer Error] invalid item in list.")},validateModel:function(t){var i=t.title&&t.playNum&&t.poster&&(t.secondId||t.src);return null!=t&&"object"==typeof t&&i},find:function(n){var e;return r.each(this.list,function(t,i){n(i,t)&&(e=i)}),e},get:function(t){return this.list[t]},set:function(t,i,n){this.list[t]&&((n=n||{}).isReset?this.list[t]=i:r.extend(this.list[t],i),n.silent||this.trigger(o.CHANGE,{index:t}))},getAll:function(){return this.list},next:function(){var t=this.getPlayingModel();return t?(t=t[l.INDEX])>=this.list.length-1?null:t+1:0},prev:function(){var t=this.getPlayingModel();return t?(t=t[l.INDEX])<=0?null:t-1:0},getPlayingModel:function(){return this.find(function(t){return!!t[l.PLAYING_SIGN]})},setPlayingModel:function(t){var i=this.getPlayingModel(),n={},e=(n[l.PLAYING_SIGN]=!1,{});e[l.PLAYING_SIGN]=!0,i?i[l.INDEX]!==t&&(this.set(i[l.INDEX],n,{silent:!0}),this.set(t,e)):this.set(t,e)}},n.exports=s});
;/*!wiki-common:widget/ui/dialogPlayer/shareBubble/shareBubble.js*/
define("wiki-common:widget/ui/dialogPlayer/shareBubble/shareBubble",function(s,e,i){var o=s("wiki-common:widget/lib/jquery/jquery"),t=s("wiki-common:widget/lib/jsmart/jsmart"),n=s("wiki-common:widget/ui/bubble/bubble"),a=s("wiki-common:widget/component/share/share"),h=s("wiki-common:widget/component/share/dep/qrcode"),c=s("wiki-common:widget/ui/dialogPlayer/eventful"),l=s("wiki-common:widget/ui/dialogPlayer/constants").Events;function r(s){this.$host=o(s.host),this.shareData=s.shareData||{},this.beforeShare=s.beforeShare||o.noop,this.pos=s.pos||"leftAuto",this.marginFromHost=s.marginFromHost||15,this.classNames=s.classNames||"",this.showBubble=this.showBubble.bind(this),this.initializeBubble(),this.initializeEvents(),c(this)}r.prototype={constructor:r,setHost:function(s){this.$host.off("click",this.showBubble),this.$host=o(s),this.$host.on("click",this.showBubble),this.bubble.setHost(s)},showBubble:function(){this.trigger(l.SHARE_BTN_CLICK),this.bubble.show()},update:function(s){this.shareData=o.extend(this.shareData,s)},share:function(s){this.beforeShare(),this.trigger(l.SHARE,{channel:s}),"wechat"===s?this.share2WeChat():this.share2Others(s)},share2WeChat:function(){var s=new n({host:o(this.bubble.getNode()).find('[data-channel="wechat"]'),content:'<div class="bubble-content"></div>',classNames:"lemmaWgt-secondsKnow-dialog-qrcode-bubble",marginFromHost:15,pos:"bottomAuto",showTail:!0,hideWhenBlur:!0,animation:"SLIDE"});new h(o(s.getNode()).find("div").get(0),{width:180,height:180}).makeCode(this.shareData.url),s.show()},share2Others:function(s){a.openShareLink(s,{url:this.shareData.url,title:this.shareData.title,pic:this.shareData.pic})},initializeBubble:function(){this.bubble=new n({host:this.$host,content:new t('<li class="bubble-content">\n<a href="javascript:;" class="secondsknow-share-icon" nslog-type="10002511" data-channel="wechat"><em class="cmn-icon cmn-icons cmn-icons_logo-wechat secondsknow-share-icon__em"></em></a>\n<a href="javascript:;" class="secondsknow-share-icon" nslog-type="10002512" data-channel="qzone"><em class="cmn-icon cmn-icons cmn-icons_logo-qzone secondsknow-share-icon__em"></em></a>\n<a href="javascript:;" class="secondsknow-share-icon" nslog-type="10002513" data-channel="qq"><em class="cmn-icon cmn-icons cmn-icons_logo-qq secondsknow-share-icon__em"></em></a>\n<a href="javascript:;" class="secondsknow-share-icon" nslog-type="10002514" data-channel="weibo"><em class="cmn-icon cmn-icons cmn-icons_logo-sina-weibo secondsknow-share-icon__em"></em></a>\n</li>').fetch(),classNames:this.classNames,marginFromHost:this.marginFromHost,pos:this.pos,showTail:!0,hideWhenBlur:!0,animation:"SLIDE"})},initializeEvents:function(){var e=this;e.$host.on("click",e.showBubble),o(e.bubble.getNode()).on("click","a",function(){var s=o(this).attr("data-channel");e.share(s)})}},i.exports=r});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/dom.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/dom",function(e,t,o){"use strict";var r={};r.e=function(e,t){e=document.createElement(e);return e.className=t,e},r.appendTo=function(e,t){return t.appendChild(e),e},r.css=function(e,t,o){if("object"!=typeof t)return void 0===o?(n=t,window.getComputedStyle(e)[n]):(n=e,c=t,"number"==typeof(o=o)&&(o=o.toString()+"px"),n.style[c]=o,n);var r,c,n,i=e,a=t;for(r in a){var s=a[r];"number"==typeof s&&(s=s.toString()+"px"),i.style[r]=s}return i},r.matches=function(e,t){return void 0!==e.matches?e.matches(t):void 0!==e.matchesSelector?e.matchesSelector(t):void 0!==e.webkitMatchesSelector?e.webkitMatchesSelector(t):void 0!==e.mozMatchesSelector?e.mozMatchesSelector(t):void 0!==e.msMatchesSelector?e.msMatchesSelector(t):void 0},r.remove=function(e){void 0!==e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},r.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return r.matches(e,t)})},o.exports=r});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/class.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/class",function(s,i,a){"use strict";i.add=function(s,i){var a;s.classList?s.classList.add(i):(i=i,(a=(s=s).className.split(" ")).indexOf(i)<0&&a.push(i),s.className=a.join(" "))},i.remove=function(s,i){var a;s.classList?s.classList.remove(i):(i=i,a=(s=s).className.split(" "),0<=(i=a.indexOf(i))&&a.splice(i,1),s.className=a.join(" "))},i.list=function(s){return s.classList?Array.prototype.slice.apply(s.classList):s.className.split(" ")}});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/helper.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/helper",function(t,e,n){"use strict";var o=t("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/class"),i=t("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/dom");e.toInt=function(t){return parseInt(t,10)||0},e.clone=function(t){if(null===t)return null;if("object"!=typeof t)return t;var e,n={};for(e in t)n[e]=this.clone(t[e]);return n},e.extend=function(t,e){var n,i=this.clone(t);for(n in e)i[n]=this.clone(e[n]);return i},e.isEditable=function(t){return i.matches(t,"input,[contenteditable]")||i.matches(t,"select,[contenteditable]")||i.matches(t,"textarea,[contenteditable]")||i.matches(t,"button,[contenteditable]")},e.removePsClasses=function(t){for(var e=o.list(t),n=0;n<e.length;n++){var i=e[n];0===i.indexOf("ps-")&&o.remove(t,i)}},e.outerWidth=function(t){return this.toInt(i.css(t,"width"))+this.toInt(i.css(t,"paddingLeft"))+this.toInt(i.css(t,"paddingRight"))+this.toInt(i.css(t,"borderLeftWidth"))+this.toInt(i.css(t,"borderRightWidth"))},e.startScrolling=function(t,e){o.add(t,"ps-in-scrolling"),void 0!==e?o.add(t,"ps-"+e):(o.add(t,"ps-x"),o.add(t,"ps-y"))},e.stopScrolling=function(t,e){o.remove(t,"ps-in-scrolling"),void 0!==e?o.remove(t,"ps-"+e):(o.remove(t,"ps-x"),o.remove(t,"ps-y"))},e.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/default-setting.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/default-setting",function(e,l,r){"use strict";r.exports={maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,useKeyboard:!0,useSelectionScroll:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/event-manager.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/event-manager",function(e,t,n){"use strict";function i(e){this.element=e,this.events={}}function o(){this.eventElements=[]}i.prototype.bind=function(e,t){void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},i.prototype.unbind=function(t,n){var i=void 0!==n;this.events[t]=this.events[t].filter(function(e){return i&&e!==n||(this.element.removeEventListener(t,e,!1),!1)},this)},i.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};o.prototype.eventElement=function(t){var e=this.eventElements.filter(function(e){return e.element===t})[0];return void 0===e&&(e=new i(t),this.eventElements.push(e)),e},o.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},o.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},o.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},o.prototype.once=function(e,t,n){var i=this.eventElement(e),o=function(e){i.unbind(t,o),n(e)};i.bind(t,o)},n.exports=o});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/guid.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/guid",function(r,t,i){"use strict";function n(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}i.exports=function(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/instances.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/instances",function(l,r,t){"use strict";var s=l("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/class"),e=l("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/dom"),c=l("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/default-setting"),n=l("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/event-manager"),o=l("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/guid"),d=l("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/helper"),a={};function b(l){var r,t,i=this;function o(){s.add(l,"ps-focus")}function a(){s.remove(l,"ps-focus")}i.settings=d.clone(c),i.containerWidth=null,i.containerHeight=null,i.contentWidth=null,i.contentHeight=null,i.isRtl="rtl"===e.css(l,"direction"),i.isNegativeScroll=(t=l.scrollLeft,l.scrollLeft=-1,r=l.scrollLeft<0,l.scrollLeft=t,r),i.negativeScrollAdjustment=i.isNegativeScroll?l.scrollWidth-l.clientWidth:0,i.event=new n,i.ownerDocument=l.ownerDocument||document,i.scrollbarXRail=e.appendTo(e.e("div","ps-scrollbar-x-rail"),l),i.scrollbarX=e.appendTo(e.e("div","ps-scrollbar-x"),i.scrollbarXRail),i.scrollbarX.setAttribute("tabindex",0),i.event.bind(i.scrollbarX,"focus",o),i.event.bind(i.scrollbarX,"blur",a),i.scrollbarXActive=null,i.scrollbarXWidth=null,i.scrollbarXLeft=null,i.scrollbarXBottom=d.toInt(e.css(i.scrollbarXRail,"bottom")),i.isScrollbarXUsingBottom=i.scrollbarXBottom==i.scrollbarXBottom,i.scrollbarXTop=i.isScrollbarXUsingBottom?null:d.toInt(e.css(i.scrollbarXRail,"top")),i.railBorderXWidth=d.toInt(e.css(i.scrollbarXRail,"borderLeftWidth"))+d.toInt(e.css(i.scrollbarXRail,"borderRightWidth")),e.css(i.scrollbarXRail,"display","block"),i.railXMarginWidth=d.toInt(e.css(i.scrollbarXRail,"marginLeft"))+d.toInt(e.css(i.scrollbarXRail,"marginRight")),e.css(i.scrollbarXRail,"display",""),i.railXWidth=null,i.railXRatio=null,i.scrollbarYRail=e.appendTo(e.e("div","ps-scrollbar-y-rail"),l),i.scrollbarY=e.appendTo(e.e("div","ps-scrollbar-y"),i.scrollbarYRail),i.scrollbarY.setAttribute("tabindex",0),i.event.bind(i.scrollbarY,"focus",o),i.event.bind(i.scrollbarY,"blur",a),i.scrollbarYActive=null,i.scrollbarYHeight=null,i.scrollbarYTop=null,i.scrollbarYRight=d.toInt(e.css(i.scrollbarYRail,"right")),i.isScrollbarYUsingRight=i.scrollbarYRight==i.scrollbarYRight,i.scrollbarYLeft=i.isScrollbarYUsingRight?null:d.toInt(e.css(i.scrollbarYRail,"left")),i.scrollbarYOuterWidth=i.isRtl?d.outerWidth(i.scrollbarY):null,i.railBorderYWidth=d.toInt(e.css(i.scrollbarYRail,"borderTopWidth"))+d.toInt(e.css(i.scrollbarYRail,"borderBottomWidth")),e.css(i.scrollbarYRail,"display","block"),i.railYMarginHeight=d.toInt(e.css(i.scrollbarYRail,"marginTop"))+d.toInt(e.css(i.scrollbarYRail,"marginBottom")),e.css(i.scrollbarYRail,"display",""),i.railYHeight=null,i.railYRatio=null}function i(l){return void 0===l.dataset?l.getAttribute("data-ps-id"):l.dataset.psId}r.add=function(l){var r,t,i=o();return t=i,void 0===(r=l).dataset?r.setAttribute("data-ps-id",t):r.dataset.psId=t,a[i]=new b(l),a[i]},r.remove=function(l){delete a[i(l)],void 0===(l=l).dataset?l.removeAttribute("data-ps-id"):delete l.dataset.psId},r.get=function(l){return a[i(l)]}});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/destroy.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/destroy",function(r,e,i){"use strict";var l=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/dom"),o=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/helper"),a=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/instances");i.exports=function(r){var e=a.get(r);e&&(e.event.unbindAll(),l.remove(e.scrollbarX),l.remove(e.scrollbarY),l.remove(e.scrollbarXRail),l.remove(e.scrollbarYRail),o.removePsClasses(r),a.remove(r))}});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-scroll.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-scroll",function(t,e,n){"use strict";var i,o,r=t("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/instances"),s=document.createEvent("Event"),l=document.createEvent("Event"),a=document.createEvent("Event"),v=document.createEvent("Event"),d=document.createEvent("Event"),p=document.createEvent("Event"),E=document.createEvent("Event"),u=document.createEvent("Event"),h=document.createEvent("Event"),f=document.createEvent("Event");s.initEvent("ps-scroll-up",!0,!0),l.initEvent("ps-scroll-down",!0,!0),a.initEvent("ps-scroll-left",!0,!0),v.initEvent("ps-scroll-right",!0,!0),d.initEvent("ps-scroll-y",!0,!0),p.initEvent("ps-scroll-x",!0,!0),E.initEvent("ps-x-reach-start",!0,!0),u.initEvent("ps-x-reach-end",!0,!0),h.initEvent("ps-y-reach-start",!0,!0),f.initEvent("ps-y-reach-end",!0,!0),n.exports=function(t,e,n){if(void 0===t)throw"You must provide an element to the update-scroll function";if(void 0===e)throw"You must provide an axis to the update-scroll function";if(void 0===n)throw"You must provide a value to the update-scroll function";"top"===e&&n<=0&&(t.scrollTop=n=0,t.dispatchEvent(h)),"left"===e&&n<=0&&(t.scrollLeft=n=0,t.dispatchEvent(E));var c=r.get(t);"top"===e&&n>=c.contentHeight-c.containerHeight&&(t.scrollTop=n=c.contentHeight-c.containerHeight,t.dispatchEvent(f)),"left"===e&&n>=c.contentWidth-c.containerWidth&&(t.scrollLeft=n=c.contentWidth-c.containerWidth,t.dispatchEvent(u)),i=i||t.scrollTop,o=o||t.scrollLeft,"top"===e&&n<i&&t.dispatchEvent(s),"top"===e&&i<n&&t.dispatchEvent(l),"left"===e&&n<o&&t.dispatchEvent(a),"left"===e&&o<n&&t.dispatchEvent(v),"top"===e&&(t.scrollTop=i=n,t.dispatchEvent(d)),"left"===e&&(t.scrollLeft=o=n,t.dispatchEvent(p))}});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-geometry.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-geometry",function(r,t,l){"use strict";var o=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/class"),a=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/dom"),c=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/helper"),s=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/instances"),n=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-scroll");function h(r,t){return r.settings.minScrollbarLength&&(t=Math.max(t,r.settings.minScrollbarLength)),t=r.settings.maxScrollbarLength?Math.min(t,r.settings.maxScrollbarLength):t}l.exports=function(r){var t,l,i,e=s.get(r);e.containerWidth=r.clientWidth,e.containerHeight=r.clientHeight,e.contentWidth=r.scrollWidth,e.contentHeight=r.scrollHeight,r.contains(e.scrollbarXRail)||(0<(t=a.queryChildren(r,".ps-scrollbar-x-rail")).length&&t.forEach(function(r){a.remove(r)}),a.appendTo(e.scrollbarXRail,r)),r.contains(e.scrollbarYRail)||(0<(t=a.queryChildren(r,".ps-scrollbar-y-rail")).length&&t.forEach(function(r){a.remove(r)}),a.appendTo(e.scrollbarYRail,r)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=54,e.scrollbarXLeft=c.toInt((e.negativeScrollAdjustment+r.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=h(e,c.toInt(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=c.toInt(r.scrollTop*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),t=r,i={width:(l=e).railXWidth},l.isRtl?i.left=l.negativeScrollAdjustment+t.scrollLeft+l.containerWidth-l.contentWidth:i.left=t.scrollLeft,l.isScrollbarXUsingBottom?i.bottom=l.scrollbarXBottom-t.scrollTop:i.top=l.scrollbarXTop+t.scrollTop,a.css(l.scrollbarXRail,i),i={top:t.scrollTop,height:l.railYHeight},l.isScrollbarYUsingRight?l.isRtl?i.right=l.contentWidth-(l.negativeScrollAdjustment+t.scrollLeft)-l.scrollbarYRight-l.scrollbarYOuterWidth:i.right=l.scrollbarYRight-t.scrollLeft:l.isRtl?i.left=l.negativeScrollAdjustment+t.scrollLeft+2*l.containerWidth-l.contentWidth-l.scrollbarYLeft-l.scrollbarYOuterWidth:i.left=l.scrollbarYLeft+t.scrollLeft,a.css(l.scrollbarYRail,i),a.css(l.scrollbarX,{left:l.scrollbarXLeft,width:l.scrollbarXWidth-l.railBorderXWidth}),a.css(l.scrollbarY,{top:l.scrollbarYTop,height:l.scrollbarYHeight-l.railBorderYWidth}),e.scrollbarXActive?o.add(r,"ps-active-x"):(o.remove(r,"ps-active-x"),e.scrollbarXWidth=0,e.scrollbarXLeft=0,n(r,"left",0)),e.scrollbarYActive?o.add(r,"ps-active-y"):(o.remove(r,"ps-active-y"),e.scrollbarYHeight=0,e.scrollbarYTop=0,n(r,"top",0))}});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/click-rail.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/click-rail",function(i,t,r){"use strict";var a=i("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/helper"),e=i("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/instances"),n=i("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-geometry"),c=i("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-scroll");r.exports=function(i){var r,l,t=e.get(i);function o(i){return i.getBoundingClientRect()}r=i,l=t,i=window.Event.prototype.stopPropagation.bind,l.settings.stopPropagationOnClick&&l.event.bind(l.scrollbarY,"click",i),l.event.bind(l.scrollbarYRail,"click",function(i){var t=a.toInt(l.scrollbarYHeight/2),t=l.railYRatio*(i.pageY-window.pageYOffset-o(l.scrollbarYRail).top-t)/(l.railYRatio*(l.railYHeight-l.scrollbarYHeight));t<0?t=0:1<t&&(t=1),c(r,"top",(l.contentHeight-l.containerHeight)*t),n(r),i.stopPropagation()}),l.settings.stopPropagationOnClick&&l.event.bind(l.scrollbarX,"click",i),l.event.bind(l.scrollbarXRail,"click",function(i){var t=a.toInt(l.scrollbarXWidth/2),t=l.railXRatio*(i.pageX-window.pageXOffset-o(l.scrollbarXRail).left-t)/(l.railXRatio*(l.railXWidth-l.scrollbarXWidth));t<0?t=0:1<t&&(t=1),c(r,"left",(l.contentWidth-l.containerWidth)*t-l.negativeScrollAdjustment),n(r),i.stopPropagation()})}});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/drag-scrollbar.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/drag-scrollbar",function(t,o,e){"use strict";var a=t("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/dom"),c=t("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/helper"),r=t("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/instances"),s=t("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-geometry"),u=t("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-scroll");function i(r,i){var n,l=null;function o(t){var o,e;o=t.pageX-n,o=l+o*i.railXRatio,e=Math.max(0,i.scrollbarXRail.getBoundingClientRect().left)+i.railXRatio*(i.railXWidth-i.scrollbarXWidth),i.scrollbarXLeft=o<0?0:e<o?e:o,e=c.toInt(i.scrollbarXLeft*(i.contentWidth-i.containerWidth)/(i.containerWidth-i.railXRatio*i.scrollbarXWidth))-i.negativeScrollAdjustment,u(r,"left",e),s(r),t.stopPropagation(),t.preventDefault()}function e(){c.stopScrolling(r,"x"),i.event.unbind(i.ownerDocument,"mousemove",o)}i.event.bind(i.scrollbarX,"mousedown",function(t){n=t.pageX,l=c.toInt(a.css(i.scrollbarX,"left"))*i.railXRatio,c.startScrolling(r,"x"),i.event.bind(i.ownerDocument,"mousemove",o),i.event.once(i.ownerDocument,"mouseup",e),t.stopPropagation(),t.preventDefault()})}function n(r,i){var n,l=null;function o(t){var o,e;o=t.pageY-n,o=l+o*i.railYRatio,e=Math.max(0,i.scrollbarYRail.getBoundingClientRect().top)+i.railYRatio*(i.railYHeight-i.scrollbarYHeight),i.scrollbarYTop=o<0?0:e<o?e:o,e=c.toInt(i.scrollbarYTop*(i.contentHeight-i.containerHeight)/(i.containerHeight-i.railYRatio*i.scrollbarYHeight)),u(r,"top",e),s(r),t.stopPropagation(),t.preventDefault()}function e(){c.stopScrolling(r,"y"),i.event.unbind(i.ownerDocument,"mousemove",o)}i.event.bind(i.scrollbarY,"mousedown",function(t){n=t.pageY,l=c.toInt(a.css(i.scrollbarY,"top"))*i.railYRatio,c.startScrolling(r,"y"),i.event.bind(i.ownerDocument,"mousemove",o),i.event.once(i.ownerDocument,"mouseup",e),t.stopPropagation(),t.preventDefault()})}e.exports=function(t){var o=r.get(t);i(t,o),n(t,o)}});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/keyboard.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/keyboard",function(e,r,t){"use strict";var l=e("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/helper"),s=e("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/dom"),i=e("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/instances"),u=e("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-geometry"),d=e("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-scroll");function a(o,c){var n=!1;c.event.bind(o,"mouseenter",function(){n=!0}),c.event.bind(o,"mouseleave",function(){n=!1});c.event.bind(c.ownerDocument,"keydown",function(e){if(!e.isDefaultPrevented||!e.isDefaultPrevented()){var r=s.matches(c.scrollbarX,":focus")||s.matches(c.scrollbarY,":focus");if(n||r){var t=document.activeElement||c.ownerDocument.activeElement;if(t){for(;t.shadowRoot;)t=t.shadowRoot.activeElement;if(l.isEditable(t))return}var i=0,a=0;switch(e.which){case 37:i=-30;break;case 38:a=30;break;case 39:i=30;break;case 40:a=-30;break;case 33:a=90;break;case 32:a=e.shiftKey?90:-90;break;case 34:a=-90;break;case 35:a=e.ctrlKey?-c.contentHeight:-c.containerHeight;break;case 36:a=e.ctrlKey?o.scrollTop:c.containerHeight;break;default:return}d(o,"top",o.scrollTop-a),d(o,"left",o.scrollLeft+i),u(o),function(e,r){var t=o.scrollTop;if(0===e){if(!c.scrollbarYActive)return!1;if(0===t&&0<r||t>=c.contentHeight-c.containerHeight&&r<0)return!c.settings.wheelPropagation}if(t=o.scrollLeft,0===r){if(!c.scrollbarXActive)return!1;if(0===t&&e<0||t>=c.contentWidth-c.containerWidth&&0<e)return!c.settings.wheelPropagation}return!0}(i,a)&&e.preventDefault()}}})}t.exports=function(e){a(e,i.get(e))}});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/mouse-wheel.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/mouse-wheel",function(e,t,l){"use strict";var r=e("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/instances"),s=e("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-geometry"),c=e("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-scroll");function i(i,o){var n=!1;function e(e){l=(t=e).deltaX,r=-1*t.deltaY,void 0!==l&&void 0!==r||(l=-1*t.wheelDeltaX/6,r=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(l*=10,r*=10),l!=l&&r!=r&&(l=0,r=t.wheelDelta);var t=[l,r],l=t[0],r=t[1];!function(e,t){var l=i.querySelector("textarea:hover");if(l){var r=l.scrollHeight-l.clientHeight;if(0<r&&!(0===l.scrollTop&&0<t||l.scrollTop===r&&t<0))return 1;r=l.scrollLeft-l.clientWidth;if(0<r&&!(0===l.scrollLeft&&e<0||l.scrollLeft===r&&0<e))return 1}}(l,r)&&(n=!1,o.settings.useBothWheelAxes?o.scrollbarYActive&&!o.scrollbarXActive?(c(i,"top",r?i.scrollTop-r*o.settings.wheelSpeed:i.scrollTop+l*o.settings.wheelSpeed),n=!0):o.scrollbarXActive&&!o.scrollbarYActive&&(c(i,"left",l?i.scrollLeft+l*o.settings.wheelSpeed:i.scrollLeft-r*o.settings.wheelSpeed),n=!0):(c(i,"top",i.scrollTop-r*o.settings.wheelSpeed),c(i,"left",i.scrollLeft+l*o.settings.wheelSpeed)),s(i),(n=n||function(e,t){var l=i.scrollTop;if(0===e){if(!o.scrollbarYActive)return!1;if(0===l&&0<t||l>=o.contentHeight-o.containerHeight&&t<0)return!o.settings.wheelPropagation}if(l=i.scrollLeft,0===t){if(!o.scrollbarXActive)return!1;if(0===l&&e<0||l>=o.contentWidth-o.containerWidth&&0<e)return!o.settings.wheelPropagation}return!0}(l,r))&&(e.stopPropagation(),e.preventDefault()))}void 0!==window.onwheel?o.event.bind(i,"wheel",e):void 0!==window.onmousewheel&&o.event.bind(i,"mousewheel",e)}l.exports=function(e){i(e,r.get(e))}});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/native-scroll.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/native-scroll",function(i,r,e){"use strict";var t=i("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/instances"),l=i("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-geometry");e.exports=function(i){var r,e=t.get(i);r=i,e.event.bind(r,"scroll",function(){l(r)})}});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/selection.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/selection",function(t,e,o){"use strict";var g=t("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/helper"),p=t("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/instances"),d=t("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-geometry"),u=t("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-scroll");function n(r,t){var c=null,a={top:0,left:0};function s(){c&&(clearInterval(c),c=null),g.stopScrolling(r)}var f=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){var t;r.contains(0===(t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"").toString().length?null:t.getRangeAt(0).commonAncestorContainer)?f=!0:(f=!1,s())}),t.event.bind(window,"mouseup",function(){f&&(f=!1,s())}),t.event.bind(window,"mousemove",function(t){var e,o,n,i,l;f&&(e=t.pageX,t=t.pageY,o=r.offsetLeft,n=r.offsetLeft+r.offsetWidth,i=r.offsetTop,l=r.offsetTop+r.offsetHeight,e<o+3?(a.left=-5,g.startScrolling(r,"x")):n-3<e?(a.left=5,g.startScrolling(r,"x")):a.left=0,t<i+3?(a.top=i+3-t<5?-5:-20,g.startScrolling(r,"y")):l-3<t?(a.top=t-l+3<5?5:20,g.startScrolling(r,"y")):a.top=0,0===a.top&&0===a.left?s():c=c||setInterval(function(){p.get(r)?(u(r,"top",r.scrollTop+a.top),u(r,"left",r.scrollLeft+a.left),d(r)):clearInterval(c)},50))})}o.exports=function(t){n(t,p.get(t))}});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/touch.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/touch",function(e,t,n){"use strict";var b=e("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/instances"),P=e("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-geometry"),y=e("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-scroll");function i(a,p,e,t){function r(e,t){y(a,"top",a.scrollTop-t),y(a,"left",a.scrollLeft-e),P(a)}var c={},l=0,d={},n=null,u=!1,s=!1;function i(){u=!0}function o(){u=!1}function g(e){return e.targetTouches?e.targetTouches[0]:e}function w(e){return e.targetTouches&&1===e.targetTouches.length||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function v(e){var t;w(e)&&(s=!0,t=g(e),c.pageX=t.pageX,c.pageY=t.pageY,l=(new Date).getTime(),null!==n&&clearInterval(n),e.stopPropagation())}function f(e){var t,n,i,o;!u&&s&&w(e)&&(r(t=(i={pageX:(i=g(e)).pageX,pageY:i.pageY}).pageX-c.pageX,n=i.pageY-c.pageY),c=i,0<(o=(i=(new Date).getTime())-l)&&(d.x=t/o,d.y=n/o,l=i),function(e,t){var n=a.scrollTop,i=a.scrollLeft,o=Math.abs(e),r=Math.abs(t);if(o<r){if(t<0&&n===p.contentHeight-p.containerHeight||0<t&&0===n)return!p.settings.swipePropagation}else if(r<o&&(e<0&&i===p.contentWidth-p.containerWidth||0<e&&0===i))return!p.settings.swipePropagation;return 1}(t,n)&&(e.stopPropagation(),e.preventDefault()))}function h(){!u&&s&&(s=!1,clearInterval(n),n=setInterval(function(){!b.get(a)||Math.abs(d.x)<.01&&Math.abs(d.y)<.01?clearInterval(n):(r(30*d.x,30*d.y),d.x*=.8,d.y*=.8)},10))}e&&(p.event.bind(window,"touchstart",i),p.event.bind(window,"touchend",o),p.event.bind(a,"touchstart",v),p.event.bind(a,"touchmove",f),p.event.bind(a,"touchend",h)),t&&(window.PointerEvent?(p.event.bind(window,"pointerdown",i),p.event.bind(window,"pointerup",o),p.event.bind(a,"pointerdown",v),p.event.bind(a,"pointermove",f),p.event.bind(a,"pointerup",h)):window.MSPointerEvent&&(p.event.bind(window,"MSPointerDown",i),p.event.bind(window,"MSPointerUp",o),p.event.bind(a,"MSPointerDown",v),p.event.bind(a,"MSPointerMove",f),p.event.bind(a,"MSPointerUp",h)))}n.exports=function(e,t,n){i(e,b.get(e),t,n)}});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/initialize.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/initialize",function(r,i,e){"use strict";var t=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/class"),l=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/helper"),o=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/instances"),a=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-geometry"),s=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/click-rail"),c=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/drag-scrollbar"),d=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/keyboard"),n=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/mouse-wheel"),p=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/native-scroll"),g=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/selection"),u=r("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/handler/touch");e.exports=function(r,i){i="object"==typeof i?i:{},t.add(r,"ps-container");var e=o.add(r);e.settings=l.extend(e.settings,i),t.add(r,"ps-theme-"+e.settings.theme),s(r),c(r),n(r),p(r),e.settings.useSelectionScroll&&g(r),(l.env.supportsTouch||l.env.supportsIePointer)&&u(r,l.env.supportsTouch,l.env.supportsIePointer),e.settings.useKeyboard&&d(r),a(r)}});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update",function(l,r,i){"use strict";var a=l("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/dom"),s=l("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/lib/helper"),t=l("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/instances"),o=l("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-geometry"),c=l("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update-scroll");i.exports=function(l){var r=t.get(l);r&&(r.negativeScrollAdjustment=r.isNegativeScroll?l.scrollWidth-l.clientWidth:0,a.css(r.scrollbarXRail,"display","block"),a.css(r.scrollbarYRail,"display","block"),r.railXMarginWidth=s.toInt(a.css(r.scrollbarXRail,"marginLeft"))+s.toInt(a.css(r.scrollbarXRail,"marginRight")),r.railYMarginHeight=s.toInt(a.css(r.scrollbarYRail,"marginTop"))+s.toInt(a.css(r.scrollbarYRail,"marginBottom")),a.css(r.scrollbarXRail,"display","none"),a.css(r.scrollbarYRail,"display","none"),o(l),c(l,"top",l.scrollTop),c(l,"left",l.scrollLeft),a.css(r.scrollbarXRail,"display",""),a.css(r.scrollbarYRail,"display",""))}});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/main.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/main",function(i,r,e){var t=i("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/destroy"),a=i("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/initialize"),i=i("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/update");e.exports={initialize:a,update:i,destroy:t}});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/index.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/index",function(i,r,e){e.exports=i("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/main")});
;/*!wiki-common:widget/ui/dialogPlayer/perfectScrollbar.js*/
define("wiki-common:widget/ui/dialogPlayer/perfectScrollbar",function(i,e,o){var r=i("wiki-common:widget/util/browser"),t=i("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/index"),a=i("wiki-common:widget/lib/jquery/jquery");o.exports=function(i){var e;a(i).length&&(e=r.ie()&&r.ie()<=8,r.chrome()||r.safari()||e||t.initialize(i,{wheelSpeed:2,wheelPropagation:!0,minScrollbarLength:20,stopPropagationOnClick:!1}))}});
;/*!wiki-common:widget/ui/dialogPlayer/logMap.js*/
define("wiki-common:widget/ui/dialogPlayer/logMap",function(e,i,a){a.exports={play:"10003300",pause:"10003301",ended:"10003302",show:"10003303",hide:"10003304",change:"10003305",share:"10003306",sharebtnclick:"10003307"}});
;/*!wiki-common:widget/ui/dialogPlayer/statistical.js*/
define("wiki-common:widget/ui/dialogPlayer/statistical",function(i,o,n){var e=i("wiki-common:widget/lib/jquery/jquery"),t=i("wiki-common:widget/component/nslog/nslog"),c=i("wiki-common:widget/ui/dialogPlayer/logMap");n.exports=function(o){e.each(c,function(i,n){o.on(i,function(i,o){o=e.extend({type:n},o);t(o)})})}});
;/*!wiki-common:widget/ui/dialogPlayer/dialogPlayer.js*/
define("wiki-common:widget/ui/dialogPlayer/dialogPlayer",function(i,e,t){var l=i("wiki-common:widget/lib/jquery/jquery"),a=i("wiki-common:widget/lib/larkplayer/larkplayer"),n=i("wiki-common:widget/ui/dialog/dialog"),s=i("wiki-common:widget/lib/jsmart/jsmart"),r=i("wiki-common:widget/ui/dialogPlayer/dataManager"),d=i("wiki-common:widget/ui/dialogPlayer/shareBubble/shareBubble"),o=i("wiki-common:widget/ui/dialogPlayer/perfectScrollbar"),c=i("wiki-common:widget/ui/dialogPlayer/constants"),h=i("wiki-common:widget/ui/dialogPlayer/eventful"),p=i("wiki-common:widget/ui/dialogPlayer/statistical"),_=c.ClassNames,u=c.Events,m=c.DataFlag;function g(i){i=this.normalize_(i),this.options=i,this.detailTpl=new s('<div class="dpr-detail">\n<div class="dpr-detail__title" title="{%$title|f_escape_xml%}">{%$title|f_escape_xml%}</div>\n<div class="dpr-detail__play-num J-dpr-detail__play-num">\n</div>\n<div class="dpr-detail__share-btn J-dpr-detail__share-btn {%if $share && $share.url && $share.title && $share.pic%}dpr-detail__share-btn--show{%/if%}"><em class="cmn-icon cmn-icons cmn-icons_share"></em></div>\n</div>'),this.listTpl=new s('<div class="dpr-list">\n<div class="dpr-list__title">更多视频<span class="dpr-list__title__total">{%$list|count|f_escape_xml%}个</span></div>\n<div class="dpr-list__el-container J-dpr-list__el-container {%if $list|count > 3%}dpr-list__el-container--scroll{%/if%}">\n{%foreach $list as $index => $item%}\n<div class="dpr-list-el J-dpr-list-el {%if $item.__playing%}dpr-list-el-playing{%/if%}" data-index="{%$item@index|f_escape_xml%}">\n<div class="dpr-list-el__poster" {%if $item.poster%}style="background-image: url({%$item.poster|f_escape_xml%})"{%/if%}>\n<div class="dpr-list-el__playing">正在播放</div>\n</div>\n<div class="dpr-list-el__title" title="{%$item.title|f_escape_xml%}">{%$item.title|f_escape_xml%}</div>\n</div>\n{%/foreach%}\n</div>\n</div>'),this.containerTpl=new s('<div class="dialog-player-container {%if $list|count === 1%}dialog-player-container--single-video{%/if%}">\n<div class="dpr-left-container">\n<div class="dpr-player-container">\n<div id="J-dpr-player"></div>\n</div>\n<div class="dpr-detail-container J-dpr-detail-container"></div>\n</div>\n{%if $list|count > 1%}\n<div class="dpr-list-container J-dpr-list-container"></div>\n{%/if%}\n</div>'),this.playNumTpl=new s('<em class="cmn-icon cmn-icons cmn-icons_eye dpr-detail__play-num__icon"></em>\n<span>{%$playNum|f_escape_xml%}</span>'),this.dataManager=new r({list:i.list,initialIndex:i.initialIndex}),h(this),this.initialDialog_(i),this.initialPlayer_(i),this.initialShareBubble_(),o(l(".J-dpr-list__el-container").get(0)),this.$el=l(".dialog-player-container"),this.$listEl=this.$el.find(".J-dpr-list-container"),this.$detailEl=this.$el.find(".J-dpr-detail-container"),this.render_=this.render_.bind(this),this.syncRenderPlayNum_=this.syncRenderPlayNum_.bind(this),this.dataManager.setPlayingModel(i.initialIndex),this.initialEvents_(),p(this)}g.prototype={constructor:g,show:function(){this.dialog.show()},hide:function(){this.dialog.hide()},play:function(i){var e;void 0!==i&&(e=this.dataManager.getPlayingModel())&&e[m.INDEX]!==i&&this.dataManager.setPlayingModel(i),this.show(),this.player.play()},pause:function(){this.player.pause()},requestFullscreen:function(){this.player.requestFullscreen()},exitFullscreen:function(){this.player.exitFullscreen()},normalize_:function(i){return i.classNames=_.DEFAULT_DIALOG_CLASS_NAMES+" "+(i.classNames||""),i.width=685,i.height=390,i.initialIndex=Math.min(parseInt(i.initialIndex,10)||0,i.list.length-1),i.asyncRenderPlayNum=!1!==i.asyncRenderPlayNum,i},initialEvents_:function(){var t=this;this.$el.on("click",".J-dpr-list-el",function(){t.dataManager.setPlayingModel(parseInt(l(this).attr("data-index"),10))}),this.bubble.on(u.SHARE,function(i,e){t.trigger(u.SHARE,e)}),this.bubble.on(u.SHARE_BTN_CLICK,function(){t.trigger(u.SHARE_BTN_CLICK)}),this.dataManager.on(u.CHANGE,function(i,e){t.render_(),t.trigger(u.CHANGE,e)})},buildHtml_:function(i){var i=this.dataManager.get(i.initialIndex),e=this.dataManager.getAll(),i=this.detailTpl.fetch(i),t=this.listTpl.fetch({list:e}),e=this.containerTpl.fetch({list:e}),e=l("<div>").html(e),a=e.find(".J-dpr-list-container"),n=e.find(".J-dpr-detail-container");return a.html(t),n.html(i),e.html()},initialDialog_:function(i){var e=this,i=(this.dialog=new n({classNames:i.classNames,hasCloseBtn:!0,content:this.buildHtml_(i),onShow:function(){e.trigger(u.SHOW)},onHide:function(){e.pause(),e.trigger(u.HIDE)}}),this.dataManager.get(i.initialIndex));this.renderPlayNum_(i)},renderPlayNum_:function(i){this.options.asyncRenderPlayNum?this.asyncRenderPlayNum_(i.secondId):this.syncRenderPlayNum_(i.playNum)},syncRenderPlayNum_:function(i){i=this.playNumTpl.fetch({playNum:i});this.$el||(this.$el=l(".dialog-player-container")),this.$el.find(".J-dpr-detail__play-num").html(i)},asyncRenderPlayNum_:function(i){var e=this;l.get("/api/second/dynamic/view?type=get&secondId="+i,function(i){0===i.errno&&e.syncRenderPlayNum_(i.data&&i.data.viewCounts||0)})},initialPlayer_:function(i){var e=this.dataManager.get(i.initialIndex),t=(this.player=a("J-dpr-player",{src:e.src,secondId:e.secondId,poster:e.poster,width:i.width,height:i.height}),this),e={play:u.PLAY,pause:u.PAUSE,ended:u.ENDED,timeupdate:u.TIME_UPDATE};l.each(e,function(i,e){t.player.on(i,function(){t.trigger(e)})}),i.autoNext&&this.player.on("ended",function(){var i=t.dataManager.next();i&&t.dataManager.setPlayingModel(i)})},initialShareBubble_:function(){var e=this;this.bubble=new d({host:l("."+_.SHAER_BTN_CLASS_NAME),shareData:e.generateShareData_(),classNames:"dialog-player-share-bubble",beforeShare:function(){var i=e.generateShareData_();i&&e.bubble.update(i)}})},generateShareData_:function(){var i=this.dataManager.getPlayingModel();return i&&i.share&&i.share.url&&i.share.title&&i.share.pic?i.share:null},render_:function(){var i=this.dataManager.getPlayingModel();this.renderPlayer_(i),this.renderList_(i[m.INDEX]),this.renderDetail_(i)},renderPlayer_:function(i){this.player.poster(i.poster),i.src&&(this.player.src(i.src),this.player.play())},renderList_:function(i){this.$listEl.find(".J-dpr-list-el").removeClass(_.PLAYING),this.$listEl.find('.J-dpr-list-el[data-index="'+i+'"]').addClass(_.PLAYING)},renderDetail_:function(i){var e=this.detailTpl.fetch(i);this.$detailEl.html(e),this.bubble.setHost(this.$detailEl.find("."+_.SHAER_BTN_CLASS_NAME)),this.renderPlayNum_(i)}},t.exports=g});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/adaptor/global.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/adaptor/global",function(i,e,r){"use strict";i=i("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/main");"function"==typeof define&&define.amd?define(i):(window.PerfectScrollbar=i,void 0===window.Ps&&(window.Ps=i))});
;/*!wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/adaptor/jquery.js*/
define("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/adaptor/jquery",function(i,e,t){"use strict";var r=i("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/main"),o=i("wiki-common:widget/ui/dialogPlayer/third_party/perfect-scrollbar/src/js/plugin/instances");function n(t){t.fn.perfectScrollbar=function(e){return this.each(function(){var i;return"object"==typeof e||void 0===e?(i=e,o.get(this)||r.initialize(this,i)):"update"===(i=e)?r.update(this):"destroy"===i&&r.destroy(this),t(this)})}}"function"==typeof define&&define.amd?define(["jquery"],n):void 0!==(i=window.jQuery||window.$)&&n(i),t.exports=n});
;/*!wiki-common:widget/ui/flip/flip.js*/
define("wiki-common:widget/ui/flip/flip",function(t,i,e){var s=t("wiki-common:widget/lib/jquery/jquery"),o=t("wiki-common:widget/util/checkCSS"),f=t("wiki-common:widget/util/animation"),l=o("transform"),r=o("perspective"),h=o("backface-visibility"),c=o("transform-style"),u=o("opacity");function a(t){t=t||{};this.$flipHost=t.flipHost,this.$front=this.$flipHost.children(".wgt-flip-front"),this.$back=this.$flipHost.children(".wgt-flip-back"),this.$flipHost.css(s.extend({position:"static"==this.$flipHost.css("position")?"relative":this.$flipHost.css("position")},l&&r&&h&&c?{transformStyle:"preserve-3d"}:{})),this.$front.css(s.extend({position:"absolute",left:0,top:0,width:"100%",height:"100%"},l&&r&&h&&c?{backfaceVisibility:"hidden"}:{})),this.$back.css(s.extend({position:"absolute",left:0,top:0,width:"100%",height:"100%"},l&&r&&h&&c?{backfaceVisibility:"hidden",transform:"rotateY(180deg)"}:{opacity:0})),this.orientation=/^VER|HOR$/i.test(t.orientation)?RegExp.$_.toUpperCase():"HOR",this.rotate="HOR"==this.orientation?"rotateY":"rotateX",this.duration="number"==typeof t.duration?t.duration:500,this.easing="string"==typeof t.easing?t.easing:"linear",this.callback="function"==typeof t.callback?t.callback:function(){},this.ifUseQueue="boolean"!=typeof t.ifUseQueue||t.ifUseQueue,this.flipStatus="STOP",this.flipQueue=[]}function d(t,i,e,s,o){"FLIP"==t&&(i=(this[this.rotate]||0)+i);var a=this[this.rotate]||0,n=i-a,p=this;this.flipAni=f({duration:e,easing:s,onStep:function(t){var i;l&&r&&h&&c?(p.$flipHost.css({transform:"perspective(1280px) "+p.rotate+"("+(a+t*n)+"deg)"}),i=p.$flipHost.attr("style"),"HOR"==p.orientation?p[p.rotate]=parseFloat(i.match(/rotateY\(-?\d*\.?\d*e?-?\d*deg\)/)[0].replace(/[a-z]|\(|\)/gi,"")):p[p.rotate]=parseFloat(i.match(/rotateX\(-?\d*\.?\d*e?-?\d*deg\)/)[0].replace(/[a-z]|\(|\)/gi,""))):(p.$front.css({opacity:Math.abs(180-a-t*n)%360/180}),p.$back.css({opacity:Math.abs(a+t*n)%360/180}),p[p.rotate]=180*parseFloat(p.$back.css(u)))},onComplete:function(t){p.flipQueue.shift(),0<p.flipQueue.length?d.apply(p,p.flipQueue[0]):p.flipStatus="STOP",p.callback()}})}a.prototype={constructor:a,flip:function(t,i,e,s){var o,a=[];for(o in arguments)isNaN(o)||a.push(arguments[o]);a.unshift("FLIP"),this.flipTo.apply(this,a)},flipTo:function(){var t,i=[];for(t in arguments)isNaN(t)||i.push(arguments[t]);new RegExp(/^FLIP$|^FLIPTO$/).test(arguments[0])||i.unshift("FLIPTO");var e=i[0],s="number"==typeof i[1]?i[1]:180,o="number"==typeof i[2]?i[2]:this.duration,a="string"==typeof i[3]?i[3]:this.easing,n="function"==typeof i[4]?i[4]:this.callback;this.flipQueue.push([e,s,o,a,n]),"STOP"==this.flipStatus?(this.flipStatus="FLIPING",d.apply(this,this.flipQueue[0])):"FLIPING"!=this.flipStatus||this.ifUseQueue||(this.flipQueue.shift(),this.flipAni.stop(),d.apply(this,this.flipQueue[0]))}},e.exports=a});
;/*!wiki-common:widget/ui/iqiyiPlayer/iqiyiPlayer.js*/
define("wiki-common:widget/ui/iqiyiPlayer/iqiyiPlayer",function(i,e,t){var a=i("wiki-common:widget/lib/jquery/jquery"),n=i("wiki-common:widget/lib/swfObject/swfObject"),o=i("wiki-common:widget/util/safeCall"),l=i("wiki-common:widget/util/guid"),s=i("wiki-common:widget/util/string").jsonStringify;function r(){var i=a('<em class="swf-place-holder" id="swfPlaceHolder_'+this.idSuffix+'"></em>').appendTo(this.container.empty()),e=this;n.embedSWF("https://gss0.bdstatic.com/-LsZfDe52w9JkxG9m9iS_HFjgAkrreHg-_/disp/shareplayer.swf",i[0],"100%","100%",10,"http://www.macromedia.com/go/getflashplayer",a.extend({autoPlay:0,autoChainPlay:0,showSearch:0,showSearchBox:0,showControl:1,autoHideControl:1,showRecommend:0,showFocus:0,showShare:0,showLogo:1,isLoop:0,cyclePlay:0,coop:"coop_baiduBaike",cid:"qc_100001_300089",bd:1,showDock:0},this.initArgs.playerConfig||{}),a.extend({allowscriptaccess:"always",wmode:"Opaque",allowfullscreen:"false",bgcolor:"#000000"},this.initArgs.swfConfig||{}),{class:"wgt_iqiyiplayer",id:"wgtIqiyiPlayer_"+this.idSuffix},function(i){i&&i.success&&(e.player=i.ref)})}function y(i){if(!i)throw new Error("[IqiyiPlayer Exception]: No arguments.");if(!a(i.container).length)throw new Error('[IqiyiPlayer Exception]: Invalid argument "container".');var e=this;this.container=a(i.container),this.idSuffix=l(),this.playState="STOP",this.initArgs=i,this.onPlayerReady="function"==a.type(i.onPlayerReady)?i.onPlayerReady:null,this.onPlayStart="function"==a.type(i.onPlayStart)?i.onPlayStart:null,this.onPlayPause="function"==a.type(i.onPlayPause)?i.onPlayPause:null,this.onPlayEnd="function"==a.type(i.onPlayEnd)?i.onPlayEnd:null,this.onPlayerStateChange="function"==a.type(i.onPlayerStateChange)?i.onPlayerStateChange:null,r.call(this),window.lib={swf:{notice:function(i){if(i)if("playerLoadSuccess"==(i=a.parseJSON(i)).type)o(e.onPlayerReady,null,e);else if("playerStateChange"==i.type){switch(i.data.state){case"Playing":e.playState="PLAY",o(e.onPlayStart,null,e);break;case"Paused":e.playState="PAUSE",o(e.onPlayPause,null,e);break;case"EndPlay":e.playState="STOP",o(e.onPlayEnd,null,e)}o(e.onPlayerStateChange,i.data.state,e)}}}}}y.prototype={constructor:y,play:function(i,e){i&&e?(i={vid:i,tvId:e},this.initArgs.playerConfig=this.initArgs.playerConfig||{},a.extend(this.initArgs.playerConfig,i),this.player&&this.player.loadQiyiVideo(s(i))):"PAUSE"==this.playState?this.player&&this.player.resumeQiyiVideo():"STOP"==this.playState&&this.initArgs.playerConfig&&(this.initArgs.playerConfig.autoPlay=1,r.call(this))},pause:function(){this.player&&this.player.pauseQiyiVideo()}},t.exports=y});
;/*!wiki-common:widget/ui/marquee/marquee.js*/
define("wiki-common:widget/ui/marquee/marquee",function(t,i,e){var h=t("wiki-common:widget/lib/jquery/jquery"),s=t("wiki-common:widget/util/safeCall"),n=t("wiki-common:widget/util/animation");function o(t){!function(t){if(!t)throw new Error("[Marquee Exception]: No arguments.");if(!h(t.container).length)throw new Error('[Marquee Exception]: Invalid argument "container".');if(this.container=h(t.container),this.units=h(".wgt_marquee_unit",this.container),this.unitCount=this.units.length,this.direction=/^(?:top|right|bottom|left)$/i.test(t.direction)?RegExp.$_.toLowerCase():"left",this.isPositive=/^(?:left|top)$/.test(this.direction),this.isVertical=/^(?:top|bottom)$/.test(this.direction),this.keyProperty=this.isPositive?this.isVertical?"top":"left":this.isVertical?"bottom":"right",this.isVarWidth="boolean"==typeof t.isVarWidth&&t.isVarWidth,this.isVarWidth){if("object"!=h.type(t.viewportSize))throw new Error('[Marquee Exception]: Invalid argument "viewportSize".');this.viewportSize=t.viewportSize,this.unitSize="array"==h.type(t.unitSize)&&t.unitSize.length==this.unitCount?t.unitSize:[]}else{var i=h(this.units[0]);this.unitSize=h.extend({width:i.outerWidth(),height:i.outerHeight()},"object"!=h.type(t.unitSize)||h.isEmptyObject(t.unitSize)?null:t.unitSize),this.viewportCap=isNaN(parseInt(t.viewportCap))?1:Math.abs(parseInt(t.viewportCap)),this.scrollStep=isNaN(parseInt(t.scrollStep))?this.viewportCap:Math.max(Math.min(parseInt(t.scrollStep),this.viewportCap),1),this.scrollLen=(this.isVertical?this.unitSize.height:this.unitSize.width)*this.scrollStep,this.isContinuous="boolean"==typeof t.isContinuous&&t.isContinuous}var e,s;this.endBehavior=/^REVERSE|RESUME$/i.test(t.endBehavior)?RegExp.$_.toUpperCase():"REVERSE",this.isBackward=!1,this.pausingTriggers=[this.container[0]],t.pausingTriggers&&(t.pausingTriggers=[].concat(t.pausingTriggers),e=this,s=!1,h(t.pausingTriggers).each(function(t,i){i=h(i);i.length&&i[0]!=e.container[0]&&(h.contains(e.container[0],i[0])||h.contains(i[0],e.container[0])?h.contains(i[0],e.container[0])&&(e.pausingTriggers.push(i[0]),s=!0):e.pausingTriggers.push(i[0]))}),s&&e.pausingTriggers.splice(0,1)),this.autoScrollInterval=isNaN(parseInt(t.autoScrollInterval))?4e3:Math.abs(parseInt(t.autoScrollInterval)),this.autoScrollTimer=null,this.onAniStart="function"==h.type(t.onAniStart)?t.onAniStart:null,this.onAniComplete="function"==h.type(t.onAniComplete)?t.onAniComplete:null,this.duration=isNaN(parseInt(t.duration))?2e3:Math.abs(parseInt(t.duration)),this.easing=void 0,this.aniQueue=[],this.aniState="STOP",this.tick=0,this.maxTick=0,this.targetTick=0,this.aniEngine=null}.call(this,t),this.isVertical||(this.isPositive?this.units.each(function(){h(this).css("float","left")}):this.units.each(function(){h(this).css("float","right")}));var i=[];if(this.isVarWidth){this.unitSize.length||(e=this).units.each(function(){var t=h(this);e.unitSize.push({width:t.outerWidth(),height:t.outerHeight()})});var e,s=0,n=0,o=this.isVertical?"height":"width";for(this.keySizePropertySum=0,this.scrollStops=[0];n<this.unitSize.length;)s+this.unitSize[n][o]<=this.viewportSize[o]?(this.keySizePropertySum+=this.unitSize[n][o],s+=this.unitSize[n++][o]):s?(this.scrollStops.push(this.scrollStops[this.scrollStops.length-1]+s),s=0):(this.keySizePropertySum+=this.unitSize[n][o],this.scrollStops.push(this.scrollStops[this.scrollStops.length-1]+this.unitSize[n++][o]));this.maxTick=this.scrollStops.length-1,i=i.concat(this.units),this.container.css(this.isVertical?{width:this.unitSize[0].width+"px",height:this.keySizePropertySum+"px"}:{width:this.keySizePropertySum+"px",height:this.unitSize[0].height+"px"})}else{if(this.isContinuous){for(var r=function(t,i){for(var e=Math.max(t,i),s=Math.min(t,i),n=e;n%s;)n+=e;return n}(this.scrollStep,this.unitCount)+this.viewportCap;i.length<r;)i=i.concat(this.units.clone().toArray());i.splice(r)}else i=this.units.toArray();this.unitCount=i.length,this.maxTick=Math.ceil((this.unitCount-this.viewportCap)/this.scrollStep),this.container.css(this.isVertical?{width:this.unitSize.width+"px",height:this.unitSize.height*this.unitCount+"px"}:{width:this.unitSize.width*this.unitCount+"px",height:this.unitSize.height+"px"})}this.isVertical&&!this.isPositive&&i.reverse(),function(){var i=null,e=!1,s=this;h(this.pausingTriggers).on("mouseenter.marquee",function(t){i=setTimeout(function(){e=!(!s.autoScrollTimer||!s.autoScrollInterval),i=null,s.stop()},200)}).on("mouseleave.marquee",function(t){!i&&e&&s.autoScroll(),clearTimeout(i),i=null})}.call(this),this.container.css(this.keyProperty,0).css("position","absolute").empty().append(i),this.autoScrollInterval&&this.autoScroll()}o.prototype={constructor:o,autoScroll:function(){var t=this;this.autoScrollTimer=setTimeout(function(){t.scroll(t.isBackward?-1:void 0)},this.autoScrollInterval)},scroll:function(t){var i=this;!1===t||this.autoScrollTimer&&this.autoScrollInterval&&0==this.aniQueue[0]||this.aniQueue.push(t),"STOP"==this.aniState&&(clearTimeout(this.autoScrollTimer),t=this.aniQueue.shift(),this.targetTick=isNaN(parseInt(t))?this.tick+1:t<0?this.tick-1:t,this.targetTick<0&&(this.isContinuous?(this.tick=this.maxTick,this.targetTick=this.maxTick-1,this.container.css(this.keyProperty,-this.maxTick*this.scrollLen+"px")):this.targetTick=0),this.targetTick>this.maxTick&&(this.isContinuous?(this.tick=0,this.targetTick=1,this.container.css(this.keyProperty,0)):this.targetTick=this.maxTick),this.targetTick!=this.tick&&(this.aniEngine?this.aniEngine.resume():this.aniEngine=n({duration:this.duration,easing:this.easing,onStart:function(){i.aniState="SCROLL",s(i.onAniStart,null,i)},onStep:function(t){i.isVarWidth?i.container.css(i.keyProperty,-(i.scrollStops[i.tick]+t*(i.scrollStops[i.targetTick]-i.scrollStops[i.tick]))+"px"):i.container.css(i.keyProperty,-(i.tick+t*(i.targetTick-i.tick))*i.scrollLen+"px")},onComplete:function(){i.aniState="STOP",i.tick=i.targetTick,s(i.onAniComplete,null,i),i.aniQueue.length?i.scroll(!1):i.isContinuous?i.autoScrollTimer&&i.autoScrollInterval&&i.autoScroll():"RESUME"==i.endBehavior&&i.tick==i.maxTick?(i.aniQueue.push(0),setTimeout(function(){i.autoScrollTimer&&i.autoScrollInterval&&i.scroll(!1)},i.autoScrollInterval)):("REVERSE"==i.endBehavior&&(i.isBackward&&0==i.tick||!i.isBackward&&i.tick==i.maxTick)&&(i.isBackward=!i.isBackward),i.autoScrollTimer&&i.autoScrollInterval&&i.autoScroll())}})))},stop:function(t){var i,e=this;clearTimeout(this.autoScrollTimer),this.autoScrollTimer=null,"SCROLL"==this.aniState&&t?(i=this.onAniComplete,this.onAniComplete=function(){s(i,null,e),s(t,null,e),e.onAniComplete=i,i=null}):s(t,null,e)},destroy:function(){h(this.pausingTriggers).off(".marquee"),this.container.empty().append(this.units)}},e.exports=o});
;/*!wiki-common:widget/ui/pager/pagerBase.js*/
define("wiki-common:widget/ui/pager/pagerBase",function(t,n,o){var a=t("wiki-common:widget/lib/jquery/jquery"),e=t("wiki-common:widget/util/safeCall");function i(t){if(!a(t.pContainer).length)throw new Error('[PagerBase Exception]: Invalid argument "pContainer".');if(isNaN(parseInt(t.conTotalCount))||parseInt(t.conTotalCount)<1)throw new Error('[PagerBase Exception]: Invalid argument "conTotalCount".');if(t.onIndexChange&&"function"!=typeof t.onIndexChange)throw new Error('[PagerBase Exception]: Invalid argument "onIndexChange".');this.conTotalCount=parseInt(t.conTotalCount)||0,this.pContainer=a(t.pContainer),this.conPerPage=parseInt(t.conPerPage)||this.conTotalCount,this.pTotalCount=Math.ceil(this.conTotalCount/this.conPerPage)||0,this.pMaxCount=parseInt(t.pMaxCount)||this.pTotalCount,this.containsEndTags="boolean"!=typeof t.containsEndTags||t.containsEndTags,this.pCount=Math.min(t.pMaxCount,this.pTotalCount)||this.pTotalCount,this.curIndex=parseInt(t.curIndex)||1,this.stopEvt="boolean"==typeof t.stopEvt&&t.stopEvt,this.extData=t.extData||null}function s(){var t,n;switch(this.curIndex=isNaN(parseInt(this.curIndex))?1:Math.max(1,Math.min(parseInt(this.curIndex),this.pTotalCount)),this.pCount){case 1:t=n=this.curIndex;break;case 2:n=(t=this.curIndex==this.pTotalCount?this.pTotalCount-1:this.curIndex)+1;break;default:t=this.curIndex-Math.ceil(this.pCount/2)+1,n=this.containsEndTags?(t=Math.max(1,Math.min(t,this.pTotalCount-this.pCount+1)),Math.min(t+this.pCount-1,this.pTotalCount)):(t=Math.max(2,Math.min(t,this.pTotalCount-this.pCount)),Math.min(t+this.pCount-1,this.pTotalCount-1))}var o={curIndex:this.curIndex,pTotalCount:this.pTotalCount,pCount:this.pCount,pagers:{},extData:this.extData};if(o.pagers.prev={index:Math.max(this.curIndex-1,1),state:1==this.curIndex?"disabled":"normal"},o.pagers.next={index:Math.min(this.curIndex+1,this.pTotalCount),state:this.curIndex==this.pTotalCount?"disabled":"normal"},o.pagers.first={index:1,state:1==this.curIndex?"cur":"normal"},o.pagers.last={index:this.pTotalCount,state:this.curIndex==this.pTotalCount?"cur":"normal"},this.containsEndTags||!(this.pCount<3)){o.pagers.normal=[];for(var a=t;a<=n;++a)o.pagers.normal.push({index:a,state:this.curIndex==a?"cur":"normal"})}return o}function r(t){var n=this;t&&(i.call(this,t),a(this.pContainer).on("click.pagerBase","[p-index]",function(t){n.curIndex=parseInt(a(this).attr("p-index")),n.stopEvt&&a.stopPropagation(),n.onIndexChange&&e(n.onIndexChange,[s.call(n),t],n)}))}r.prototype={constructor:r,getPagers:function(t){return this.curIndex=isNaN(parseInt(t))?this.curIndex:parseInt(t),s.call(this)},getCurIndex:function(){return this.curIndex},getPTotalCount:function(){return this.pTotalCount},baseReset:function(t){if(!t)throw new Error("[PagerBase Exception]: Invalid reset arguments.");t.pContainer=this.pContainer,t.conTotalCount=(void 0===t.conTotalCount?this:t).conTotalCount,t.conPerPage=(void 0===t.conPerPage?this:t).conPerPage,t.pMaxCount=(void 0===t.pMaxCount?this:t).pMaxCount,t.containsEndTags=("boolean"==typeof t.containsEndTags?t:this).containsEndTags,t.curIndex=(void 0===t.curIndex?this:t).curIndex,t.stopEvt=("boolean"==typeof t.stopEvt?t:this).stopEvt,t.onIndexChange=("function"==a.type(t.onIndexChange)?t:this).onIndexChange,i.call(this,t),this.curIndex=Math.min(t.curIndex,this.pTotalCount)},baseDestroy:function(){a(this.pContainer).off("click.pagerBase")}},o.exports=r});
;/*!wiki-common:widget/ui/pager/horPager/horPager.js*/
define("wiki-common:widget/ui/pager/horPager/horPager",function(e,a,s){e("wiki-common:widget/lib/jquery/jquery");var t=e("wiki-common:widget/ui/pager/pagerBase"),i=e("wiki-common:widget/lib/jsmart/jsmart"),n=e("wiki-common:widget/util/safeCall");function r(e){return e.replace(/\s*<!--[\s\S]*?-->\s*/g,"")}var p={default:r('\n<a href="javascript:;" class="pTag prev{%if $pagers.prev.state == "disabled"%} disabled{%/if%}"{%if $pagers.prev.state != "disabled"%} p-index="{%$pagers.prev.index|f_escape_xml%}"{%/if%}>上一页</a>\n<a href="javascript:;" class="pTag{%if $pagers.first.state == "cur"%} cur{%/if%}"{%if $pagers.first.state != "cur"%} p-index="{%$pagers.first.index|f_escape_xml%}"{%/if%}>{%$pagers.first.index|f_escape_xml%}</a>\n{%if $pagers.normal && $pagers.normal[0].index > 2%}\n<span class="ellipsis">&hellip;</span>\n{%/if%}\n{%foreach $pagers.normal as $pager%}\n{%if $pager.index > 1 && $pager.index < $pTotalCount%}\n<a href="javascript:;" class="pTag{%if $pager.state == "cur"%} cur{%/if%}"{%if $pager.state != "cur"%} p-index="{%$pager.index|f_escape_xml%}"{%/if%}>{%$pager.index|f_escape_xml%}</a>\n{%/if%}\n{%/foreach%}\n{%if $pagers.normal && $pagers.normal[$pagers.normal|count - 1].index < $pTotalCount - 1%}\n<span class="ellipsis">&hellip;</span>\n{%/if%}\n{%if $pCount > 1%}\n<a href="javascript:;" class="pTag{%if $pagers.last.state == "cur"%} cur{%/if%}"{%if $pagers.last.state != "cur"%} p-index="{%$pagers.last.index|f_escape_xml%}"{%/if%}>{%$pagers.last.index|f_escape_xml%}</a>\n{%/if%}\n<a href="javascript:;" class="pTag next{%if $pagers.next.state == "disabled"%} disabled{%/if%}"{%if $pagers.next.state != "disabled"%} p-index="{%$pagers.next.index|f_escape_xml%}"{%/if%}>下一页</a>'),noEllipsis:r('\n<a href="javascript:;" class="pTag first{%if $pagers.first.state == "cur"%} disabled{%/if%}"{%if $pagers.first.state != "cur"%} p-index="{%$pagers.first.index|f_escape_xml%}"{%/if%}>首页</a>\n<span class="separator{%if $pagers.first.state == "cur"%} disabled{%/if%}"></span>\n<a href="javascript:;" class="pTag prev{%if $pagers.prev.state == "disabled"%} disabled{%/if%}"{%if $pagers.prev.state != "disabled"%} p-index="{%$pagers.prev.index|f_escape_xml%}"{%/if%}><em>&lt;</em>上一页</a>\n<span class="separator{%if $pagers.prev.state == "disabled"%} disabled{%/if%}"></span>\n{%foreach $pagers.normal as $pager%}\n<a href="javascript:;" class="pTag{%if $pager.state == "cur"%} cur{%/if%}"{%if $pager.state != "cur"%} p-index="{%$pager.index|f_escape_xml%}"{%/if%}>{%$pager.index|f_escape_xml%}</a>\n{%/foreach%}\n<span class="separator{%if $pagers.next.state == "disabled"%} disabled{%/if%}"></span>\n<a href="javascript:;" class="pTag next{%if $pagers.next.state == "disabled"%} disabled{%/if%}"{%if $pagers.next.state != "disabled"%} p-index="{%$pagers.next.index|f_escape_xml%}"{%/if%}>下一页<em>&gt;</em></a>\n<span class="separator{%if $pagers.last.state == "cur"%} disabled{%/if%}"></span>\n<a href="javascript:;" class="pTag last{%if $pagers.last.state == "cur"%} disabled{%/if%}"{%if $pagers.last.state != "cur"%} p-index="{%$pagers.last.index|f_escape_xml%}"{%/if%}>尾页</a>'),arrowOnly:r('\n<span class="pNum"><em>{%$curIndex|f_escape_xml%}</em>/{%$pTotalCount|f_escape_xml%}</span>\n<span class="pTagBox">\n<a href="javascript:;" class="pTag prev{%if $pagers.prev.state == "disabled"%} disabled{%/if%}"{%if $pagers.prev.state != "disabled"%} p-index="{%$pagers.prev.index|f_escape_xml%}"{%/if%}>&lt;</a>\n<a href="javascript:;" class="pTag next{%if $pagers.next.state == "disabled"%} disabled{%/if%}"{%if $pagers.next.state != "disabled"%} p-index="{%$pagers.next.index|f_escape_xml%}"{%/if%}>&gt;</a>\n</span>'),dot:r('\n{%foreach $pagers.normal as $pager%}\n<a href="javascript:;" class="pTag{%if $pager.state == "cur"%} cur{%/if%}"{%if $pager.state != "cur"%} p-index="{%$pager.index|f_escape_xml%}"{%/if%}><em class="cmn-icon cmn-icons cmn-icons_circle"></em></a>\n{%/foreach%}')};function o(e){!function(s){if(!s)throw new Error("[HorPager Exception]: No arguments.");if(s.onIndexChange&&"function"!=typeof s.onIndexChange)throw new Error('[HorPager Exception]: Invalid argument "onIndexChange".');this.showSinglePage="boolean"!=typeof s.showSinglePage||s.showSinglePage,this.autoRefresh="boolean"!=typeof s.autoRefresh||s.autoRefresh,this.template=new i(s.template?/^pagerTpl_(.+)$/.test(s.template)?p[RegExp.$1]||p.default:s.template:p.default),this.onIndexChange=function(e,a){this.autoRefresh&&this.show(),n(s.onIndexChange,[this.curIndex,a],this)}}.call(this,e),t.call(this,e),this.pContainer.addClass("wgt_horPager"),this.pContainer.addClass(e.template?/^pagerTpl_(.+)$/.test(e.template)?"wgt_horPager_tpl_"+(p[RegExp.$1]?RegExp.$1:"default"):"":"wgt_horPager_tpl_default"),this.show=function(e){var a=this;setTimeout(function(){1!=a.pTotalCount||a.showSinglePage?(a.pContainer.show(),a.pContainer.html(a.template.fetch(a.getPagers(a.curIndex)))):a.hide()},0)},this.hide=function(){this.pContainer.hide()},this.getHTML=function(e){return 1!=this.pTotalCount||this.showSinglePage?this.template.fetch(this.getPagers(e)):""},this.reset=function(s){if(s){if(s.onIndexChange&&"function"!=typeof s.onIndexChange)throw new Error('[HorPager Exception]: Invalid reset argument "onIndexChange".');s.pContainer=this.pContainer,s.conTotalCount=(void 0===s.conTotalCount?this:s).conTotalCount,s.conPerPage=(void 0===s.conPerPage?this:s).conPerPage,s.pMaxCount=(void 0===s.pMaxCount?this:s).pMaxCount,s.curIndex=(void 0===s.curIndex?this:s).curIndex,s.showSinglePage=void 0===s.showSinglePage?this.showSinglePage:"boolean"!=typeof s.showSinglePage||s.showSinglePage,s.stopEvt=("boolean"==typeof s.stopEvt?s:this).stopEvt,s.autoRefresh=("boolean"==typeof s.autoRefresh?s:this).autoRefresh,this.template=s.template||this.template,this.onIndexChange=s.onIndexChange?function(e,a){this.autoRefresh&&this.show(),n(s.onIndexChange,[this.curIndex,a],this)}:this.onIndexChange,this.baseReset(s),this.autoRefresh&&this.show()}},this.destroy=function(){this.pContainer.empty(),this.baseDestroy()}}o.prototype=new t,s.exports=o});
;/*!wiki-common:widget/ui/picUploader/Jcrop/Jcrop.js*/
define("wiki-common:widget/ui/picUploader/Jcrop/Jcrop",function(e,t,n){n.exports=function(Ze){Ze.Jcrop=function(e,t){var w=Ze.extend({},Ze.Jcrop.defaults),A=navigator.userAgent.toLowerCase(),R=/msie/.test(A),A=/msie [1-6]\./.test(A);function i(e){return Math.round(e)+"px"}function r(e){return w.baseClass+"-"+e}function c(e){e=Ze(e).offset();return[e.left,e.top]}function n(e){return[e.pageX-m[0],e.pageY-m[1]]}function T(e){w=Ze.extend(w,e="object"!=typeof e?{}:e),Ze.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof w[t]&&(w[t]=function(){})})}function K(e,t,n){if(m=c(u),B.setCursor("move"===e?e:e+"-resize"),"move"===e)return B.activateHandlers((o=t,qe.watchKeys(),function(e){M.moveOffset([e[0]-o[0],e[1]-o[1]]),o=e,I.update()}),L,n);var o,i,r,t=M.getFixed(),a=E(e),s=M.getCorner(E(a));M.setPressed(M.getCorner(a)),M.setCurrent(s),B.activateHandlers((i=e,r=t,function(e){if(w.aspectRatio)switch(i){case"e":case"w":e[1]=r.y+1;break;case"n":case"s":e[0]=r.x+1}else switch(i){case"e":case"w":e[1]=r.y2;break;case"n":case"s":e[0]=r.x2}M.setCurrent(e),I.update()}),L,n)}function E(e){switch(e){case"n":return"sw";case"s":case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function W(t){return function(e){return w.disabled||"move"===t&&!w.allowMove||(m=c(u),o=!0,K(t,n(e)),e.stopPropagation(),e.preventDefault()),!1}}function Y(e,t,n){var o=e.width(),i=e.height();n<(i=t<o&&0<t?(o=t)/e.width()*e.height():i)&&0<n&&(o=(i=n)/e.height()*e.width()),v=e.width()/o,y=e.height()/i,e.width(o).height(i)}function q(e){return{x:e.x*v,y:e.y*y,x2:e.x2*v,y2:e.y2*y,w:e.w*v,h:e.h*y}}function L(e){var t=M.getFixed();t.w>w.minSelect[0]&&t.h>w.minSelect[1]?(I.enableHandles(),I.done()):I.release(),B.setCursor(w.allowSelect?"crosshair":"default")}function X(e){if(w.disabled)return!1;if(!w.allowSelect)return!1;o=!0,m=c(u),I.disableHandles(),B.setCursor("crosshair");var t=n(e);return M.setPressed(t),I.update(),B.activateHandlers(G,L,"touch"===e.type.substring(0,5)),qe.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function G(e){M.setCurrent(e),I.update()}function N(){var e=Ze("<div></div>").addClass(r("tracker"));return R&&e.css({opacity:0,backgroundColor:"white"}),e}"object"!=typeof e&&(e=Ze(e)[0]),T(t="object"!=typeof t?{}:t);var u,V,U,Q,Z,v,y,o,$,t={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},a=Ze(e),_=!0,h=("IMG"==e.tagName?(0!=a[0].width&&0!=a[0].height?(a.width(a[0].width),a.height(a[0].height)):((Ye=new Image).src=a[0].src,a.width(Ye.width),a.height(Ye.height)),(u=a.clone().removeAttr("id").css(t).show()).width(a.width()),u.height(a.height()),a.after(u).hide()):(u=a.css(t).show(),_=!1,null===w.shade&&(w.shade=!0)),Y(u,w.boxWidth,w.boxHeight),u.width()),f=u.height(),s=Ze("<div />").width(h).height(f).addClass(r("holder")).css({position:"relative",backgroundColor:w.bgColor}).insertAfter(a).append(u),d=(w.addClass&&s.addClass(w.addClass),Ze("<div />")),ee=Ze("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),l=Ze("<div />").width("100%").height("100%").css("zIndex",320),p=Ze("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=M.getFixed();w.onDblClick.call(P,e)}).insertBefore(u).append(ee,l),g=(_&&(d=Ze("<img />").attr("src",u.attr("src")).css(t).width(h).height(f),ee.append(d)),A&&p.css({overflowY:"hidden"}),w.boundary),b=N().width(h+2*g).height(f+2*g).css({position:"absolute",top:i(-g),left:i(-g),zIndex:290}).mousedown(X),te=w.bgColor,ne=w.bgOpacity,m=c(u),x={createDragger:function(t){return function(e){return w.disabled||"move"===t&&!w.allowMove||(m=c(u),o=!0,K(t,n(x.cfilter(e)),!0),e.stopPropagation(),e.preventDefault()),!1}},newSelection:function(e){return X(x.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:oe,support:!0===w.touchSupport||!1===w.touchSupport?w.touchSupport:oe()};function oe(){var e,t={},n=["touchstart","touchmove","touchend"],o=document.createElement("div");try{for(e=0;e<n.length;e++){var i,r=(i="on"+n[e])in o;r||(o.setAttribute(i,"return;"),r="function"==typeof o[i]),t[n[e]]=r}return t.touchstart&&t.touchend&&t.touchmove}catch(e){return!1}}z=k=S=C=0;var ie,re,C,S,k,z,M={flipCoords:ce,setPressed:function(e){e=se(e),k=C=e[0],z=S=e[1]},setCurrent:function(e){e=se(e),ie=e[0]-k,re=e[1]-z,k=e[0],z=e[1]},getOffset:function(){return[ie,re]},moveOffset:function(e){var t=e[0],e=e[1];C+t<0&&(t-=t+C),S+e<0&&(e-=e+S),f<z+e&&(e+=f-(z+e)),h<k+t&&(t+=h-(k+t)),C+=t,k+=t,S+=e,z+=e},getCorner:function(e){var t=ae();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}},getFixed:ae};function ae(){if(!w.aspectRatio)return r=k-C,i=z-S,V&&Math.abs(r)>V&&(k=0<r?C+V:C-V),U&&Math.abs(i)>U&&(z=0<i?S+U:S-U),Z/y&&Math.abs(i)<Z/y&&(z=0<i?S+Z/y:S-Z/y),Q/v&&Math.abs(r)<Q/v&&(k=0<r?C+Q/v:C-Q/v),C<0&&(k-=C,C-=C),S<0&&(z-=S,S-=S),k<0&&(C-=k,k-=k),z<0&&(S-=z,z-=z),h<k&&(C-=a=k-h,k-=a),f<z&&(S-=a=z-f,z-=a),h<C&&(z-=a=C-f,S-=a),f<S&&(z-=a=S-f,S-=a),ue(ce(C,S,k,z));var e,t,n,o,i=w.aspectRatio,r=w.minSize[0]/v,a=w.maxSize[0]/v,s=w.maxSize[1]/y,c=k-C,u=z-S,d=Math.abs(c),l=Math.abs(u);return 0===a&&(a=10*h),0==s&&0,d/l<i?(t=z,n=l*i,(e=c<0?C-n:n+C)<0?(e=0,o=Math.abs((e-C)/i),t=u<0?S-o:o+S):h<e&&(e=h,o=Math.abs((e-C)/i),t=u<0?S-o:o+S)):(e=k,o=d/i,(t=u<0?S-o:S+o)<0?(t=0,n=Math.abs((t-S)*i),e=c<0?C-n:n+C):f<t&&(t=f,n=Math.abs(t-S)*i,e=c<0?C-n:n+C)),C<e?(e-C<r?e=C+r:a<e-C&&(e=C+a),t=S<t?S+(e-C)/i:S-(e-C)/i):e<C&&(C-e<r?e=C-r:a<C-e&&(e=C-a),t=S<t?S+(C-e)/i:S-(C-e)/i),e<0?(C-=e,e=0):h<e&&(C-=e-h,e=h),t<0?(S-=t,t=0):f<t&&(S-=t-f,t=f),ue(ce(C,S,e,t))}function se(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>h&&(e[0]=h),e[1]>f&&(e[1]=f),[Math.round(e[0]),Math.round(e[1])]}function ce(e,t,n,o){var i=e,r=n,a=t,s=o;return n<e&&(i=n,r=e),o<t&&(a=o,s=t),[i,a,r,s]}function ue(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}O=!1,F=Ze("<div />").css({position:"absolute",zIndex:240,opacity:0}),j={top:he(),left:he().height(f),right:he().height(f),bottom:he()};var O,F,j,H={update:de,updateRaw:le,getShades:we,setBgColor:pe,enable:fe,disable:ge,resize:function(e,t){j.left.css({height:i(t)}),j.right.css({height:i(t)})},refresh:function(){(w.shade?fe:ge)(),I.isAwake()&&be(w.bgOpacity)},opacity:be};function de(){return le(M.getFixed())}function le(e){j.top.css({left:i(e.x),width:i(e.w),height:i(e.y)}),j.bottom.css({top:i(e.y2),left:i(e.x),width:i(e.w),height:i(f-e.y2)}),j.right.css({left:i(e.x2),width:i(h-e.x2)}),j.left.css({width:i(e.x)})}function he(){return Ze("<div />").css({position:"absolute",backgroundColor:w.shadeColor||w.bgColor}).appendTo(F)}function fe(){O||(O=!0,F.insertBefore(u),de(),I.setBgOpacity(1,0,1),d.hide(),pe(w.shadeColor||w.bgColor,1),I.isAwake()?be(w.bgOpacity,1):be(1,1))}function pe(e,t){Ue(we(),e,t)}function ge(){O&&(F.remove(),d.show(),O=!1,I.isAwake()?I.setBgOpacity(w.bgOpacity,1,1):(I.setBgOpacity(1,1,1),I.disableHandles()),Ue(s,0,1))}function be(e,t){O&&(w.bgFade&&!t?F.animate({opacity:1-e},{queue:!1,duration:w.fadeTime}):F.css({opacity:1-e}))}function we(){return F.children()}ve=370,ye={},me={},Ce=!(xe={}),w.dragEdges&&Ze.isArray(w.createDragbars)&&ze(w.createDragbars),Ze.isArray(w.createHandles)&&Oe(w.createHandles),w.drawBorders&&Ze.isArray(w.createBorders)&&Me(w.createBorders),Ze(document).bind("touchstart.jcrop-ios",function(e){Ze(e.currentTarget).hasClass("jcrop-tracker")&&e.stopPropagation()}),Se=N().mousedown(W("move")).css({cursor:"move",position:"absolute",zIndex:360}),x.support&&Se.bind("touchstart.jcrop",x.createDragger("move")),ee.append(Se),Be();var D,ve,ye,me,xe,Ce,Se,I={updateVisible:je,update:He,release:function(){Be(),p.hide(),w.shade?H.opacity(1):De(1),D=!1,w.onRelease.call(P)},refresh:Fe,isAwake:function(){return D},setCursor:function(e){Se.css("cursor",e)},enableHandles:Ie,enableOnly:function(){Ce=!0},showHandles:function(){Ce&&l.show()},disableHandles:Be,animMode:Je,setBgOpacity:De,done:function(){Je(!1),Fe()}};function ke(e,t){t=Ze("<div />").mousedown(W(e)).css({cursor:e+"-resize",position:"absolute",zIndex:t}).addClass("ord-"+e);return x.support&&t.bind("touchstart.jcrop",x.createDragger(e)),l.append(t),t}function ze(e){for(var t=0;t<e.length;t++)xe[e[t]]=ke(e[t],ve++).addClass("jcrop-dragbar")}function Me(e){for(var t,n,o=0;o<e.length;o++){switch(e[o]){case"n":t="hline";break;case"s":t="hline bottom";break;case"e":t="vline right";break;case"w":t="vline"}ye[e[o]]=(n=t,n=Ze("<div />").css({position:"absolute",opacity:w.borderOpacity}).addClass(r(n)),ee.append(n),n)}}function Oe(e){for(var t,n,o=0;o<e.length;o++)me[e[o]]=(t=e[o],n=void 0,n=w.handleSize,t=ke(t,ve++).css({opacity:w.handleOpacity}).addClass(r("handle")),n&&t.width(n).height(n),t)}function Fe(){var e=M.getFixed();M.setPressed([e.x,e.y]),M.setCurrent([e.x2,e.y2]),je()}function je(e){if(D)return He(e)}function He(e){var t,n,o=M.getFixed();t=o.w,n=o.h,p.width(Math.round(t)).height(Math.round(n)),t=o.x,n=o.y,w.shade||d.css({top:i(-n),left:i(-t)}),p.css({top:i(n),left:i(t)}),w.shade&&H.updateRaw(o),D||(p.show(),w.shade?H.opacity(ne):De(ne,!0),D=!0);(e?w.onSelect:w.onChange).call(P,q(o))}function De(e,t,n){(D||t)&&(w.bgFade&&!n?u.animate({opacity:e},{queue:!1,duration:w.fadeTime}):u.css("opacity",e))}function Ie(){if(Ce=!0,w.allowResize)return l.show(),!0}function Be(){Ce=!1,l.hide()}function Je(e){e?($=!0,Be()):($=!1,Ie())}Pe=function(){},Ae=function(){},(Re=w.trackDocument)||b.mousemove(Te).mouseup(Ke).mouseout(Ke),u.before(b);var Pe,Ae,Re,B={activateHandlers:function(e,t,n){return o=!0,Pe=e,Ae=t,e=n,b.css({zIndex:450}),e?Ze(document).bind("touchmove.jcrop",Ee).bind("touchend.jcrop",We):Re&&Ze(document).bind("mousemove.jcrop",Te).bind("mouseup.jcrop",Ke),!1},setCursor:function(e){b.css("cursor",e)}};function Te(e){return Pe(n(e)),!1}function Ke(e){return e.preventDefault(),e.stopPropagation(),o&&(o=!1,Ae(n(e)),I.isAwake()&&w.onSelect.call(P,q(M.getFixed())),b.css({zIndex:290}),Ze(document).unbind(".jcrop"),Pe=function(){},Ae=function(){}),!1}function Ee(e){return Pe(n(x.cfilter(e))),!1}function We(e){return Ke(x.cfilter(e))}J=Ze('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),Ye=Ze("<div />").css({position:"absolute",overflow:"hidden"}).append(J),w.keySupport&&(J.keydown(function(e){if(e.ctrlKey||e.metaKey)return!0;var t=!!e.shiftKey?10:1;switch(e.keyCode){case 37:Le(e,-t,0);break;case 39:Le(e,t,0);break;case 38:Le(e,0,-t);break;case 40:Le(e,0,t);break;case 27:w.allowSelect&&I.release();break;case 9:return!0}return!1}).blur(function(e){J.hide()}),A||!w.fixedSupport?(J.css({position:"absolute",left:"-20px"}),Ye.append(J).insertBefore(u)):J.insertBefore(u));var J,Ye,qe={watchKeys:function(){w.keySupport&&(J.show(),J.focus())}};function Le(e,t,n){w.allowMove&&(M.moveOffset([t,n]),I.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function Xe(e){Ge([e[0]/v,e[1]/y,e[2]/v,e[3]/y]),w.onSelect.call(P,q(M.getFixed())),I.enableHandles()}function Ge(e){M.setPressed([e[0],e[1]]),M.setCurrent([e[2],e[3]]),I.update()}function Ne(){w.disabled=!0,I.disableHandles(),I.setCursor("default"),B.setCursor("default")}function Ve(){w.disabled=!1,Qe()}function Ue(e,t,n){t=t||w.bgColor;w.bgFade&&Ze.fx.step.hasOwnProperty("backgroundColor")&&w.fadeTime&&!n?e.animate({backgroundColor:t},{queue:!1,duration:w.fadeTime}):e.css("backgroundColor",t)}function Qe(e){w.allowResize?e?I.enableOnly():I.enableHandles():I.disableHandles(),B.setCursor(w.allowSelect?"crosshair":"default"),I.setCursor(w.allowMove?"move":"default"),w.hasOwnProperty("trueSize")&&(v=w.trueSize[0]/h,y=w.trueSize[1]/f),w.hasOwnProperty("setSelect")&&(Xe(w.setSelect),I.done(),delete w.setSelect),H.refresh(),w.bgColor!=te&&(Ue(w.shade?H.getShades():s,w.shade&&w.shadeColor||w.bgColor),te=w.bgColor),ne!=w.bgOpacity&&(ne=w.bgOpacity,w.shade?H.refresh():I.setBgOpacity(ne)),V=w.maxSize[0]||0,U=w.maxSize[1]||0,Q=w.minSize[0]||0,Z=w.minSize[1]||0,w.hasOwnProperty("outerImage")&&(u.attr("src",w.outerImage),delete w.outerImage),I.refresh()}x.support&&b.bind("touchstart.jcrop",x.newSelection),l.hide(),Qe(!0);var P={setImage:function(i,r){I.release(),Ne();var a=new Image;a.onload=function(){var e=a.width,t=a.height,n=w.boxWidth,o=w.boxHeight;u.width(e).height(t),u.attr("src",i),d.attr("src",i),Y(u,n,o),h=u.width(),f=u.height(),d.width(h).height(f),b.width(h+2*g).height(f+2*g),s.width(h).height(f),H.resize(h,f),Ve(),"function"==typeof r&&r.call(P)},a.src=i},animateTo:function(e,t){var n,o,i,r,a,s,c,u,d,l,h=e[0]/v,f=e[1]/y,p=e[2]/v,g=e[3]/y;function b(){window.setTimeout(l,i)}$||(e=M.flipCoords(h,f,p,g),n=[(n=M.getFixed()).x,n.y,n.x2,n.y2],o=n,i=w.animationDelay,r=e[0]-n[0],a=e[1]-n[1],s=e[2]-n[2],c=e[3]-n[3],u=0,d=w.swingSpeed,h=o[0],f=o[1],p=o[2],g=o[3],I.animMode(!0),l=function(){u+=(100-u)/d,o[0]=Math.round(h+u/100*r),o[1]=Math.round(f+u/100*a),o[2]=Math.round(p+u/100*s),o[3]=Math.round(g+u/100*c),(u=99.8<=u?100:u)<100?(Ge(o),b()):(I.done(),I.animMode(!1),"function"==typeof t&&t.call(P))},b())},setSelect:Xe,setOptions:function(e){T(e),Qe()},tellSelect:function(){return q(M.getFixed())},tellScaled:function(){return M.getFixed()},setClass:function(e){s.removeClass().addClass(r("holder")).addClass(e)},disable:Ne,enable:Ve,cancel:function(){I.done(),B.activateHandlers(null,null)},release:I.release,destroy:function(){s.remove(),a.show(),a.css("visibility","visible"),Ze(e).removeData("Jcrop")},focus:qe.watchKeys,getBounds:function(){return[h*v,f*y]},getWidgetSize:function(){return[h,f]},getScaleFactor:function(){return[v,y]},getOptions:function(){return w},ui:{holder:s,selection:p}};return R&&s.bind("selectstart",function(){return!1}),a.data("Jcrop",P),P},Ze.fn.Jcrop=function(e,t){var n;return this.each(function(){if(Ze(this).data("Jcrop")){if("api"===e)return Ze(this).data("Jcrop");Ze(this).data("Jcrop").setOptions(e)}else"IMG"==this.tagName?Ze.Jcrop.Loader(this,function(){Ze(this).css({display:"block",visibility:"hidden"}),n=Ze.Jcrop(this,e),Ze.isFunction(t)&&t.call(n)}):(Ze(this).css({display:"block",visibility:"hidden"}),n=Ze.Jcrop(this,e),Ze.isFunction(t)&&t.call(n))}),this},Ze.Jcrop.Loader=function(e,t,n){var o=Ze(e),i=o[0];o.bind("load.jcloader",function e(){i.complete?(o.unbind(".jcloader"),Ze.isFunction(t)&&t.call(i)):window.setTimeout(e,50)}).bind("error.jcloader",function(e){o.unbind(".jcloader"),Ze.isFunction(n)&&n.call(i)}),i.complete&&Ze.isFunction(t)&&(o.unbind(".jcloader"),t.call(i))},Ze.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}});
;/*!wiki-common:widget/ui/picUploader/picUploader.js*/
define("wiki-common:widget/ui/picUploader/picUploader",function(t,e,i){var s=t("wiki-common:widget/lib/jquery/jquery"),o=(t("wiki-common:widget/ui/picUploader/Jcrop/Jcrop")(s),{});function p(e){var i=new FileReader;i.onload=function(){var t={previewUrl:i.result,typeName:e.type.replace(/image\/(.*)/,"$1"),dataLength:e.size};picHandle(t)},i.readAsDataURL(e)}function a(t){if(!s(t.host)[0])throw new Error("[picUploader error]: we need a host first.");this.host=s(t.host);var e=s('<a href="javascript:;" class="cmn-btn cmn-btn-28 uploadbtn"><span style="font-weight: bold;">+</span>上传图片</a>'),i=s('<a href="javascript:;" class="cmn-btn cmn-btn-28 re_uploadbtn">重新上传</a>');s('<a href="javascript:;" class="cmn-btn cmn-btn-28 confirmbtn">确认</a>');this.namePrefix=this.host.selector.match(/.*[\.#]([^\'\"\)]*)/)[1],this.classNames=t.classNames||"",this.url=t.url||"/api/common/uploadimage",this.btn=s(t.btn)[0]?s(t.btn):e,this.reloadBtn=s(t.reloadbtn)[0]?s(t.reloadbtn):i,this.previewWidth=t.previewWidth,this.previewHeight=t.previewHeight,this.cropResultWidth=t.cropResultWidth||100,this.cropResultHeight=t.cropResultHeight||100,this.notice=s(t.notice)[0]?s(t.notice):null,this.needCrop="boolean"==typeof t.needCrop&&t.needCrop,this.JcropParams=t.JcropParams||{},this.aAcceptType=t.aAcceptType||["gif","jpeg","x-png"],this.sAcceptType="image/"+this.aAcceptType.join(", image/"),this.onload=t.onload,this.onPreview=t.onPreview,this.onDragEnter=t.onDragEnter,this.onDragOver=t.onDragOver,this.onDrop=t.onDrop}function h(){var t=function(){return s('<div class="wgt_picUploader '+this.classNames+'"><div class="pU_result">预览：<div class="pU_cropResult"></div></div><div class="pU_wrapper"><div class="pU_btn"></div><div class="pU_loading"></div><div class="pU_preview"></div></div><div class="pU_btm_btn"></div></div>')}.call(this);this.host.html(t),this.loadingArea=s(".pU_loading"),this.previewArea=s(".pU_preview"),this.resultArea=s(".pU_result"),this.cropResult=s(".pU_cropResult"),this.btnArea=s(".pU_btn"),this.btmBtnArea=s(".pU_btm_btn"),this.notice&&this.btmBtnArea.before(this.notice),this.btnArea.append(this.btn),this.btmBtnArea.append(this.reloadBtn),s(".pU_wrapper").css("width",this.previewWidth),s(".pU_wrapper").css("height",this.previewHeight),s(".wgt_picUploader").css("width",this.previewWidth)}function c(){var t=[].slice.call(arguments),e=t.length,r=function(t){t=t||1;var e=[],i=this;function r(){i.loadingArea&&(i.loadingArea.parent().children().hide(),i.loadingArea.fadeIn()),window.FileReader&&window.justNotExisted?p(s(this)[0].files[0]):s(this).parent().submit()}for(var a=0;a<t;a++){var n=s('<form method="post" enctype="multipart/form-data" name="'+this.namePrefix+"_"+a+'_form" target="'+this.namePrefix+"_"+a+'_iframe" action="'+this.url+'?callback=window.parent.window.picHandle"></form>'),o=(n.append('<input type="file" name="file" accept="'+this.sAcceptType+'"style="position: absolute; bottom: 0; right: 0; filter: alpha(opacity=0); -moz-opacity: 0;cursor: pointer; width: 1000px; height: 1000px; font-size: 100px; border: none;"></form>'),this.previewWidth&&n.append('<input type="hidden" name="previewWidth" value="'+this.previewWidth+'">'),this.previewHeight&&n.append('<input type="hidden" name="previewHeight" value="'+this.previewHeight+'">'),s('<iframe name="'+this.namePrefix+"_"+a+'_iframe" style="display:none;"></iframe>'));n.find('input[type="file"]').on("change",r),e.push({form:n,iframe:o})}return e}.call(this,e);t.forEach(function(t,e,i){t.css({position:"relative",overflow:"hidden"}),t.append(r[e].form,r[e].iframe)})}function r(t){a.call(this,t),h.call(this),c.call(this,this.btn,this.reloadBtn),"draggable"in document.createElement("div")&&this.dragArea&&function(){var e=this;this.dragArea.ondragenter=function(t){e.onDragEnter?e.onDragEnter(this):this.style.borderWidth="2px"},this.dragArea.ondragover=function(t){t.preventDefault(),e.onDragOver&&e.onDragOver(this)},this.dragArea.ondrop=function(t){t.preventDefault(),e.onDrop?e.onDrop(this):this.style.borderWidth="1px",p(t.dataTransfer.files[0])}}.call(this,t);var n=this;function r(t){var e,i,r,a;0<parseInt(t.w,10)&&(o.selectArea=n.Jcrop.tellSelect(),e=(i=n.Jcrop.getBounds())[0],i=i[1],r=n.cropResultWidth/t.w,a=n.cropResultHeight/t.h,n.resultArea.find("img").css({width:Math.round(r*e)+"px",height:Math.round(a*i)+"px",marginLeft:"-"+Math.round(r*t.x)+"px",marginTop:"-"+Math.round(a*t.y)+"px"}))}window.picHandle=function(i,t){s.extend(o,i),n.onload&&n.onload(i),setTimeout(function(){var e=s("<img>");e.attr("src",i.previewUrl),n.previewWidth&&(e.css("max-width",n.previewWidth),t&&t.width&&e.css("width",t.width)),n.previewHeight&&(e.css("max-height",n.previewHeight),t&&t.height&&e.css("height",t.height)),n.previewArea.html(e),e.on("load",function(){var t;n.onPreview&&n.onPreview(o),n.loadingArea.hide(),n.previewArea.fadeIn(),n.btmBtnArea.show(),o.picUrl&&o.width&&o.height||(o.width=e.width(),o.height=e.height()),n.needCrop&&(n.resultArea.css("right",-(n.cropResultWidth+20)),n.resultArea.show(),n.cropResult.html('<div class="cropResultCnt" style="width: '+parseInt(n.cropResultWidth,10)+"px;height: "+parseInt(n.cropResultHeight,10)+'px;overflow: hidden;"><img src="'+i.previewUrl+'"></div>'),n.Jcrop&&n.Jcrop.destroy(),t={bgColor:"#fff",bgOpacity:.4,minSize:[20,20],aspectRatio:n.cropResultWidth/n.cropResultHeight,onChange:r},n.JcropParams=s.extend(t,n.JcropParams),n.Jcrop=s.Jcrop(e,n.JcropParams),n.JcropParams.initialSelect||(n.JcropParams.initialSelect=[(e.width()-n.cropResultWidth)/2,(e.height()-n.cropResultHeight)/2,(e.width()-n.cropResultWidth)/2+n.cropResultWidth,(e.height()-n.cropResultHeight)/2+n.cropResultHeight]),n.Jcrop.setSelect(n.JcropParams.initialSelect),n.Jcrop.setOptions({allowSelect:!1}))})},1e3)}}Function.prototype.getFuncName=function(){return s.trim(this.name||this.toString().match(/function\s*([^(]*)\(/)[1])},r.upload=function(t){a.call(this,t),c.call(this,this.btn)},r.prototype={constructor:r,getPicInfo:function(){return o},setImage:function(t,e){t={previewUrl:t};this.loadingArea.parent().children().hide(),this.loadingArea.fadeIn(),picHandle(t,e)}},i.exports=r});
;/*!wiki-common:widget/ui/pie/pie.js*/
define("wiki-common:widget/ui/pie/pie",function(t,e,a){var o=t("wiki-common:widget/lib/jquery/jquery"),r=(t("wiki-common:widget/util/addStyleSheet"),t("wiki-common:widget/util/browser")),s=t("wiki-common:widget/util/color"),n=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");n||!r.ie()||document.namespaces.v||(document.namespaces.add("v","urn:schemas-microsoft-com:vml"),document.createStyleSheet().addRule(".v","behavior:url(#default#VML)"));var g={createElement:function(t){return o(document.createElementNS("http://www.w3.org/2000/svg",t))},getSectorPath:function(t,e,a,r){t=t*Math.PI/180,e=e*Math.PI/180;var i=Math.cos(t),o=Math.sin(t),s=Math.cos(t+e),t=Math.sin(t+e);return["M",r*i,r*o,"L",a*i,a*o,"A",a,a,0,Math.abs(e)>Math.PI?1:0,1,a*s,a*t,"L",r*s,r*t,"A",r,r,0,Math.abs(e)>Math.PI?1:0,0,r*i,r*o].join(" ")}},h={createElement:function(t){return o(document.createElement("<v:"+t+' class="v" />'))},getSectorPath:function(t,e,a,r){var i=t*Math.PI/180,o=Math.cos(i),i=Math.sin(i);return t=Math.round(t*Math.pow(2,16)),e=Math.round(e*Math.pow(2,16)),["m",Math.round(r*o),Math.round(r*i),"l",Math.round(a*o),Math.round(a*i),"ae",0,0,a,a,-t,-e,"ae",0,0,r,r,-t-e,e,"xe"].join(" ")}};function c(t){!function(t){this.args=o.extend({pieR:100,slices:[{percent:1}]},t),o.each(this.args.slices,function(t,e){e.angle=360*(e.percent||0)}),o.extend(this.args,{pieR:parseInt(this.args.pieR),donutR:parseInt(Math.min(this.args.pieR,this.args.donutR||0)),rotation:this.args.rotation||0,flip:"boolean"==o.type(this.args.flip)&&this.args.flip,strokeWidth:this.args.strokeWidth||0,animation:!!r.chrome()&&this.args.animation}),o.extend(this.args,{outerR:this.args.pieR+this.args.strokeWidth,innerR:Math.max(this.args.donutR-this.args.strokeWidth,0)}),this.args.boxWidth=this.args.boxHeight=2*this.args.outerR}.call(this,t),this.graphEngine=n?"svg":"vml";var i=this;this.getPie={svg:function(){var t=g.createElement("svg").attr({width:i.args.boxWidth,height:i.args.boxHeight,class:"wgt_pie"}),a=(i.args.animation&&(t.on("load",function(){c.animate.call(i)}),i.clipPath=g.createElement("path").attr("d",g.getSectorPath(0,0,i.args.outerR,0)),t.append(g.createElement("defs").append(g.createElement("clipPath").attr("id","pieAnimateClip").append(i.clipPath)))),g.createElement("g").attr({transform:"translate("+i.args.boxWidth/2+","+i.args.boxHeight/2+")scale("+(i.args.flip?"-1":"1")+",1)rotate("+i.args.rotation+")","clip-path":i.args.animation?"url(#pieAnimateClip)":""}).appendTo(t)),r=0;return o.each(i.args.slices,function(t,e){g.createElement("path").attr({d:g.getSectorPath(r,e.angle,i.args.pieR,i.args.donutR)}).css({fill:e.color||s.getStdHue(t),stroke:i.args.strokeColor||e.color||s.getStdHue(t),strokeWidth:i.args.strokeColor?i.args.strokeWidth||1:0}).appendTo(a),r+=e.angle}),i.args.totalAngle=r,t},vml:function(){var a=h.createElement("group").attr({coordsize:i.args.boxWidth+","+i.args.boxHeight,coordorigin:-i.args.boxWidth/2+","+-i.args.boxHeight/2,class:"v wgt_pie"}).css({width:i.args.boxWidth,height:i.args.boxHeight,position:"relative",rotation:i.args.rotation+"deg",flip:i.args.flip?"x":""}),r=0;return o.each(i.args.slices,function(t,e){h.createElement("shape").attr({path:h.getSectorPath(r,e.angle,i.args.pieR,i.args.donutR),coordsize:i.args.boxWidth+","+i.args.boxHeight,fillcolor:e.color||s.getStdHue(t),stroked:!!i.args.strokeColor,strokecolor:i.args.strokeColor||e.color||s.getStdHue(t),strokeweight:i.args.strokeColor?i.args.strokeWidth||1:0}).css({width:i.args.boxWidth,height:i.args.boxHeight,position:"absolute"}).appendTo(a),r+=e.angle}),a}}}c.animate=function(){var e=this,a=e.args.animation;o({aniStep:0}).animate({aniStep:1},o.extend(!0,{},a,{step:function(t){e.clipPath.attr("d",g.getSectorPath(0,t*e.args.totalAngle,e.args.outerR,0)),"function"==o.type(a.step)&&a.step(t)},complete:function(){e.clipPath.parent().remove(),"function"==o.type(a.complete)&&a.complete()}}))},c.prototype={constructor:c,getHTML:function(){var t=this.getNode();return"vml"==this.graphEngine?t.html():(new XMLSerializer).serializeToString(t[0])},getNode:function(){return this.getPie[this.graphEngine]()}},a.exports=c});
;/*!wiki-common:widget/ui/polyline/polyline.js*/
define("wiki-common:widget/ui/polyline/polyline",function(t,i,e){var S,A=t("wiki-common:widget/lib/jquery/jquery"),s=t("wiki-common:widget/util/browser"),o=t("wiki-common:widget/util/color"),z=(t("wiki-common:widget/util/animation"),t("wiki-common:widget/util/number"),document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"));function h(i){if(!i)throw new Error("[Polyline Exception]: No arguments.");if(!(i.categories&&"object"==typeof i.categories&&i.categories instanceof Array)||i.categories.length<1)throw new Error("[Polyline Exception]: Illegal arguments: categories.");this.conValToLat=function(t){return this.canvasSize.height/2-this.paddingY*("BOTTOM"==this.xAxis.orientation?1:0)-this.chartSize.height*(t-this.range[0])/(this.range[1]-this.range[0])},this.conLatToVal=function(t){return(this.canvasSize.height/2-this.paddingY*("BOTTOM"==this.xAxis.orientation?1:0)-t)/this.chartSize.height*(this.range[1]-this.range[0])+this.range[0]},this.__setRange=function(r){function a(t){if("number"!=typeof(t="object"==typeof t&&t instanceof Array&&t[0]!=t[1]?t:[])[0]||"number"!=typeof t[1]){var i,e=[],s=[];for(i in this.dataSet)e.push(Math.min.apply({},this.dataSet[i])),s.push(Math.max.apply({},this.dataSet[i]));var o=Math.min.apply({},e),h=Math.max.apply({},s),n=("number"==typeof t[1]?t[1]:h)-("number"==typeof t[0]?t[0]:o),t=["number"==typeof t[0]?t[0]:o-.1*n,"number"==typeof t[1]?t[1]:h+.1*n]}t[0]==t[1]?(0===t[0]&&(t=[-1,1]),a.call(this,t)):r=t}return a.call(this,r),r},this.chartSize={width:i.chartSize&&"number"==typeof i.chartSize.width&&Math.abs(i.chartSize.width)||200,height:i.chartSize&&"number"==typeof i.chartSize.height&&Math.abs(i.chartSize.height)||100},this.canvasSize={width:i.canvasSize&&"number"==typeof i.canvasSize.width&&Math.abs(i.canvasSize.width)||this.chartSize.width,height:i.canvasSize&&"number"==typeof i.canvasSize.height&&Math.abs(i.canvasSize.height)||this.chartSize.height},this.xAxis=i.xAxis||{},this.xAxis.isShow="boolean"!=typeof this.xAxis.isShow||this.xAxis.isShow,this.xAxis.orientation=/^TOP|BOTTOM$/i.test(this.xAxis.orientation)?RegExp.$_.toUpperCase():"BOTTOM",this.xAxis.stroke=this.xAxis.stroke||{},this.xAxis.stroke.width="number"==typeof this.xAxis.stroke.width&&this.xAxis.stroke.width||1,this.xAxis.stroke.color=this.xAxis.stroke.color||"#999",this.xAxis.text=this.xAxis.text||{},this.xAxis.text.fontSize="number"==typeof this.xAxis.text.fontSize&&this.xAxis.text.fontSize||14,this.xAxis.text.color=this.xAxis.text.color||"#666",this.yAxis=i.yAxis||{},this.yAxis.isShow="boolean"==typeof this.yAxis.isShow&&this.yAxis.isShow,this.yAxis.orientation=/^LEFT|RIGHT$/i.test(this.yAxis.orientation)?RegExp.$_.toUpperCase():"LEFT",this.yAxis.division=this.yAxis.division||0,this.yAxis.stroke=this.yAxis.stroke||{},this.yAxis.stroke.width="number"==typeof this.yAxis.stroke.width&&this.yAxis.stroke.width||1,this.yAxis.stroke.color=this.yAxis.stroke.color||"#999",this.yAxis.text=this.yAxis.text||{},this.yAxis.text.formatter="function"==typeof this.yAxis.text.formatter&&this.yAxis.text.formatter||function(t){return t},this.yAxis.text.fontSize="number"==typeof this.yAxis.text.fontSize&&this.yAxis.text.fontSize||14,this.yAxis.text.color=this.yAxis.text.color||"#666",this.line=i.line||{},this.line.stroke=this.line.stroke||{},this.line.stroke.width="number"==typeof this.line.stroke.width?this.line.stroke.width:2,this.line.dot=this.line.dot||{},this.line.dot.radius="number"==typeof this.line.dot.radius?this.line.dot.radius:3*this.line.stroke.width,this.line.dot.isHollow="boolean"==typeof this.line.dot.isHollow&&this.line.dot.isHollow,this.line.isShowShadow="boolean"==typeof this.line.isShowShadow&&this.line.isShowShadow,this.paddingX=this.canvasSize.width-this.chartSize.width,this.paddingY=(this.canvasSize.height-this.chartSize.height)*("BOTTOM"==this.xAxis.orientation?1:-1),this.categories=i.categories,this.dataSet=i.dataSet,this.range=this.__setRange(i.range),this.getColor="object"==typeof i.colorSet&&i.colorSet instanceof Array&&0<i.colorSet.length?function(t){t=isNaN(parseInt(t))?0:parseInt(t);return i.colorSet[t%12]}:o.getStdHue}z||!s.ie()||document.namespaces.v||(document.namespaces.add("v","urn:schemas-microsoft-com:vml"),document.createStyleSheet().addRule(".v","behavior:url(#default#VML)")),S=z?{createElement:function(t){return A(document.createElementNS("http://www.w3.org/2000/svg",t))},group:function(){return this.createElement("g")},line:function(t,i,e,s){return this.createElement("line").attr({x1:t,y1:i,x2:e,y2:s})},polyline:function(t){return this.createElement("polyline").attr("points",t.join(" "))},polygon:function(t){return this.createElement("polygon").attr("points",t.join(" "))},circle:function(t,i,e){return this.createElement("circle").attr({cx:t,cy:i,r:e})},text:function(t){return this.createElement("text").text(t)},addTitle:function(t,i){A("title",t).remove(),A(t).append(this.createElement("title").text(i))},getCanvas:function(t){return this.createElement("svg").attr({width:t.width,height:t.height,class:"wgt-polyline"}).append(this.createElement("g").attr({class:"wgt-polyline-canvas",transform:"translate("+t.width/2+","+t.height/2+")"}))}}:{createElement:function(t){return A(document.createElement("<v:"+t+' class="v" />')).css({position:"absolute",display:"block",top:0,left:0})},group:function(t){return this.createElement("group").attr({coordsize:t.width+" "+t.height,coordorigin:-t.width/2+" "+-t.height/2}).css({width:t.width,height:t.height})},line:function(t,i,e,s){return this.createElement("line").attr({from:Math.round(t)+","+Math.round(i),to:Math.round(e)+","+Math.round(s)})},polyline:function(t){return this.createElement("polyline").attr("points",A.map(t,function(t){return[Math.round(t[0]),Math.round(t[1])]}).join(" "))},polygon:function(t){t=[].concat(t,[t[0]]);return this.createElement("polyline").attr("points",A.map(t,function(t){return[Math.round(t[0]),Math.round(t[1])]}).join(" "))},circle:function(t,i,e){return this.createElement("oval").css({left:Math.round(t-e),top:Math.round(i-e),width:Math.round(2*e),height:Math.round(2*e)})},text:function(t){return this.createElement("textbox").css({padding:"0"}).text(t)},addTitle:function(t,i){A(t).attr(A.extend({},i?{title:i}:{}))},getCanvas:function(t){return A("<div>").addClass("wgt-polyline").css({position:"relative"}).append(A("<div>").addClass("wgt-polyline-canvas").css({width:t.width,height:t.height}))}},h.prototype={constructor:h,getNode:function(){var t=S.getCanvas(this.canvasSize),i=A(".wgt-polyline-canvas",t),e=this.chartSize.width/(this.categories.length+1),s=S.group(this.canvasSize).appendTo(i);if(this.xAxis.isShow){var o=S.line(-this.chartSize.width/2-(this.canvasSize.width-this.chartSize.width)/2+this.paddingX*("LEFT"==this.yAxis.orientation?1:0),this.chartSize.height*("BOTTOM"==this.xAxis.orientation?1:-1)/2-this.paddingY/2,this.chartSize.width/2-(this.canvasSize.width-this.chartSize.width)/2+this.paddingX*("LEFT"==this.yAxis.orientation?1:0),this.chartSize.height*("BOTTOM"==this.xAxis.orientation?1:-1)/2-this.paddingY/2),h=[];for(n in this.categories){var n=parseInt(n),r={point:S.line(e*(n+1)-this.chartSize.width/2-(this.canvasSize.width-this.chartSize.width)/2+this.paddingX*("LEFT"==this.yAxis.orientation?1:0),this.chartSize.height*("BOTTOM"==this.xAxis.orientation?1:-1)/2-this.paddingY/2-5*("BOTTOM"==this.xAxis.orientation?1:-1),e*(n+1)-this.chartSize.width/2-(this.canvasSize.width-this.chartSize.width)/2+this.paddingX*("LEFT"==this.yAxis.orientation?1:0),this.chartSize.height*("BOTTOM"==this.xAxis.orientation?1:-1)/2-this.paddingY/2),text:S.text(this.categories[n]).css(A.extend({lineHeight:1,fontSize:this.xAxis.text.fontSize,color:this.xAxis.text.color},z?{}:{left:e*(n+1),top:this.xAxis.text.fontSize*("BOTTOM"==this.xAxis.orientation?1:-1.5)})).attr(A.extend({},z?{x:e*(n+1)-this.chartSize.width/2+this.paddingX*("LEFT"==this.yAxis.orientation?.5:-.5),y:"BOTTOM"==this.xAxis.orientation?this.chartSize.height/2-this.paddingY/2+1.625*this.xAxis.text.fontSize:-this.chartSize.height/2-this.paddingY/2-this.xAxis.text.fontSize,"text-anchor":"middle",fill:this.xAxis.text.color}:{})).appendTo(s)};s.append(r.point.attr(A.extend({},z?{stroke:this.xAxis.stroke.color,"stroke-width":this.xAxis.stroke.width}:{stroked:!0,strokecolor:this.xAxis.stroke.color,strokeweight:1.5*this.xAxis.stroke.width+"px"})).attr({})),h.push(r)}s.append(o.attr(A.extend({},z?{stroke:this.xAxis.stroke.color,"stroke-width":this.xAxis.stroke.width}:{stroked:!0,strokecolor:this.xAxis.stroke.color,strokeweight:1.5*this.xAxis.stroke.width+"px"})))}if(this.yAxis.isShow){for(var o=S.line((-this.canvasSize.width/2+this.paddingX)*("LEFT"==this.yAxis.orientation?1:-1),this.conValToLat(this.range[0]),(-this.canvasSize.width/2+this.paddingX)*("LEFT"==this.yAxis.orientation?1:-1),this.conValToLat(this.range[1])),a=[],n=0;n<this.yAxis.division;n++){r={point:S.line((-this.canvasSize.width/2+this.paddingX)*("LEFT"==this.yAxis.orientation?1:-1),this.conValToLat((this.range[1]-this.range[0])/(this.yAxis.division+1)*(n+1)),(-this.canvasSize.width/2+this.paddingX+5)*("LEFT"==this.yAxis.orientation?1:-1),this.conValToLat((this.range[1]-this.range[0])/(this.yAxis.division+1)*(n+1))),text:S.text(this.yAxis.text.formatter((this.range[1]-this.range[0])/(this.yAxis.division+1)*(n+1))).css(A.extend({lineHeight:1,fontSize:this.yAxis.text.fontSize,color:this.yAxis.text.color},z?{}:{left:(-this.canvasSize.width+this.paddingX)*("LEFT"==this.yAxis.orientation?0:-1)-10*("LEFT"==this.yAxis.orientation?1.5:-1),top:this.chartSize.height-(this.chartSize.height/(this.yAxis.division+1)*(n+1)+this.yAxis.text.fontSize/3)})).attr(A.extend({},z?{x:(-this.canvasSize.width/2+this.paddingX-10)*("LEFT"==this.yAxis.orientation?1:-1),y:this.conValToLat((this.range[1]-this.range[0])/(this.yAxis.division+1)*(n+1))+this.yAxis.text.fontSize/3,"text-anchor":"LEFT"==this.yAxis.orientation?"end":"start",fill:this.yAxis.text.color}:{})).appendTo(s)};s.append(r.point.attr(A.extend({},z?{stroke:this.yAxis.stroke.color,"stroke-width":this.yAxis.stroke.width}:{stroked:!0,strokecolor:this.yAxis.stroke.color,strokeweight:1.5*this.yAxis.stroke.width+"px"})).attr({})),h.push(r),a.push(r)}s.append(o.attr(A.extend({},z?{stroke:this.yAxis.stroke.color,"stroke-width":this.yAxis.stroke.width}:{stroked:!0,strokecolor:this.yAxis.stroke.color,strokeweight:1.5*this.yAxis.stroke.width+"px"})))}var d=S.group(this.canvasSize).appendTo(i),l=[],c=[],x=[];for(p in this.dataSet){var p=parseInt(p),g=this.dataSet[p],w=[],u=[[e-this.chartSize.width/2+this.paddingX*("LEFT"==this.yAxis.orientation?1:0)-(this.canvasSize.width-this.chartSize.width)/2,this.conValToLat(this.range[0])]];for(n in c[p]=[],g){if((n=parseInt(n))+1>this.categories.length)break;var y={x:e*(n+1)-this.chartSize.width/2-(this.canvasSize.width-this.chartSize.width)/2+this.paddingX*("LEFT"==this.yAxis.orientation?1:0),y:this.conValToLat(g[n])},f=(w.push([y.x,y.y]),u.push([y.x,y.y]),S.circle(y.x,y.y,1.5*this.line.dot.radius).attr(A.extend({},z?{fill:"#fff"}:{fillcolor:"#fff",stroked:!1}))),y=S.circle(y.x,y.y,this.line.dot.isHollow?this.line.dot.radius/3*2:this.line.dot.radius).addClass("wgt-polyline-dot").attr(A.extend({},z?{Class:"wgt-polyline-dot",fill:this.line.dot.isHollow?"#fff":this.getColor(p),stroke:this.getColor(p),"stroke-width":this.line.dot.isHollow?this.line.dot.radius/3:0}:{fillcolor:this.line.dot.isHollow?"#fff":this.getColor(p),stroked:this.line.dot.isHollow,strokecolor:this.getColor(p),strokeweight:this.line.dot.isHollow?this.line.dot.radius/3:"0px"})).data({data:{category:this.categories[n],value:g[n],index:n},dataSet:{index:p}});c[p].push([f,y])}u.push([e*w.length-this.chartSize.width/2-(this.canvasSize.width-this.chartSize.width)/2+this.paddingX*("LEFT"==this.yAxis.orientation?1:0),this.conValToLat(this.range[0])]),this.line.isShowShadow&&x.push(S.polygon(u).css({opacity:.15}).attr(A.extend({},z?{fill:this.getColor(p)}:{stroked:!1,fillcolor:this.getColor(p)})).addClass("wgt-polyline-shadow").data({dataSet:{index:p}})),l.push(S.polyline(w).addClass("wgt-polyline-line").attr(A.extend({},z?{fill:"transparent",stroke:this.getColor(p),"stroke-width":this.line.stroke.width}:{filled:!1,stroked:!0,strokecolor:this.getColor(p),strokeweight:1.5*this.line.stroke.width+"px"})).data({dataSet:{index:p}}))}for(n in this.dataSet)for(var p in this.line.isShowShadow&&d.append(x[n]),d.append(l[n]),this.dataSet[n])d.append(c[n][p]);return this.node=t},getHTML:function(){var t=this.getNode();return z?(new XMLSerializer).serializeToString(t[0]):t.html()}},e.exports=h});
;/*!wiki-common:widget/ui/radar/radar.js*/
define("wiki-common:widget/ui/radar/radar",function(t,e,a){var M,C=t("wiki-common:widget/lib/jquery/jquery"),i=t("wiki-common:widget/util/browser"),b=t("wiki-common:widget/util/color"),h=t("wiki-common:widget/util/animation"),c=t("wiki-common:widget/util/safeCall"),o=t("wiki-common:widget/util/number"),y=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");function r(t){if(!t)throw new Error("[Radar Exception]: No arguments.");if(!t.categories||t.categories.length<3)throw new Error('[Radar Exception]: Invalid argument "categories".');this.chartSize=isNaN(parseInt(t.chartSize))?100:parseInt(t.chartSize),this.radarType=/^SPIDER|CIRCLE$/i.test(t.radarType)?RegExp.$_:"SPIDER",this.canvasSize=C.extend({width:this.chartSize,height:this.chartSize},t.canvasSize),this.bgColor=t.bgColor||"#F8F8F8",this.bgFillingMode=/^NONE|ALTERNATIVE|GRADIENT$/i.test(t.bgFillingMode)?RegExp.$_:"NONE",this.lineColor=t.lineColor||"#E3E3E3",this.borderColor=t.borderColor||this.lineColor,this.showBorder="transparent"!=this.borderColor.toLowerCase(),this.graphicR=(this.chartSize-(this.showBorder?2:0))/2,this.valueRange=[].concat(t.valueRange||10).slice(0,2),this.valueRange.length<2&&this.valueRange.unshift(0),this.scaleSpan=(isNaN(parseFloat(t.scaleSpan))?(this.valueRange[1]-this.valueRange[0])/3:parseFloat(t.scaleSpan))||1,this.scaleCount=Math.ceil((this.valueRange[1]-this.valueRange[0])/this.scaleSpan),this.scaleColor=t.scaleColor||(this.showBorder?this.borderColor:this.lineColor),this.showScales="boolean"!=typeof t.showScales||t.showScales,this.categories=t.categories,this.labelColor=t.labelColor||"#666",this.labelFontSize=Math.max(isNaN(parseInt(t.labelFontSize))?12:parseInt(t.labelFontSize),10),this.categoryAngleStep=2*Math.PI/this.categories.length,this.initialDataSet=t.dataSet||[],this.dataSet=[],this.dataSetGroup}y||!i.ie()||document.namespaces.v||(document.namespaces.add("v","urn:schemas-microsoft-com:vml"),document.createStyleSheet().addRule(".v","behavior:url(#default#VML)")),y&&C("body").on("mouseover",".wgt_radar .data-graphic",function(){var t=C(this);t.parent().append(t)}),M=y?{createElement:function(t){return C(document.createElementNS("http://www.w3.org/2000/svg",t))},group:function(){return this.createElement("g")},line:function(t,e,a,i){return this.createElement("line").attr({x1:t,y1:e,x2:a,y2:i})},polygon:function(t){return this.createElement("polygon").attr("points",t.join(" "))},circle:function(t,e,a){return this.createElement("circle").attr({cx:t,cy:e,r:a})},text:function(t){return this.createElement("text").text(t)},addTitle:function(t,e){C("title",t).remove(),C(t).append(this.createElement("title").text(e))},getCanvas:function(t){return this.createElement("svg").attr({width:t.width,height:t.height,class:"wgt_radar"}).append(this.createElement("g").attr({class:"canvas",transform:"translate("+t.width/2+","+t.height/2+")"}))}}:{createElement:function(t){return C(document.createElement("<v:"+t+' class="v" />')).css({position:"absolute",display:"block",top:0,left:0})},group:function(t){return this.createElement("group").attr({coordsize:t.width+" "+t.height,coordorigin:-t.width/2+" "+-t.height/2}).css({width:t.width,height:t.height})},line:function(t,e,a,i){return this.createElement("line").attr({from:Math.round(t)+","+Math.round(e),to:Math.round(a)+","+Math.round(i)})},polygon:function(t){t=[].concat(t,[t[0]]);return this.createElement("polyline").attr("points",C.map(t,function(t){return[Math.round(t[0]),Math.round(t[1])]}).join(" "))},circle:function(t,e,a){return this.createElement("oval").css({left:Math.round(t-a),top:Math.round(e-a),width:Math.round(2*a),height:Math.round(2*a)})},text:function(t){return this.createElement("textbox").css({padding:"0"}).text(t)},addTitle:function(t,e){C(t).attr(C.extend({},e?{title:e}:{}))},getCanvas:function(t){return C("<div>").addClass("wgt_radar").css({position:"relative"}).append(C("<div>").addClass("canvas").css({width:t.width,height:t.height}))}},r.prototype={constructor:r,getNode:function(){for(var t=M.getCanvas(this.canvasSize),e=C(".canvas",t),a=M.group(this.canvasSize).appendTo(e),i=(100-b.getL(this.bgColor))/(this.scaleCount-1),o=this.scaleCount-1;0<=o;--o){var r,n=[],s=o==this.scaleCount-1,l=(o+1)/this.scaleCount*this.graphicR;if("SPIDER"==this.radarType){for(var h=0;h<this.categories.length;++h)n.push([Math.cos(h*this.categoryAngleStep-Math.PI/2)*l,Math.sin(h*this.categoryAngleStep-Math.PI/2)*l]);r=M.polygon(n)}else r=M.circle(0,0,l);var c="ALTERNATIVE"==this.bgFillingMode?o%2?this.bgColor:"#FFF":"GRADIENT"==this.bgFillingMode?b.lighten(this.bgColor,i*(this.scaleCount-1-o)):"#FFF";y?a.append(r.attr(C.extend({fill:c},this.showBorder?{stroke:this.borderColor,"stroke-width":s?2:1}:null))):a.append(r.attr(C.extend({fillcolor:c},this.showBorder?{stroked:!0,strokecolor:this.borderColor,strokeweight:(s?2:1)+"px"}:{stroked:!1})))}for(o=0;o<this.categories.length;++o){var g=M.line(0,0,Math.cos(o*this.categoryAngleStep-Math.PI/2)*this.chartSize/2,Math.sin(o*this.categoryAngleStep-Math.PI/2)*this.chartSize/2);y?a.append(g.attr({stroke:this.lineColor,"stroke-width":"1"})):a.append(g.attr({stroked:!0,strokecolor:this.lineColor,strokeweight:"1px"}))}if(this.showScales)for(var d=(this.valueRange[1]-this.valueRange[0])/this.scaleCount,u=this.graphicR/this.scaleCount,p=Math.max(u/2,10),o=0;o<this.scaleCount-1;++o){var S=p/4,f=-(o+1)*u-2;a.append(M.text(Math.round(100*(this.valueRange[0]+d*(o+1)))/100).attr({x:S,y:f}).css(C.extend({fontSize:p,lineHeight:1},y?{fill:this.scaleColor}:{color:this.scaleColor,left:S+this.chartSize/2-p,top:f+this.chartSize/2-p/2})))}for(l=(this.chartSize+this.labelFontSize)/2,o=0;o<this.categories.length;++o){var m=Math.PI/2,v=o*this.categoryAngleStep-m,w=this.categories[o].length*this.labelFontSize,S=Math.cos(v)*l+(Math.abs(v)==m?-w/2:-m<v&&v<m?0:-w),f=Math.sin(v)*l+(v%Math.PI==0?this.labelFontSize/2:0<v&&v<Math.PI?this.labelFontSize:0);a.append(M.text(this.categories[o]).attr({x:S,y:f}).css(C.extend({fontSize:this.labelFontSize,lineHeight:1},y?{fill:this.labelColor}:{color:this.labelColor,left:S+this.chartSize/2-this.labelFontSize,top:f+this.chartSize/2-this.labelFontSize,"white-space":"nowrap"})))}return this.dataSetGroup=M.group(this.canvasSize).attr({class:"v data-graphic-group"}).appendTo(e),this.addDataSet(this.initialDataSet),this.node=t},getHTML:function(){var t=this.getNode();return y?(new XMLSerializer).serializeToString(t[0]):t.html()},addDataSet:function(t,e){if((t=[].concat(t)).length){for(var a=C(".data-graphic",this.dataSetGroup).length,i=[],o=0;o<t.length;++o){for(var r=[],n=0;n<this.categories.length;++n){var s=(t[o].data[n]||0)/this.valueRange[1]*this.graphicR;r.push([Math.cos(n*this.categoryAngleStep-Math.PI/2)*s,Math.sin(n*this.categoryAngleStep-Math.PI/2)*s])}t[o].color=t[o].color||b.getStdHue(a+o),t[o].title=t[o].title||"",t[o].polygonPoints=r,t[o].graphic=M.polygon(r).attr(C.extend({class:"v data-graphic",transform:"scale(0)"},y?{fill:t[o].color||b.getStdHue(a+o)}:{stroked:"false",fillcolor:t[o].color||b.getStdHue(a+o)})),M.addTitle(t[o].graphic,t[o].title),i.push(t[o].graphic)}this.dataSet=this.dataSet.concat(t),this.dataSetGroup.append(i);var l=this;h(800,function(a){C.each(i,function(t,e){C(e).attr("transform","scale("+a+")")})},"easeOutBack",function(){c(e,i=null,l)})}},removeDataSet:function(t,e){var i;(t=!(t=[].concat(t||[])).length&&this.dataSet.length?o.getSerialNums(this.dataSet.length):t).length?(i=this,h(400,function(a){C.each(t,function(t,e){i.dataSet[e]&&C(i.dataSet[e].graphic).attr("transform","scale("+(1-a)+")")})},"easeInBack",function(){C.each(t,function(t,e){i.dataSet[e]&&(C(i.dataSet[e].graphic).remove(),i.dataSet[e]=null)}),i.dataSet=C.map(i.dataSet,function(t){return t}),c(e,null,i)})):c(e,null,i)},resetDataSet:function(t,e,a){if(t=parseInt(t),e=e||{},!isNaN(t)&&0<=t&&t<this.dataSet.length){var i=this.dataSet[t];if(e.title&&e.title!=i.title&&(i.title=e.title,M.addTitle(i.graphic,i.title)),e.color&&e.color!=i.color&&(i.color=e.color,i.graphic.attr(y?"fill":"fillcolor",i.color)),e.data&&e.data.length){for(var o=[],r=0;r<this.categories.length;++r){var n=(e.data[r]||0)/this.valueRange[1]*this.graphicR;o.push([Math.cos(r*this.categoryAngleStep-Math.PI/2)*n,Math.sin(r*this.categoryAngleStep-Math.PI/2)*n])}var s,l=C.map(o,function(t,e){return[[t[0]-i.polygonPoints[e][0],t[1]-i.polygonPoints[e][1]]]});y?(s=this,h(400,function(a){i.graphic.attr({points:C.map(i.polygonPoints,function(t,e){return[[t[0]+l[e][0]*a,t[1]+l[e][1]*a]]}).join(" ")})},null,function(){i.polygonPoints=o,c(a,null,s)})):(t=[].concat(o,[o[0]]),t=M.polygon(t).attr({class:"v data-graphic",stroked:"false",fillcolor:i.color,title:i.title}),i.graphic.replaceWith(t),i.graphic=t,i.polygonPoints=o,c(a,null,this))}else c(a,null,s)}}},a.exports=r});
;/*!wiki-common:widget/ui/switch/switch.js*/
define("wiki-common:widget/ui/switch/switch",function(t,e,a){"use strict";function i(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){function n(t){var e=t.dom,a=t.options,i=t.value,t=t.onChange;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.prefixClass="wgt_",this.rootClass="wgt_switch",this.optionClass="wgt_switch-option",this.activeClass="wgt_switch-active",this.$root=$('<div class="'.concat(this.rootClass,'"></div>')),$(e).append(this.$root),this.$options=[],this.value=i,this.onChange=t,this._render(a),this._bindEvent()}var t,e,a;return t=n,(e=[{key:"_render",value:function(t){var a=this;t.forEach(function(t){var e=t.label,t=t.value,t=$('<span class="'.concat(a.optionClass,'" data-value="').concat(t,'">').concat(e,"</span>"));a.$options.push(t),a.$root.append(t)}),this._changeActive()}},{key:"_changeActive",value:function(){var e=this;this.$options.forEach(function(t){e.value===t.data("value")?t.addClass(e.activeClass):t.removeClass(e.activeClass)})}},{key:"_bindEvent",value:function(){var a=this;this.$options.forEach(function(e){e.on("click",function(t){a.value=e.data("value"),a._changeActive(),a.onChange(a.value)})})}}])&&i(t.prototype,e),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),n}();e.default=n,a.exports=e.default});
;/*!wiki-common:widget/ui/tagsInput/tagsInput.js*/
define("wiki-common:widget/ui/tagsInput/tagsInput",function(t,a,i){var n=t("wiki-common:widget/lib/jquery/jquery"),e=t("wiki-common:widget/lib/jsmart/jsmart"),g=t("wiki-common:widget/util/safeCall"),s=(e.prototype.registerPlugin("modifier","trim",n.trim),new e('\n<span class="tag{%if $clickRemove%} no-remove{%/if%}">\n<span class="tag-con">{%$tag.text|trim|escape|f_escape_xml%}</span>\n{%if !$clickRemove%}\n<a href="javascript:;" class="remove">×</a>\n{%/if%}\n</span>\n'.replace(/\s*<!--[\s\S]*?-->\s*/g,"")));function o(){var t,a=n.trim(this.tagsInput.val());if(a&&(t=this.ignoreSpace?a.split(/\n+|\r+/):a.split(/\s+/),!this.validation||g(this.validation,[t],this))){var i=[];for(e in t)i.push({text:t[e]});var e,s="";for(e in i)s+=r.call(this,i[e]);newTagNodes=n(s),this.tagsInput.val(""),g(this.onTagAdd,[i,newTagNodes],this);a=n(".tag",this.tagsBox);a.length>=this.tagsMaxCount&&(this.tagsInput.hide(),g(this.onTagsInputComplete,[n(".tag-con",a).map(function(){return n(this).text()}),a],this))}}function r(t){var a,i;if(!(n(".tag",this.tagsBox).length>=this.tagsMaxCount))return a=s.fetch({tag:t,clickRemove:this.clickRemove}),i=n(a),t.data&&i.data(t.data),0<this.tagsBox.find(".tag").length?this.tagsBox.find(".tag:last").after(i):this.tagsBox.prepend(i),{tagHTML:a,tag:i}}function c(t){t.length&&(g(this.onTagRemove,[n(".tag-con",t).text(),t],this),t.remove())}function l(t){if(!t)throw new Error("[TagsInput Exception]: No arguments.");if(!n(t.tagsBox).length)throw new Error('[TagsInput Exception]: Invalid argument "tagsBox".');if(!n(t.tagsInput).length)throw new Error('[TagsInput Exception]: Invalid argument "tagsInput".');for(var a in this.tagsBox=n(t.tagsBox),this.tagsInput=n(t.tagsInput),this.tagsMaxCount=isNaN(parseInt(t.tagsMaxCount))?1/0:Math.abs(parseInt(t.tagsMaxCount)),this.TriggerTagAdd=(t.TriggerTagAdd||"ENTER|SPACE|BLUR").toUpperCase().split("|"),this.ignoreSpace=t.ignoreSpace||!1,this.disableEnterTriggerTagAdd=!0,this.disableSpaceTriggerTagAdd=!0,this.disableBlurTriggerTagAdd=!0,this.clickRemove=t.clickRemove,this.TriggerTagAdd)switch(this.TriggerTagAdd[a]){case"ENTER":this.disableEnterTriggerTagAdd=!1;break;case"SPACE":this.disableSpaceTriggerTagAdd=!1;break;case"BLUR":this.disableBlurTriggerTagAdd=!1}this.validation=t.validation,this.onTagAdd=t.onTagAdd,this.onTagRemove=t.onTagRemove,this.onTagsInputComplete=t.onTagsInputComplete;var i=this;i.clickRemove?this.tagsBox.on("click",".tag",function(t){c.call(i,n(this)),n(".tag",i.tagsBox).length<i.tagsMaxCount&&i.tagsInput.show()}):this.tagsBox.on("click",function(t){t=n(t.target);t.hasClass("remove")?(c.call(i,t.parent()),n(".tag",i.tagsBox).length<i.tagsMaxCount&&i.tagsInput.show()):i.tagsInput.focus()}),this.keyHoldOn=!1,this.tagsInput.on({keydown:function(t){switch(t.which){case 8:i.tagsInput.val()||i.keyHoldOn?i.keyHoldOn=!0:c.call(i,n(".tag",i.tagsBox).last());break;case 32:i.disableSpaceTriggerTagAdd||(o.call(i),t.preventDefault());break;case 13:i.disableEnterTriggerTagAdd||o.call(i)}},keyup:function(t){i.keyHoldOn=!1},focus:function(t){clearTimeout("timer")},focusout:function(t){i.disableBlurTriggerTagAdd||setTimeout(function(){o.call(i)},300)}})}l.prototype={constructor:l,buildTags:function(){o.call(this)},addTags:function(t){var a,i="";for(a in t)i+=r.call(this,t[a]).tagHTML;return i},addTagHandle:function(t){return r.call(this,t).tag},getTags:function(){var i=[];return this.tagsBox.children(".tag").each(function(){var t={text:n(this).children(".tag-con").text()},a=n(this).data();a&&(t.data=a),i.push(t)}),i},resetTags:function(t){t&&"string"==typeof t&&(n(".tag",this.tagsBox).remove(),o.call(self))}},i.exports=l});
;/*!wiki-common:widget/ui/videoAutoPlay/video-ui-plugin.es.js*/
define("wiki-common:widget/ui/videoAutoPlay/video-ui-plugin.es",function(e,i,o){"use strict";var u=(u=e("wiki-common:node_modules/larkplayer/dist/larkplayer.min"))&&u.__esModule?u:{default:u};e("wiki-common:widget/lib/jquery/jquery"),u.default.Component,u.default.Events});
;/*!wiki-common:widget/ui/videoAutoPlay/videoAutoPlay.es.js*/
define("wiki-common:widget/ui/videoAutoPlay/videoAutoPlay.es",function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.createLogField=void 0;var p=(a=e("wiki-common:node_modules/larkplayer/dist/larkplayer.min"))&&a.__esModule?a:{default:a};function o(e,i){for(var t=0;t<i.length;t++){var a=i[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(i,e){var t,a=Object.keys(i);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(i),e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})),a.push.apply(a,t)),a}function d(a){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?l(Object(o),!0).forEach(function(e){var i,t;i=a,t=o[e=e],e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(o,e))})}return a}e("wiki-common:node_modules/larkplayer-ui/dist/larkplayer-ui");var y=e("wiki-common:widget/lib/jquery/jquery"),a=(e("wiki-common:widget/ui/videoAutoPlay/video-ui-plugin.es"),e("wiki-common:widget/lib/jsmart/jsmart")),n=e("wiki-common:widget/ui/dialog/dialog"),r=e("wiki-common:widget/tools/clickstream/clickstream"),s=e("wiki-common:widget/util/browser"),c="top2bottom",u="bottom2top",m=null,h=new a('<div class="video-dialog-content">\n<div class="dialog-player">\n<div class="player-container">\n</div>\n<div class="player-bar">\n<span class="bar-title"></span>\n<span class="bar-vv"><em class="wiki-lemma-icons wiki-lemma-icons_eye"></em><span class="bar-vv-num"></span></span>\n</div>\n</div>\n</div>\n'),v=3e3,g={};function f(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length?arguments[1]:void 0,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=e.isVertical,o=e.secondId,l=e.index,n=e.duration,d=e.title,r=e.recCategory,s=e.isCollect,c=e.mainVideoId,u=e.isMainVideo,e=e.showCollectList;return{play:!1,validplay:!1,completeplay:!1,durationTimer:null,timestamp:0,playedTime:0,accumulatedPlayedTime:0,isVertical:isNaN(Number(a))?0:Number(a),secondId:o,index:l,duration:n,title:d,page:i,param:t,recCategory:r,secondVideoType:s&&!u||u&&e?"2":"1",albumId:s&&!u||u&&e?c:""}}function w(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=Date.now(),t=i-e.logTimestamp;e.logTimestamp&&t<2*v&&(e.playedTime+=t,e.accumulatedPlayedTime+=t),e.logTimestamp=i}function b(){var e,i,t,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};a.playedTime&&(e=a.secondId,i=a.isVertical,t=a.mediaId,r.logTimingVideo(d({time_duration:a.playedTime,secondId:e,isVertical:i,mediaId:t},g)),a.playedTime=0)}function P(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};w(e),b(e),clearInterval(e.logDurationTimer),e.logTimestamp=0,e.logDurationTimer=null}i.createLogField=f;e=function(){function i(e){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");if(!e||!e.videoClass)throw new Error('[VideoAutoPlayer Exception]: Invalid argument "videoClass".');this.videoClass=e.videoClass,this.throttle=e.throttle||250,this.delayTime=e.delayTime||250,this.isShowDialog=e.isShowDialog||!1,this.isIE=!!s.ie(),this.disabledAutoPlay=e.disabledAutoPlay,this.throttleIntervel=e.throttleIntervel||3e3,g=e.logParams||{},this.initParams(),this.bindEvents()}var e,t,a;return e=i,(t=[{key:"initParams",value:function(){this.playerMap={},this.playList=[],this.playGuid=null,this.videoQueen=[],this.direction=c,this.lastScrollY=0}},{key:"onPlay",value:function(e){var i,t,a;(i=e)&&!i.logPlay&&(i.logPlay=!0,t=i.secondId,a=i.isVertical,i=i.mediaId,r.logActVideo(d({video_action:"play",secondId:t,isVertical:a,mediaId:i},g))),clearInterval(e.logDurationTimer),e.logDurationTimer=setInterval(function(){b(e)},6*v)}},{key:"onPause",value:function(e){P(e)}},{key:"onTimeUpdate",value:function(e,i){var t,a,o,l,n;w(e),3e3<=(t=e).accumulatedPlayedTime&&!t.logValidPlay&&(t.logValidPlay=!0,a=t.secondId,o=t.isVertical,l=t.mediaId,n=t.accumulatedPlayedTime,t=t.playedTime,r.logActVideo(d({video_action:"validplay",secondId:a,isVertical:o,mediaId:l,accumulatedPlayedTime:n,playedTime:t},g))),.8<=i.currentTime()/i.duration()&&function(){var e,i,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t.logCompletePlay||(t.logCompletePlay=!0,e=t.secondId,i=t.isVertical,t=t.mediaId,r.logActVideo(d({video_action:"completeplay",secondId:e,isVertical:i,mediaId:t},g)))}(e)}},{key:"onComplete",value:function(e){!function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};setTimeout(function(){e.logPlay=e.logValidPlay=e.logCompletePlay=!1},v),e.accumulatedPlayedTime=0,e.playedTime=0,P(e)}(e)}},{key:"reset",value:function(){for(var e in this.playerMap)y(this.playerMap[e].el).parents(".J-video-box").remove(),this.playerMap[e].dispose();this.initParams(),this.start()}},{key:"start",value:function(){this.videoQueen=y(this.videoClass),this.renderVideo()}},{key:"renderVideo",value:function(){this.playList=this.videoQueen.filter(function(e,i){return!y(i).data("paused")}).filter(this.getVideoStatus.bind(this));var e=this.getPlayEl();e?this.startVideo(e):this.playGuid&&this.playerMap[this.playGuid]&&this.playerMap[this.playGuid].pause()}},{key:"bindEvents",value:function(){var e=this,i=(y(document).scroll(function(){e.handleScroll()}),this);y("body").on("click",this.videoClass,function(e){0===y(e.target).parents(".J-video-box").length&&i.startVideo(this)})}},{key:"handleScroll",value:function(){var e=this;this.disabledAutoPlay||(this.updateDirection(),clearTimeout(m),m=setTimeout(function(){e.renderVideo()},this.throttle))}},{key:"getVideoStatus",value:function(e,i){var t=i.getBoundingClientRect(),i=i.offsetHeight;if(this.direction===c){if(t.bottom<window.innerHeight+i/3&&0<t.top)return!0}else if(this.direction===u&&t.top>-i/3&&t.bottom<window.innerHeight)return!0;return!1}},{key:"getPlayEl",value:function(){var a,e=this.playList.length;if(0===e)return null;if(1===e)return this.playList[0];e%2==0?a=window.innerHeight/2:this.direction===c?a+=window.innerHeight/2/e:a-=window.innerHeight/2/e;var o=null,l=window.innerHeight;return this.playList.filter(function(e,i){var t=i.getBoundingClientRect(),t=Math.min(Math.abs(t.top-a),Math.abs(t.bottom-a));t<l&&(l=t,o=i)}),o}},{key:"startVideo",value:function(e){var i=this,t=y(e).data("guid"),a=y(e).data("info"),o=f(y(e).data("info"),g.page,g);if(this.playGuid!==t){if(this.playerMap[t])return this.playerMap[t].play(),void(this.isIE&&this.playerMap[t].trigger("play"));var l,n,d,r=y('<li id="'+t+'" class="video-box J-video-box"></li>'),s=(y(e).append(r),{src:"string"==typeof a.playUrl?a.playUrl:a.playUrl.mp4,poster:a.cover?a.cover.url:a.coverUrl,width:e.clientWidth,autoplay:!this.disabledAutoPlay,height:e.clientHeight}),c=(0,p.default)(r[0],s),u=(this.disabledAutoPlay||(c.muted(!0),setTimeout(function(){c.play()},this.delayTime)),c.on("play",function(){r.show(),y(e).data("paused",!1),i.playGuid&&i.playGuid!==t&&i.playerMap[i.playGuid]&&(i.playerMap[i.playGuid].pause(),i.isIE&&u.playerMap[t].trigger("pause")),setTimeout(function(){i.playGuid=t,i.onPlay&&i.onPlay(o)}),"discussionvideo"===a.from?y.get("/api/discussion/viewnum?mediaId=".concat(a.mediaId)):y.get("/wikisecond/viewnum?type=set&secondId=".concat(a.secondId,"&mediaId=").concat(a.mediaId,"&secondKind=").concat(a.secondKind,"&from=userpagevideo&isVertical=").concat(a.isVertical))}),c.on("pause",function(){i.onPause&&i.onPause(o),i.playGuid=null,setTimeout(function(){i.playGuid||c.ended()||!i.getVideoStatus(0,e)||y(e).data("paused",!0)})}),c.on("ended",function(){c.isFullscreen()&&c.exitFullscreen(),i.onComplete&&i.onComplete(o),i.playGuid=null,r.hide()}),this);c.on("timeupdate",(l=function(){u.onTimeUpdate(o,c)},n=v,d=null,function(){var e=this,i=arguments;d=d||setTimeout(function(){l.apply(e,i),d=null},n)})),c.on("showDialog",function(){c.paused()&&c.play(),i.showDialog(e)}),this.playerMap[t]=c}}},{key:"updateDirection",value:function(){var e=window.scrollY||window.pageYOffset;this.direction=0<=e-this.lastScrollY?c:u,this.lastScrollY=e}},{key:"showDialog",value:function(e){var i=y(e).data("info");this.miniPlayGuid=y(e).data("guid"),this.initDialog(),y("#video-dialog-cnt").empty().append(h.fetch(i)),this.dialogPlayer=(0,p.default)("#video-dialog-cnt .player-container",{src:i.playUrl,autoplay:!0,width:800,height:600}),this.dialogPlayer.currentTime(this.playerMap[this.miniPlayGuid].currentTime()),this.dialog.show()}},{key:"initDialog",value:function(){var e=this;this.dialog||(this.dialog=new n({classNames:"video-dialog",hasCloseBtn:!0,content:'<div id="video-dialog-cnt"></div>',onShow:function(){y("body").on("keydown",e.closeDialogWhenEscKeydown.bind(e)),y("body").css({overflow:"hidden"})},onHide:function(){y("body").off("keydown",e.closeDialogWhenEscKeydown.bind(e)),y("body").css({overflow:"visible"}),e.playerMap[e.miniPlayGuid].currentTime(e.dialogPlayer.currentTime()),e.playerMap[e.miniPlayGuid].play(),e.dialogPlayer&&e.dialogPlayer.dispose()&&e.dialogPlayer.dispose()}}))}},{key:"closeDialogWhenEscKeydown",value:function(e){(27===e.keyCode||27===e.which)&&this.dialog&&this.dialog.hide&&this.dialog.hide()}}])&&o(e.prototype,t),a&&o(e,a),Object.defineProperty(e,"prototype",{writable:!1}),i}();t.exports=e});
;/*!wiki-common:widget/ui/videoPlayer/videoPlayer.js*/
define("wiki-common:widget/ui/videoPlayer/videoPlayer",function(e,i,t){var a=e("wiki-common:widget/lib/jquery/jquery"),r=e("wiki-common:widget/ui/iqiyiPlayer/iqiyiPlayer"),l=e("wiki-common:widget/lib/letvPlayer/letvPlayer"),o=e("wiki-common:widget/util/safeCall"),s=e("wiki-common:widget/util/guid"),n=e("wiki-common:widget/util/timeFormater"),c=e("wiki-common:widget/lib/jsmart/jsmart"),d=e("wiki-common:widget/lib/larkplayer/larkplayer"),h=new c('<div class="wgt-videoPlayer wgt-videoPlayer-{%$type|f_escape_xml%}" style="width: {%$width|f_escape_xml%}px; height: {%$height|f_escape_xml%}px">\n<div id="{%$guid|f_escape_xml%}" class="videoPlayer-instance"></div>\n</div>\n');function y(e,i,t){u.call(this,e,i,t),v.call(this)}function u(e,i,t){if(this.container=this.container||a(e),!this.container.get(0))throw new Error('[VideoPlayer Exception]: Invalid argument "container".');switch(this.videoSrc=i||this.videoSrc||{},this.videoSrc.type){case"baikePlayer":break;case"iqiyiPlayer":if(this.videoSrc.vid&&this.videoSrc.tvid)break;throw new Error('[VideoPlayer Exception]: Invalid argument "videoSrc".');case"letvPlayer":if(this.videoSrc.uu&&this.videoSrc.vu)break;throw new Error('[VideoPlayer Exception]: Invalid argument "videoSrc".');case"iframeTv":if(this.videoSrc.playUrl)break;throw new Error('[VideoPlayer Exception]: Invalid argument "playUrl".');default:throw new Error('[VideoPlayer Exception]: Invalid argument "videoSrc".')}this.videoSrc.cover=this.videoSrc.cover||"https://bkssl.bdimg.com/static/wiki-common/widget/ui/videoPlayer/resource/img/default-cover_9ac3d42.jpg",this.guid=this.guid||"videoPlayer_"+s(),this.ops=a.extend({width:640,height:360,autoplay:!0},t=t||{})}function v(){var t=this,e=(this.container.css({width:this.ops.width,height:this.ops.height}),a(h.fetch(a.extend({guid:this.guid,type:this.videoSrc.type},this.ops))));switch(this.container.html(e),this.videoSrc.type){case"baikePlayer":this.baikePlayer=d(this.guid,{width:this.ops.width,height:this.ops.height,autoplay:this.ops.autoplay,poster:this.ops.poster||"https://bkssl.bdimg.com/static/wiki-common/widget/ui/videoPlayer/resource/img/default-secondsKnow_5a0ce12.jpg",src:this.videoSrc.src,plugin:{playViaSecondId:{lemmaId:this.videoSrc.lemmaId,secondId:this.videoSrc.secondId,maxRetryTimes:3,recCategory:this.videoSrc.recCategory,isRecommend:this.videoSrc.isRecommend},playContinue:{key:function(e){return t.videoSrc.mid||e}}}}),this.baikePlayer.on("play",function(){a.each(t.eventsHandler.play,function(e,i){o(i,null,t)})}),this.baikePlayer.on("pause",function(){a.each(t.eventsHandler.pause,function(e,i){o(i,null,t)})}),this.baikePlayer.on("ended",function(){a.each(t.eventsHandler.complete,function(e,i){o(i,null,t)})}),this.baikePlayer.on("timeupdate",function(){a.each(t.eventsHandler.timeupdate,function(e,i){o(i,null,t)})}),this.baikePlayer.on("fullscreenchange",function(){a.each(t.eventsHandler.fullscreen,function(e,i){o(i,null,t)})}),this.baikePlayer.on("volumechange",function(){a.each(t.eventsHandler.volumechange,function(e,i){o(i,null,t)})}),this.baikePlayer.on("timeupdate",function e(i){"function"==typeof t.baikePlayer.currentTime&&"function"==typeof t.baikePlayer.poster&&.1<=t.baikePlayer.currentTime()&&(t.baikePlayer.poster(""),t.baikePlayer.off("timeupdate",e))});break;case"iqiyiPlayer":this.iqiyiPlayer=new r({container:"#"+this.guid,playerConfig:{vid:this.videoSrc.vid,tvId:this.videoSrc.tvid,width:this.ops.width,height:this.ops.height,showControl:0,autoHideControl:1,autoPlay:this.ops.autoplay,showLogo:0},swfConfig:{allowfullscreen:!0}}),window.lib={swf:{notice:function(e){if(e&&"playerStateChange"===(e=a.parseJSON(e)).type)switch(e.data.state){case"Playing":a.each(t.eventsHandler.play,function(e,i){o(i,null,t)});break;case"Paused":a.each(t.eventsHandler.pause,function(e,i){o(i,null,t)});break;case"EndPlay":a.each(t.eventsHandler.complete,function(e,i){o(i,null,t)})}}}};break;case"letvPlayer":this.letvPlayer=new l,this.letvPlayer.init({uu:this.videoSrc.uu,vu:this.videoSrc.vu,skinnable:0,posterType:0,autoReplay:1,controls:0,callbackJs:"cbk_"+this.guid},this.guid),window["cbk_"+this.guid]=function(e,i){switch(e){case"videoStart":case"videoResume":a.each(t.eventsHandler.play,function(e,i){o(i,null,t)});break;case"videoPause":a.each(t.eventsHandler.pause,function(e,i){o(i,null,t)});break;case"videoStop":a.each(t.eventsHandler.complete,function(e,i){o(i,null,t)})}};break;case"iframeTv":var i='<iframe frameborder="0" style="width:'+this.ops.width+"px;height:"+this.ops.height+'px;" src="'+decodeURIComponent(this.videoSrc.playUrl)+'"></iframe>';a("#"+this.guid).attr("class","iframe-tv-player").html(i)}this.eventsHandler={play:[],pause:[],complete:[],fullscreen:[],timeupdate:[],volumechange:[]},g.call(this,"play",function(){this.container.find(".videoPlayer-control .videoPlayer-toggle").addClass("videoPlayer-toggle-play")}),g.call(this,"pause",function(){p.call(this),this.container.find(".videoPlayer-control .videoPlayer-toggle").removeClass("videoPlayer-toggle-play")}),g.call(this,"complete",function(){p.call(this),this.container.find(".videoPlayer-control .videoPlayer-toggle").removeClass("videoPlayer-toggle-play");var e=P.call(this),i=f.call(this);this.container.find(".videoPlayer-time .curTime").text(n.diff(e,"hh:mm:ss",!1,!0)),this.container.find(".videoPlayer-time .totTime").text(n.diff(i,"hh:mm:ss",!1,!0)),this.container.find(".videoPlayer-timeline-progress").width(e/i*100+"%")})}function p(){clearInterval(this.timer)}function m(){switch(this.videoSrc.type){case"baikePlayer":this.baikePlayer.dispose();break;case"iqiyiPlayer":break;case"letvPlayer":this.letvPlayer.sdk.closeVideo();break;case"iframeTv":a("#"+this.guid).html("")}p.call(this),this.hasInitControl=!1,this.container.empty()}function f(){switch(this.videoSrc.type){case"baikePlayer":return this.baikePlayer.duration();case"iqiyiPlayer":return a.parseJSON(this.iqiyiPlayer.player.getQiyiPlayerInfo()).totalDuration;case"letvPlayer":return this.letvPlayer.sdk.getVideoSetting().duration}}function P(){switch(this.videoSrc.type){case"baikePlayer":return this.baikePlayer.currentTime();case"iqiyiPlayer":return a.parseJSON(this.iqiyiPlayer.player.getQiyiPlayerInfo()).currentTime;case"letvPlayer":return this.letvPlayer.sdk.getVideoTime()}}function g(e,i){this.eventsHandler[e].push(i)}y.prototype={constructor:y,play:function(e){!function(e){if(e)return m.call(this),u.call(this,null,e),void v.call(this);switch(this.videoSrc.type){case"baikePlayer":this.baikePlayer.play();break;case"iqiyiPlayer":this.iqiyiPlayer.player.resumeQiyiVideo();break;case"letvPlayer":this.letvPlayer.sdk.resumeVideo()}}.call(this,e)},pause:function(){!function(){switch(this.videoSrc.type){case"baikePlayer":this.baikePlayer.pause();break;case"iqiyiPlayer":this.iqiyiPlayer.player.pauseQiyiVideo();break;case"letvPlayer":this.letvPlayer.sdk.pauseVideo()}}.call(this)},destroy:function(){m.call(this)},on:function(e,i){g.call(this,e,i)}},t.exports=y});
;/*!wiki-common:widget/ui/videoDialog/videoDialog.js*/
define("wiki-common:widget/ui/videoDialog/videoDialog",function(i,o,e){var l=i("wiki-common:widget/lib/jquery/jquery"),g=i("wiki-common:widget/ui/dialog/dialog"),w=i("wiki-common:widget/ui/videoPlayer/videoPlayer"),c=i("wiki-common:widget/util/guid");e.exports=function(i,o){o=l.extend({},{width:685,height:385,autoplay:!0},o);var e,d=c(),n="video-diaolog-container",t="video-dialog-"+d,d=o.width,a=o.height;new g({classNames:n,type:"MODAL",content:'<div class="'+t+'" style="width: '+d+"px; height: "+a+'px;"><div class="video-dialog__loading"></div></div>',icon:null,btns:null,hasCloseBtn:!0,onShow:function(){(e=new w("."+t,i,o)).play()},onHide:function(){e.pause(),e.destroy();var i=l("."+n);i.off(),i.remove()}}).show()}});