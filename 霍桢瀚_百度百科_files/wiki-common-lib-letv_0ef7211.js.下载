;/*!wiki-common:widget/lib/letvPlayer/letvPlayer.js*/
define("wiki-common:widget/lib/letvPlayer/letvPlayer",function(N,B,U){void 0===o&&(o={},o={shareObj:function(t,e){void 0===window.CloudSdkPlugin&&(window.CloudSdkPlugin={}),window.CloudSdkPlugin.hasOwnProperty("STK")||(window.CloudSdkPlugin.STK={}),window.CloudSdkPlugin.STK[t]=e},getObj:function(t){if(void 0===window.CloudSdkPlugin&&(window.CloudSdkPlugin={}),window.CloudSdkPlugin.hasOwnProperty("STK"))return window.CloudSdkPlugin.STK[t];throw Error("no "+t+" Obj")},creatPlugin:function(t,e){void 0===window.CloudSdkPlugin&&(window.CloudSdkPlugin={}),window.CloudSdkPlugin[t]=e},getPlugin:function(t,e){if("STK"==t)throw Error(t+" is not support");window.CloudSdkPlugin&&void 0!==window.CloudSdkPlugin[t]?e(window.CloudSdkPlugin[t]):h.getJS(o.PluginStack[t],function(){e(window.CloudSdkPlugin[t])},function(){e(null)},this,"utf-8")}}),o.shareObj("common.SOTool",o),s=navigator.userAgent.toLowerCase();var o,s,r,h={br:r={br:"",device:"",ver:"",params:null,os:""},getOs:function(){return""==r.os&&(r.os=function(t){var e="Win32"==navigator.platform||"Windows"==navigator.platform,i="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;if(i)return"mac";if(e){if(-1<t.indexOf("windows nt 5.0")||-1<t.indexOf("windows 2000"))return"win2000";if(-1<t.indexOf("windows nt 5.1")||-1<t.indexOf("windows XP"))return"winXP";if(-1<t.indexOf("windows nt 5.2")||-1<t.indexOf("windows 2003"))return"win2003";if(-1<t.indexOf("windows nt 6.0")||-1<t.indexOf("windows vista"))return"winVista";if(-1<t.indexOf("windows nt 6.1")||-1<t.indexOf("windows 7"))return"win7"}return/android/.test(t)?"android":t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)||t.match(/iphone/)||t.match(/ipad/)?"ios":"X11"!=navigator.platform||e||i?-1<String(navigator.platform).indexOf("Linux")?"linux":"un":"unix"}(s)),r.os},getUrlParams:function(t){if(null==r.params){var e={};if(-1!=(i=window.location.search).indexOf("?"))for(var i=i.substr(1).split("&"),o=0;o<i.length;o++){var s=i[o].substr(0,i[o].indexOf("=")),n=i[o].substr(i[o].indexOf("=")+1);e[s]=n}r.params=e}return!(!r.params||!r.params.hasOwnProperty(t))&&r.params[t]},getDevice:function(){if(""==r.device){t:{for(var t=[{name:"wph",test:/windows phone/},{name:"ipad",test:/ipad/},{name:"iphone",test:/iphone/},{name:"androidPad",test:/(?!.*mobile)android/},{name:"androidPhone",test:/android.*mobile/},{name:"android",test:/android/},{name:"pc",test:/windows/}],e=0;e<t.length;e++){var i=t[e];if(i.test.test(s)){t=i.name;break t}}t="un"}r.device=t}return r.device},getBrowser:function(){return""==r.br&&(r.br=F(s)),r.br},getBrowserVersion:function(){if(""==r.br&&(r.br=F(s)),""==r.ver){var t,e,i={};for(e in(t=s.match(/msie ([\d.]+)/))?i.msie=t[1]:(t=s.match(/firefox\/([\d.]+)/))?i.firefox=t[1]:(t=s.match(/360browser/))?i.b360=t[1]||"-":(t=s.match(/qqbrowser\/([\d.]+)/))?i.bqq=t[1]:(t=s.match(/ucbrowser\/([\d.]+)/))?i.buc=t[1]:(t=s.match(/baidubrowser\/([\d.]+)/))?i.bbaidu=t[1]:(t=s.match(/sogoumobilebrowser\/([\d.]+)/))?i.bsgm=t[1]:(t=s.match(/liebaofast\/([\d.]+)/))?i.blbfast=t[1]:(t=s.match(/mb2345browser\/([\d.]+)/))?i.b2345=t[1]:(t=s.match(/4g explorer\/([\d.]+)/))?i.b4g=t[1]:(t=s.match(/huohoubrowser\/([\d.]+)/))?i.bhuohou=t[1]:(t=s.match(/maxthon[\/ ]([\d.]+)/))?i.maxthon=t[1]:(t=s.match(/(opera)|(opr)\/([\d.]+)/))?i.opera=t[3]:(t=s.match(/chrome\/([\d.]+)/))?i.chrome=t[1]:(t=s.match(/version\/([\d.]+).*safari/))?i.safari=t[1]:i.other="-",t="",i)t=i[e];r.ver=t}return r.br+r.ver},now:Date.now||function(){return+new Date},getJS:function(t,e,i,o,s,n){var r,a,l;void 0!==t&&(r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,(a=document.createElement("script")).type="text/javascript",s&&(a.charset=s),a.onload=a.onreadystatechange=function(){a.readyState&&"loaded"!=a.readyState&&"complete"!=a.readyState||(a=a.onreadystatechange=a.onload=a.onerror=null,clearTimeout(l),"function"==typeof e&&e.call(o))},a.onerror=function(){a=a.onload=a.onreadystatechange=a.onerror=null,clearTimeout(l),"function"==typeof i&&i.call(o)},a.src=t,r.appendChild(a),n=n||1e4,l=setTimeout(function(){clearTimeout(l),"function"==typeof i&&i()},n))},getJSON:function(t,e,i,o,s,n){var r,a=this.now(),l="letvcloud"+a+Math.floor(100*Math.random()),d="$1"+l+"$2",h=0,p=0,c=this,u=-1,f=document.head||document.getElementsByTagName("head")[0]||document.documentElement,y=(/_r=/i.test(t)||(t+="&callback=?"),t=t.replace(/(\=)\?(&|$)|\?\?/i,d),o=o||5e3,s||2),g=n||1e3,m=(window[l]=function(t){m(),window[l]=null,u=-1,e.call(this,t,{responseTime:c.now()-a,retryCount:h})},function(){clearTimeout(p),r&&r.parentNode&&(f.removeChild(r),r.onload=r.onreadystatechange=null,r.onerror=null,r=void 0)}),v=function(){m(),y<=h?(clearTimeout(p),window[l]=null,i&&i.call(this,null,{responseTime:c.now()-a,retryCount:h,error:u})):setTimeout(w,g)},w=function(){m(),h++,t=t.replace(/&_r=[\d|\?]+/i,"&_r="+h),(r=document.createElement("script")).setAttribute("type","text/javascript"),r.setAttribute("src",t),r.setAttribute("charset","utf-8"),r.onload=r.onreadystatechange=function(t){r.onload=r.onreadystatechange=null,clearTimeout(p)},f.insertBefore(r,f.firstChild),u=1,p=setTimeout(v,o)};w()},getJSONbyAjax:function(t,e,i,o,s,n){var r,a=this.now(),l=0,d=this,h=-1,p=(o=o||5e3,s||2),c=n||1e3,u=function(){clearTimeout(0),r&&(r.onreadystatechange=null)},f=function(){u(),p<=l?(clearTimeout(0),i&&i.call(this,null,{responseTime:d.now()-a,retryCount:l,error:h})):setTimeout(y,c)},y=function(){u(),l++,(r=new XMLHttpRequest).timeout=o,r.onreadystatechange=function(t){4==r.readyState&&(200==r.status?(t=r.responseText,u(),h=-1,e.call(this,t,{responseTime:d.now()-a,retryCount:l})):f())},r.ontimeout=f,r.open("GET",t,!0),r.send(),h=1};y()},creatUuid:function(){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),e=[],i=0;i<32;i++)e[i]=t[0|16*Math.random()];return e.join("")},objectParseToString:function(t){if(null==t)return"";var e,i="",o=0;for(e in t)i=0<o?i+("&"+e+"="+t[e]):i+(e+"="+t[e]),o++;return i},cookie:function(t,e,i){if(void 0===e){if(e=null,document.cookie&&""!=document.cookie)for(i=document.cookie.split(";"),o=0;o<i.length;o++)if((s=i[o]).substring(0,t.length+1)==t+"="){e=decodeURIComponent(s.substring(t.length+1));break}return e}i=i||{},null===e&&(e="",i.expires=-1);var o="",s=(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)&&("number"==typeof i.expires?(o=new Date).setTime(o.getTime()+864e5*i.expires):o=i.expires,o="; expires="+o.toUTCString()),i.path?"; path="+i.path:""),n=i.domain?"; domain="+i.domain:"";return i=i.secure?"; secure":"",document.cookie=[t,"=",encodeURIComponent(e),o,s,n,i].join(""),null},setLocal:function(t,e,i){if(window.localStorage)try{localStorage.setItem(t,e)}catch(t){}this.cookie(t,e,i)},getLocal:function(t){if(window.localStorage)try{if(localStorage.getItem(t))return localStorage.getItem(t)}catch(t){}return this.cookie(t)},num2Time:function(t){return(parseInt(t/60)<10?"0"+parseInt(t/60)+":":parseInt(t/60)+":")+(t=parseInt(t%60)<10?"0"+parseInt(t%60):parseInt(t%60)+"")},clone:function(t){var e,i,o;if("object"!=typeof t||null===t)return t;if(t instanceof Array)for(e=[],i=0,o=t.length;i<o;i++)e[i]="object"==typeof t[i]&&null!=t[i]?arguments.callee(t[i]):t[i];else for(i in e={},t)e[i]="object"==typeof t[i]&&null!=t[i]?arguments.callee(t[i]):t[i];return e},isHttps:function(){try{return"https:"==window.location.protocol}catch(t){}return!1},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},addUrlParams:function(t,e){for(var i=0;i<t.length;i++){var o,s=t[i];for(o in e)-1==s.indexOf("&"+o+"=")&&-1==s.indexOf("?"+o+"=")&&(s=-1!=s.indexOf("?")?s+("&"+o+"="+e[o]):s+("?"+o+"="+e[o]));t[i]=s}},bindFun:function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}}};function F(t){for(var e=[{name:"ie",test:/msie/},{name:"opera",test:/opera/},{name:"firefox",test:/firefox/},{name:"safari",test:/safari.*(?!chrome)/},{name:"chrome",test:/chrome/},{name:"wph",test:/windows phone/},{name:"ps",test:/playstation/},{name:"uc",test:/ucbrowser|ucweb/},{name:"ps",test:/playstation/},{name:"xiaomi",test:/xiaomi/},{name:"qq",test:/qqbrowser/},{name:"weixin",test:/micromessenger/},{name:"360",test:/360browser/},{name:"baidu",test:/baidu/},{name:"qqwebview",test:/ qq/},{name:"sougou",test:/sougou/},{name:"liebao",test:/liebaofast/},{name:"letv",test:/eui browser/}],i="un",o=0;o<e.length;o++){var s=e[o];s.test.test(t)&&(i=s.name)}return i}o.shareObj("common.videoSdkTool",h),h.checkPano=function(){try{var t=document.createElement("canvas");if(window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl")))switch(h.getDevice()){case"androidPad":case"androidPhone":case"android":if("chrome"==h.getBrowser()||"firefox"==h.getBrowser())return!0;break;case"pc":return!0}}catch(t){}return!1},o.shareObj("common.videoSdkTool",h);var p=window,M=document,z="playNewId getVideoSetting getVideoTime pauseVideo resumeVideo seekTo replayVideo closeVideo setVolume shutDown startUp getBufferPercent setDefinition getDefinition getDefaultDefinition getDefinitionList setVideoPercent getVideoPercent setVideoScale getVideoScale resetVideoScale fullVideoScale setVideoRect getLoadPercent getDownloadSpeed getPlayRecord getPlayState setVideoColor getVideoColor getVersion setAutoReplay feedback getLog getServerTime callFlash".split(" "),W=function(t){var e,i,o,s,n=0,r=0,a="",l=[];if(!t)return t;for(t+="";e=(o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(n++))<<18|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(n++))<<12|(a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(n++)))<<6|(s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(n++))))>>16&255,i=o>>8&255,o&=255,l[r++]=64==a?String.fromCharCode(e):64==s?String.fromCharCode(e,i):String.fromCharCode(e,i,o),n<t.length;);return l.join("")},j={hash:function(t){for(var e=[],i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;e[(t=8*t.length)>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t,t=1732584193;for(var i=-271733879,o=-1732584194,s=271733878,n=0;n<e.length;n+=16){var r=t,a=i,l=o,d=s;t=u(t,i,o,s,e[n+0],7,-680876936),s=u(s,t,i,o,e[n+1],12,-389564586),o=u(o,s,t,i,e[n+2],17,606105819),i=u(i,o,s,t,e[n+3],22,-1044525330),t=u(t,i,o,s,e[n+4],7,-176418897),s=u(s,t,i,o,e[n+5],12,1200080426),o=u(o,s,t,i,e[n+6],17,-1473231341),i=u(i,o,s,t,e[n+7],22,-45705983),t=u(t,i,o,s,e[n+8],7,1770035416),s=u(s,t,i,o,e[n+9],12,-1958414417),o=u(o,s,t,i,e[n+10],17,-42063),i=u(i,o,s,t,e[n+11],22,-1990404162),t=u(t,i,o,s,e[n+12],7,1804603682),s=u(s,t,i,o,e[n+13],12,-40341101),o=u(o,s,t,i,e[n+14],17,-1502002290),t=g(t,i=u(i,o,s,t,e[n+15],22,1236535329),o,s,e[n+1],5,-165796510),s=g(s,t,i,o,e[n+6],9,-1069501632),o=g(o,s,t,i,e[n+11],14,643717713),i=g(i,o,s,t,e[n+0],20,-373897302),t=g(t,i,o,s,e[n+5],5,-701558691),s=g(s,t,i,o,e[n+10],9,38016083),o=g(o,s,t,i,e[n+15],14,-660478335),i=g(i,o,s,t,e[n+4],20,-405537848),t=g(t,i,o,s,e[n+9],5,568446438),s=g(s,t,i,o,e[n+14],9,-1019803690),o=g(o,s,t,i,e[n+3],14,-187363961),i=g(i,o,s,t,e[n+8],20,1163531501),t=g(t,i,o,s,e[n+13],5,-1444681467),s=g(s,t,i,o,e[n+2],9,-51403784),o=g(o,s,t,i,e[n+7],14,1735328473),t=c((i=g(i,o,s,t,e[n+12],20,-1926607734))^o^s,t,i,e[n+5],4,-378558),s=c(t^i^o,s,t,e[n+8],11,-2022574463),o=c(s^t^i,o,s,e[n+11],16,1839030562),i=c(o^s^t,i,o,e[n+14],23,-35309556),t=c(i^o^s,t,i,e[n+1],4,-1530992060),s=c(t^i^o,s,t,e[n+4],11,1272893353),o=c(s^t^i,o,s,e[n+7],16,-155497632),i=c(o^s^t,i,o,e[n+10],23,-1094730640),t=c(i^o^s,t,i,e[n+13],4,681279174),s=c(t^i^o,s,t,e[n+0],11,-358537222),o=c(s^t^i,o,s,e[n+3],16,-722521979),i=c(o^s^t,i,o,e[n+6],23,76029189),t=c(i^o^s,t,i,e[n+9],4,-640364487),s=c(t^i^o,s,t,e[n+12],11,-421815835),o=c(s^t^i,o,s,e[n+15],16,530742520),t=m(t,i=c(o^s^t,i,o,e[n+2],23,-995338651),o,s,e[n+0],6,-198630844),s=m(s,t,i,o,e[n+7],10,1126891415),o=m(o,s,t,i,e[n+14],15,-1416354905),i=m(i,o,s,t,e[n+5],21,-57434055),t=m(t,i,o,s,e[n+12],6,1700485571),s=m(s,t,i,o,e[n+3],10,-1894986606),o=m(o,s,t,i,e[n+10],15,-1051523),i=m(i,o,s,t,e[n+1],21,-2054922799),t=m(t,i,o,s,e[n+8],6,1873313359),s=m(s,t,i,o,e[n+15],10,-30611744),o=m(o,s,t,i,e[n+6],15,-1560198380),i=m(i,o,s,t,e[n+13],21,1309151649),t=m(t,i,o,s,e[n+4],6,-145523070),s=m(s,t,i,o,e[n+11],10,-1120210379),o=m(o,s,t,i,e[n+2],15,718787259),i=m(i,o,s,t,e[n+9],21,-343485551),t=v(t,r),i=v(i,a),o=v(o,l),s=v(s,d)}for(e=[t,i,o,s],t="",i=0;i<4*e.length;i++)t+="0123456789abcdef".charAt(e[i>>2]>>i%4*8+4&15)+"0123456789abcdef".charAt(e[i>>2]>>i%4*8&15);return t}},f={getTemplate:function(t,e,i,o){void 0!==i&&(i=i.replace(/{#}/g,o),e=e.replace(/{#}/g,o),f.loadCss(i)),i=(new Date).getTime(),o=e.match(/#{[a-z_A-Z0-9]{1,}}/g)||[];for(var s=[],n=0;n<o.length;n++){var r=o[n].replace(/^#{?|}$/g,"");e=e.replace(o[n],r+i),s.push(r)}for(t.innerHTML=e,n=0;n<s.length;n++)t[r=s[n]]=f.$E(r+i);return s},loadCss:function(t){var e=document.head||document.getElementsByTagName("head")[0]||document.documentElement,i=document.createElement("style");i.setAttribute("type","text/css"),i.innerHTML=t,e.appendChild(i)},$E:function(t){return null!=(t="string"==typeof t?document.getElementById(t):t)?t:null},$C:function(t){return document.createElement(t)},hasClassName:function(t,e){if(t)return 0!=(t=t.className).length&&!(t!=e&&!t.match(new RegExp("(^|\\s)"+e+"(\\s|$)")))},addClassName:function(t,e){var i;t&&(0==(i=t.className).length?t.className=i:i==e||i.match(new RegExp("(^|\\s)"+e+"(\\s|$)"))||(t.className=i+" "+e))},removeClassName:function(t,e){var i;t&&0!=(i=t.className).length&&(i==e?t.className="":i.match(new RegExp("(^|\\s)"+e+"(\\s|$)"))&&(t.className=i.replace(new RegExp("(^|\\s)"+e+"(\\s|$)")," ")))},addEvent:function(t,e,i){if(-1!=e.indexOf(","))for(var o=0,s=(e=e.split(",")).length;o<s;o++){var n=e[o];if(""==n)break;t.attachEvent?t.attachEvent("on"+n,i):t.addEventListener(n,i,!1)}else t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener(e,i,!1)},removeEvent:function(t,e,i){if(null!=(t=this.$E(t))&&"function"==typeof i&&void 0!==e)if(-1!=e.indexOf(","))for(var o=0,s=(e=e.split(",")).length;o<s;o++){var n=e[o];if(""==n)break;t.addEventListener?t.removeEventListener(n,i,!1):t.attachEvent&&t.detachEvent("on"+n,i)}else t.addEventListener?t.removeEventListener(e,i,!1):t.attachEvent&&t.detachEvent("on"+e,i)},getPos:function(t){var e;if((t=this.$E(t)).getBoundingClientRect)return e="CSS1Compat"==document.compatMode?document.documentElement:document.body,{x:(t=t.getBoundingClientRect()).left+e.scrollLeft,y:t.top+e.scrollTop};for(e=y_=0;t.offsetParent;)e+=t.offsetLeft,y_+=t.offsetTop,t=t.offsetParent;return{x:e+=t.offsetLeft,y:y_+=t.offsetTop}},getMousePoint:function(t){var e="createTouch"in document,i=y=0,o=document.documentElement,s=document.body;return t=t||window.event,y=window.pageYOffset?(i=window.pageXOffset,window.pageYOffset):(i=(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0),(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0)),e?(i=(t=t.touches.item(0)).pageX,y=t.pageY):(i+=t.clientX,y+=t.clientY),{x:i,y:y}},preventDefault:function(t){t?t.preventDefault():window.event.returnValue=!1},turnEvent:function(t){var e={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend",mouseover:"touchstart",mouseout:"-",click:"touchstart"};return f.isSupportsTouches()&&e.hasOwnProperty(t)?e[t]:t},isSupportsTouches:function(t){return"createTouch"in document},drag:function(d,h){var p="createTouch"in document,t=f.turnEvent("mousedown"),c=f.turnEvent("mousemove"),u=f.turnEvent("mouseup");(d="string"==typeof d?document.getElementById(d):d).orig_index=d.style.zIndex,d.startX=0,d.startY=0,d["on"+t]=function(t){var e;function i(t){return t=t||window.event,r=p?(t=t.touches.item(0),e=t.pageX-o,t.pageY-a):(e=t.pageX?t.pageX-o:t.clientX+document.body.scrollLeft-o,t.pageY?t.pageY-a:t.clientY+document.body.scrollTop-a),e=l.x+e,r=l.x+r,s&&(e<s.x?e=s.x:e>s.x+s.w&&(e=s.x+s.w),r<s.y?r=s.y:r>s.y+0+s.h&&(r=s.y+s.h)),d.style.left=e+"px",d.style.top=r+"px",h.onMove&&h.onMove((parseInt(d.style.left)-s.x)/s.w),!1}var o,s,n=document,r=e=void 0,a=(this.style.zIndex=1e4,h.rect&&(s=h.rect()),(t=t||window.event).preventDefault(),p?(t=t.touches.item(0),o=t.pageX,t.pageY):(o=t.clientX+n.body.scrollLeft,t.clientY+n.body.scrollTop)),l={x:parseInt(d.offsetLeft),y:parseInt(d.offsetTop)};return n.ondragstart="return false;",n.onselectstart="return false;",n.onselect="document.selection.empty();",d.setCapture?d.setCapture():window.captureEvents&&window.captureEvents(w.MOUSEMOVE|w.MOUSEUP),h.onDown&&h.onDown((parseInt(d.style.left)-s.x)/s.w),f.addEvent(n,c,i),f.addEvent(n,u,function t(){d.releaseCapture?d.releaseCapture():window.captureEvents&&window.captureEvents(w.MOUSEMOVE|w.MOUSEUP),f.removeEvent(n,c,i),f.removeEvent(n,u,t),d.style.zIndex=d.orig_index,h.onUp&&h.onUp((parseInt(d.style.left)-s.x)/s.w)}),!1}},fullScreen:function(t){return t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullScreen():t.msRequestFullscreen?t.msRequestFullscreen():t.oRequestFullscreen?t.oRequestFullscreen():void 0},isFullScreen:function(){return!!(document.webkitIsFullScreen||document.fullscreen||document.mozFullScreen||document.msFullscreenElement)},cancelFullScreen:function(){document.cancelFullscreen?document.cancelFullscreen():document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.webkitCancelFullScreen&&element.webkitCancelFullScreen()},supportFullScreen:function(){var t=document.documentElement;return"requestFullscreen"in t||"mozRequestFullScreen"in t&&document.mozFullScreenEnabled||"webkitRequestFullscreen"in t||"msRequestFullscreen"in t},getClientWidth:function(){return document.body.clientWidth}};function c(t,e,i,o,s,n){return t=v(v(e,t),v(o,n)),v(t<<s|t>>>32-s,i)}function u(t,e,i,o,s,n,r){return c(e&i|~e&o,t,e,s,n,r)}function g(t,e,i,o,s,n,r){return c(e&o|i&~o,t,e,s,n,r)}function m(t,e,i,o,s,n,r){return c(i^(e|~o),t,e,s,n,r)}function v(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}o.shareObj("common.UiTool",f);var Y,q,G,i,K,n,X={isString:function(t){return"string"==typeof t},stringToJson:function(t){if(!this.isString(t))return t;try{return window.JSON.parse(t)}catch(t){return{}}},isJson:function(t){return!(!t||"object"!=typeof t||"Object"!==t.constructor)},jsonToString:function(t){var e="";try{e=window.JSON.stringify(t)}catch(t){e=t}return e}},$=(Y="",q=[],{log:function(t,e,i){if(e=void 0!==e?"["+e.constructor.name+"]":"-",i=void 0!==i?i:"-",Y!=t)try{var o,s,n=new Date,r="["+n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+":"+n.getMilliseconds()+"]";q.push(r+t+"  target--\x3e"+e),1e3<q.length&&q.shift(),-1==window.location.href.indexOf("#dSDK=1")&&"file"!=window.location.href.substr(0,4).toLocaleLowerCase()||!window.console||window.console.log(t,e,i,r),-1!=window.location.href.indexOf("#dSDK=2")&&(document.getElementById("log")||((o=document.createElement("DIV")).id="log",document.body.appendChild(o)),(s=document.createElement("DIV")).innerHTML=t+e+r,document.getElementById("log").appendChild(s),Y=t)}catch(t){}},getLog:function(t){return q.join("<br>\r\n")}}),J=($.log("js 加载成功  ua:"+window.navigator.userAgent),(i=document.createElement("DIV")).style.cssText="width:85%;height:80%;position:fixed;left:0px;top:0px;z-index: 3000;background-color:rgba(255, 255, 255, 1);",(K=document.createElement("IFRAME")).name="submit",K.style.cssText="display:none;position:absolute;",n=document.createElement("form"),{print:function(t,e){i.innerHTML='<div style="width:100%;"><span>用户id:</span><input type="text" style="width:300px;"><input style="float:right;" type="button" value="关闭"></div><textarea class="input" style="width: 100%;height: 100%"  placeholder="Once upon a time..."></textarea>',document.body.appendChild(i),i.style.display="",i.getElementsByTagName("textarea")[0].innerHTML=t;t=i.getElementsByTagName("input")[0];i.getElementsByTagName("input")[1].onclick=function(){i.style.display="none"},t.value=e},report:function(t,e){for(var i in document.body.appendChild(K),n.innerHTML="",n.action=t,n.method="post",n.target="submit",n.style.display="none",e){var o=document.createElement("textarea");o.name=i,o.value=e[i],n.appendChild(o)}document.body.appendChild(n),n.submit()}}),Z={isSupportFlash:!1,isEmdbed:!1,num:0,check:function(t){var e="";if(void 0!==window.ActiveXObject)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(t){}if(window.navigator.plugins&&window.navigator.plugins["Shockwave Flash"])try{e=window.navigator.plugins["Shockwave Flash"].description,this.isEmdbed=!0}catch(t){}""==e&&(this.isSupportFlash=!1);for(var i=0,o=(e=e.split(/\s+/)).length;i<o;i++)parseInt(e[i])>t&&(this.isSupportFlash=!0);return this.isSupportFlash},getPlayer:function(t){return this.isEmdbed?document[t]||window[t]:document.getElementById(t)},create:function(t,e,i){var o,s="cloudPlayer"+(new Date).getTime()+this.num,n=(this.num++,{bgcolor:"#000000",allowscriptaccess:"always",wmode:"Opaque",width:"100%",height:"100%",align:"middle",quality:"high",allowFullScreen:!0,version:10});for(o in e)n[o]=e[o];if(n.flashvars=i,e="",this.check(n.version)){if(this.isEmdbed)for(o in i=["<embed name='"+s+"'src='"+n.url+"' pluginspage='http://www.macromedia.com/go/getflashplayer' type='application/x-shockwave-flash' width='"+n.width+"' height='"+n.height+"' "," />"],e="",n)"width"!=o&&"height"!=o&&"url"!=o&&(e+=o+"='"+n[o]+"' ");else for(o in e="",i=["<object id='"+s+"' classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000'codebase='http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,45,0' type='application/x-shockwave-flash' width='"+n.width+"' height='"+n.height+"'><param name='movie' value='"+n.url+"'/>","</object>"],n)"width"!=o&&"height"!=o&&"url"!=o&&(e+="<param name='"+o+"' value='"+n[o]+"'/>");e=i.join(e)}else e='<div style="width:'+n.width+"px; height:"+n.height+'px; text-align:center;"><span style="line-height:200%; font-size:18px">安装或者更新版本不小于<b style="color:red">'+n.version+'</b>的flash播放器, 请点击<a href="http://get.adobe.com/cn/flashplayer/" target="_blank">这里</a>安装</span></div>';return"string"==typeof t&&""!=t&&document.getElementById(t)?document.getElementById(t).innerHTML=e:document.write(e),s}},t=(G={},{inherits:function(t,e){function i(){}try{i.prototype=e.prototype,t.prototype=new i,(t.prototype.constructor=t).prototype.superClass=e.prototype}catch(t){}},provideClass:function(t,e){var i=t.split(".");if(1<i.length)for(var o=0;o<i.length-1;o++){var s=i[o];last.hasOwnProperty(s)||(last[s]={}),last=last[s]}last[i[i.length-1]]=e},importClass:function(t){for(var e=t.split("."),i=G,o=0;o<e.length-1;o++){var s=e[o];if(!i.hasOwnProperty(s))throw"the "+t+"--"+s+" class is not provide";i=i[s]}return i}});o.shareObj("common.ClassTool",t);var Q,tt=function(t){var e;return"https:"==window.location.protocol?(t=t.split("://")[1],"https://"+(t=(e={"yuntv.letv.com":"s.yuntv.letv.com","ark.letv.com":"arkletv.lecloud.com","api.letvcloud.com":"apiletv.lecloud.com","sdk.lecloud.com":"sdkletv.lecloud.com"}).hasOwnProperty(t)?e[t]:t)):t};for(Q in o.PluginStack={ErrorInfo:"http://yuntv.letv.com/player/plugin/errorRender.js",FeedbackInfo:"http://yuntv.letv.com/player/plugin/feedbackRender.js",PanoRender:"http://yuntv.letv.com/player/plugin/panoRender1.1.js"},o.PluginStack)"https:"==window.location.protocol&&(o.PluginStack[Q]=o.PluginStack[Q].replace("http://","https://s."));var et={SkinTpl:"",setMediacontrols:function(t,e){t="{id}video::-webkit-media-controls-enclosure,{id}video::-webkit-media-controls {display: {dislay} !important;}".replace(/{id}/g,t=""!=t?"."+t+" ":t);t=e?t.replace("{dislay}",""):t.replace("{dislay}","none"),f.loadCss(t)},setMediafullscreen:function(t,e){t="{id}video::-webkit-media-controls-fullscreen-button {display: {dislay} !important;}".replace(/{id}/g,t=""!=t?"."+t+" ":t);t=e?t.replace("{dislay}",""):t.replace("{dislay}","none"),f.loadCss(t)},getSkinTpl:function(){void 0===window.CloudSdkPlugin&&(window.CloudSdkPlugin={}),window.CloudSdkPlugin.skinUuid=h.creatUuid();var t=window.CloudSdkPlugin.skinUuid;if(""==et.SkinTpl){var e,i="@keyframes d{#}{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@-webkit-keyframes d{#}{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}.controlBar{#}{border-top: 1px solid rgb(51, 39, 39);position:absolute;left:0px;bottom:0px;background-color:rgba(0, 0, 0, 0.8);width:100%;height:40px;z-index:5;}.controlBar{#} div{-moz-user-select:none;-webkit-user-select:none;user-select:none;box-sizing:content-box}.hCrtBar{#}{transform: translate(0,41px);-webkit-transform: translate(0,41px);-moz-transform: translate(0,41px);-o-transform: translate(0,41px);-ms-transform: translate(0,41px);}.showError{#}{position:absolute;left: 10%;top:20%;width:80%;height:60%;text-align: center;background-color:rgba(0, 0, 0,.9);border: 1px solid rgb(107, 95, 95);z-index:7;}.loading{#}{position: absolute;background-color:rgba(0, 0, 0,.9);top: 0%;left: 0%;width: 100%;height: 100%;zoom: 1;z-index:4;}.loading{#} .bld_hv{#}{position: absolute;top:50%;left:50%;}.pbtn_hv{#}{width: 75px;height: 75px;overflow: hidden;background: url({#BGP}) no-repeat;margin: -40px 0 0 -38px;}.loading{#} .mld_hv{#}{position: absolute;top: 50%;left: 50%;background-position: -11px -101px;}.loading{#} .mld_hv{#} .ld_mc{#}{margin: 0px;background-position: -11px -201px;animation: d{#} .7s linear 0s infinite;-webkit-animation: d{#} .7s linear 0s infinite}.videoArea{#}{position:absolute;width:100%;height:100%;z-index:3;}.text{#}{color:#fff;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:16px;font-family:Microsoft YaHei, SimSun, Arial;}.tText{#}{color:#fff;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:14px;font-family:Arial;}.definition{#}{float:left;position:absolute;text-align:center;height:27px;line-height:27px;padding: 0px 5px 0px 5px;top: 5px;white-space: nowrap;}.button{#}{cursor:pointer;}.pBack{#}{padding:0px;margin:0px;background:rgba(1, 1, 1, 0) url({#BGP}) no-repeat scroll}.play{#}{width:100%;height:100%;background-position:-10px -5px;}.pause{#}{position:absolute;width:100%;height:100%;background-position:-39px -5px;}.playBar{#}{width:100%;height:5px;background-repeat:repeat;float:left;position: absolute;background-position: 0px -36px;z-index:12;}.playIng_bg{#}{left:0px;top:0px;width:100%;height:40px;position: absolute;margin-top:-18px;z-index:1;}.bufferBar{#}{z-index: 11;background-position: 0px -43px;}.barIco{#}{z-index: 13;background-position:-65px -5px;margin-left:-12px;width: 24px;height: 24px;top:-8px;position:absolute;float:left;}.playBtn{#}{float:left;position: absolute;height: 27px;width: 27px;top:5px;}.pIng{#}{float:left;position: absolute;height: 5px;top:16px;background-position:0px -50px;background-repeat:repeat;width:2px;cursor:pointer;}.pvol{#}{position: absolute;float:left;height: 18px;top: 12px;width:20px;}.vol{#}{background-position:-95px -5px;float:left;height: 100%;width:100%;}.deList{#}{background-color: #261D1D;padding: 2px;position:absolute;}.litem{#}{padding: 7px 18px 7px 18px;text-align: center;height: 25px;line-height: 25px;white-space: nowrap;}.full{#}{float:left;position: absolute;top:12px;width: 19px;height: 20px;}.fullScreen{#}{width: 100%;height: 100%;position:absolute;background-position:-134px -5px;}.cfullScreen{#}{display:none;background-position:-151px -5px;}.time{#}{position:absolute;top:6px;left:0px;pointer-events:none}.duration{#}{position:absolute;top:6px;right:0px;pointer-events:none}.activeText{#}{color:#0099FF;}.logo{#}{float:left;display:none;position: absolute;}.bgBtn{#}{position:absolute;left:50%;top:50%;z-index:7;cursor:pointer;background-position:-111px -101px;}".replace(/{#BGP}/g,"http://yuntv.letv.com/assets/img/skin.png?v=1901");for(e in i=i.replace(/{#}/g,t),f.loadCss(i),i={skin:"<div id='#{videoArea}' class='videoArea{#}'></div><div id='#{controlBar}' class='controlBar{#}'></div><div id='#{loading}' class='loading{#}'></div><div id='#{playBtn}' class='bgBtn{#} pbtn_hv{#}'></div>",controlBar:'<div id="#{playBtnBox}" class="playBtn{#}"><div id="#{playBtn}" class="button{#} pBack{#} play{#}" ></div><div id="#{pauseBtn}" class="button{#} pBack{#} pause{#}" ></div></div> <div id="#{playIngBar}" class="pBack{#} pIng{#}" ><div id="#{playBarIco}" class="button{#} pBack{#} barIco{#}""></div><div id="#{playBar}" class="pBack{#} playBar{#}"></div><div id="#{bufferBar}" class="pBack{#} playBar{#} bufferBar{#}"></div><div id="#{playIngBg}" class="playIng_bg{#}"></div><div id="#{time}" class="tText{#} time{#}" style="left: 0px;"></div><div id="#{duration}" class="tText{#} duration{#}" ></div></div> <div  id="#{volBox}" class="pvol{#}"><div id="#{vol}" class="button{#} pBack{#} vol{#}" ></div></div> <div id="#{definition}" class="text{#} definition{#} button{#}" ></div> <div id="#{definitionList}" class="deList{#}"></div> <div id="#{fullScreenBox}" class="full{#}"  ><div id="#{fullScreen}" class="button{#} pBack{#} fullScreen{#}"></div><div id="#{cancelFullScreen}" class="button{#} pBack{#} fullScreen{#} cfullScreen{#}"></div></div> <div id="#{logo}" class="logo{#}"></div>',loading:'<div id="#{bld}" class="bld_hv{#}"></div><div id="#{sld}" class="mld_hv{#} pbtn_hv{#}"><div class="ld_mc{#} pbtn_hv{#}"></div></div>'})i[e]=i[e].replace(/{#}/g,t);et.SkinTpl=i}}},it="cid pid vid mmsid pic title url nextvid nextpic nexttitle nexturl nextchapter duration total percent rotation fullscreen color volume jump continuePlay gpu gpuing definition defaultDefinition trylook fullScale originalScale originalRect".split(" ");function ot(t){var e={yuanhua:"yuanhua",1300:"super",800:"high",350:"low"};return e.hasOwnProperty(t)?e[t]:t}function st(t){var e={yuanhua:"yuanhua",super:"1300",high:"800",low:"350"};return e.hasOwnProperty(t)?e[t]:t}var nt=0,rt=1,at=2,lt=0,dt=4,ht=5,a=6,pt=9,ct=10,ut=11,ft=13,yt=14,gt=15,mt=18,vt="1",wt="481",Et="150",bt="153",St="154",kt="470",Pt="473",e=(Tt.prototype={init:function(){},addEventListener:function(t,e,i){if(void 0===t)throw this.log(t),Error("type is undefined");if(void 0===e)throw this.log(e),Error("handler is undefined");if(void 0===i)throw this.log(i),Error("handlerThis is undefined");this.hasOwnProperty("EventMap")||(this.EventMap={}),this.EventMap.hasOwnProperty(t)||(this.EventMap[t]=[]),this.hasEventListener(t,e,i)||this.EventMap[t].push({fun:e,target:i})},hasEventListener:function(t,e,i){if(void 0===t)throw this.log(t),Error("type is undefined");if(void 0===e)throw this.log(e),Error("handler is undefined");if(void 0===i)throw this.log(i),Error("handlerThis is undefined");if(this.hasOwnProperty("EventMap")&&this.EventMap.hasOwnProperty(t))for(var o=0;o<this.EventMap[t].length;o++){var s=this.EventMap[t][o];if(s.fun==e&&s.target==i)return!0}return!1},dispatchEvent:function(t){var e=t.type;if((t.target=this).hasOwnProperty("EventMap")||(this.EventMap={}),this.EventMap.hasOwnProperty(e)){for(var i=[],o=0;o<this.EventMap[e].length;o++)i.push(this.EventMap[e][o]);for(o=0;o<i.length;o++)i[o].fun.call(this.EventMap[e][o].target,t)}},removeEventListener:function(t,e,i){if(this.hasOwnProperty("EventMap")||(this.EventMap={}),this.EventMap.hasOwnProperty(t))for(var o=0;o<this.EventMap[t].length;o++)if(this.EventMap[t][o].fun==e&&this.EventMap[t][o].target==i){this.EventMap[t].splice(o,1),0==this.EventMap[t].length&&delete this.EventMap[t];break}},destroy:function(){for(var t in this.EventMap)delete this.EventMap[t];this.EventMap=null},log:function(t){$.log(t,this)}},Tt);function Tt(){this.init()}o.shareObj("core.ClassObject",e);t.inherits(_t,e),_t.prototype.init=function(t,e){this.facade=t,this.model=e};var l,xt=_t,w=function(){this.type=arguments[0],this.args=arguments},Lt=(t.inherits(Ht,e),Ht),At=(t.inherits(Rt,e),Rt.prototype.load=function(t){this.loader=new jt,this.isClose=!1,t=this.getRequestList(),this.log("requestUrls:"+X.jsonToString(t)),2==this.requestType?this.loader.load2(t,this.loadCmp,this.loadError,this):this.loader.load(t,this.loadCmp,this.loadError,this)},Rt.prototype.getUrl=function(t){return 1<this.loader.urlList.length?this.loader.urlList[0].url:""},Rt.prototype.getRequestList=function(t){return[]},Rt.prototype.unload=function(t){this.loader&&this.loader.destroy(),this.isClose=!0},Rt.prototype.loadCmp=function(t,e){this.isClose||this.dispatchEvent(new w(b.LOADCMP,[t,e]))},Rt.prototype.loadError=function(t,e){this.isClose||this.dispatchEvent(new w(b.LOADERROR,[t,e]))},Rt),Ct=(t.inherits(It,e),It.prototype.initPlugin=function(t,e,i){this.pluginCmpFun=e,this.REConf=i,this.REConf.hasOwnProperty(t.type)?(e=this.REConf[t.type]).hasOwnProperty("check")?"function"==typeof e.check?e.check()?this.load(t):t.onerror(e.err):e.check?this.load(t):t.onerror(e.err):this.load(t):(this.pluginCmpFun(null),t.onstart())},It.prototype.load=function(t){var e=this;e.pl=this.REConf[t.type],o.getPlugin(e.pl.name,function(t){t?e.pluginCmpFun(t):e.onerror({code:420,message:"插件加载错误"})})},It),Vt=(t.inherits(Ot,e),Ot.prototype.init=function(){this.tplKey="view",this.addEvent=!0},Ot.prototype.setUp=function(t,e){""==et.SkinTpl&&et.getSkinTpl();var i=et.SkinTpl[this.tplKey]||"";if(this.el=f.$E(t),this.skin=new Dt(this.el),i=f.getTemplate(this.el,i),e)for(var o=0;o<i.length;o++)this.el[i[o]]=new Dt(this.el[i[o]]);this.addEvent&&this.facade.addEventListener(P.EVENT,this.skinHandler,this)},Ot.prototype.skinHandler=function(t){},Ot.prototype.setSize=function(t,e){},Ot),Dt=(Jt=o.getObj("common.ClassTool"),ge=o.getObj("core.ClassObject"),l=o.getObj("common.UiTool"),Jt.inherits(d,ge),d.prototype.init=function(t){this.el=t},d.prototype.addEventListener=function(t,e,i){"-"!=(t=l.turnEvent(t))&&l.addEvent(this.el,t,e)},d.prototype.removeEventListener=function(t,e,i){t=l.turnEvent(t),l.removeEvent(this.el,t,e)},d.prototype.drag=function(t){l.drag(this.el,t)},d.prototype.setVisible=function(t){t?(this.el.style.display="block",this.setAttribute({orgwidth:this.el.offsetWidth,orgheight:this.el.offsetHeight})):this.el.style.display="none"},d.prototype.getVisible=function(){return"none"!=this.el.style.display},d.prototype.setWidth=function(t){-1!=(t+="").indexOf("%")?this.el.style.width=t:this.el.style.width=t+"px"},d.prototype.getWidth=function(){return 0==this.el.offsetWidth?this.getAttribute("orgwidth"):this.el.offsetWidth},d.prototype.setHeight=function(t){-1!=(t+="").indexOf("%")?this.el.style.height=t:this.el.style.height=t+"px"},d.prototype.getHeight=function(){return 0==this.el.offsetHeight?this.getAttribute("orgheight"):this.el.offsetHeight},d.prototype.setX=function(t){-1!=(t+="").indexOf("%")?this.el.style.left=t:this.el.style.left=t+"px"},d.prototype.getX=function(){return this.el.offsetLeft},d.prototype.setY=function(t){-1!=(t+="").indexOf("%")?this.el.style.top=t:this.el.style.top=t+"px"},d.prototype.getY=function(){return this.el.offsetTop},d.prototype.appendChild=function(t){t.hasOwnProperty("el")&&(t=t.el),this.el.appendChild(t)},d.prototype.html=function(t){this.el.innerHTML=t},d.prototype.setClassName=function(t){t=t.split(" ").join(this.sid+" "),t+=this.sid,this.el.className=t},d.prototype.hasClassName=function(t){return t=t.split(" ").join(this.sid+" "),t+=this.sid,l.hasClassName(this.el,t)},d.prototype.addClassName=function(t){t=t.split(" ").join(this.sid+" "),t+=this.sid,l.addClassName(this.el,t)},d.prototype.removeClassName=function(t){t=t.split(" ").join(this.sid+" "),t+=this.sid,l.removeClassName(this.el,t)},d.prototype.getAttribute=function(t){return this.el.getAttribute(t)},d.prototype.hasAttribute=function(t){return this.el.hasAttribute(t)},d.prototype.setAttribute=function(t){for(var e in t)this.el.setAttribute(e,t[e])},d.prototype.removeAttribute=function(t){if(h.isArray(t))for(var e=0;e<t.length;e++)this.el.removeAttribute(t[e]);else this.el.removeAttribute(t)},d.prototype.setStyle=function(t){for(var e in t)this.el.style[e]=t[e]},d);function d(t,e){this.init(t),void 0===e&&(e=window.CloudSdkPlugin.skinUuid),this.sid=e}function Ot(t,e){this.facade=t,this.model=e,this.init()}function It(){}function Rt(){}function Ht(){}function _t(t,e){this.init(t,e)}o.shareObj("core.view.DisplayObject",Dt);je.prototype={load:function(t,i,o,s){this.urlList=t;var n=this,r=0,a=h.now(),l=function(){clearTimeout(n.delayID),h.getJSON(n.urlList[0].url,function(t,e){r+=e.retryCount,i&&i.call(s,t,{responseTime:h.now()-a,retryCount:r})},function(t,e){1<n.urlList.length?(r+=n.urlList[0].maxCount,n.urlList.shift(),n.delayID=setTimeout(l,n.urlList[0].retryTime)):(r+=e.retryCount,o&&o.call(s,null,{responseTime:h.now()-a,retryCount:r}))},n.urlList[0].timeout,n.urlList[0].maxCount,n.urlList[0].retryTime)};l()},load2:function(t,i,o,s){this.urlList=t;var n=this,r=0,a=h.now(),l=function(){clearTimeout(n.delayID),h.getJSONbyAjax(n.urlList[0].url,function(t,e){r+=e.retryCount,i&&i.call(s,t,{responseTime:h.now()-a,retryCount:r})},function(t,e){1<n.urlList.length?(r+=n.urlList[0].maxCount,n.urlList.shift(),n.delayID=setTimeout(l,n.urlList[0].retryTime)):(r+=e.retryCount,o&&o.call(s,null,{responseTime:h.now()-a,retryCount:r}))},n.urlList[0].timeout,n.urlList[0].maxCount,n.urlList[0].retryTime)};l()},destroy:function(){clearTimeout(this.delayID)}};var Nt,Bt,Ut,Ft,Mt,zt,Wt,jt=je,Yt=(We.prototype={start:function(){this.running=!0,this.checkTime(!1)},checkTime:function(t){var e=this;clearTimeout(this.T),t&&(e.currentCount++,e.timerHandler.call(e.handlerThis),0<e.max&&e.currentCount>=e.max)?e.stop():e.T=setTimeout(function(){e.checkTime.call(e,!0)},e.delay)},stop:function(){this.running=!1,clearTimeout(this.T)},reset:function(){this.stop(),this.currentCount=0},clear:function(){this.handlerThis=this.timerHandler=this.delay=null,this.T=0}},We),E={EVENT:"adEvent",HEADSTART:"adHeadPlayStart",HEADEND:"adHeadPlayComplete",NOAD:"adHeadPlayNone"},b={LOADCMP:"loadcmp",LOADERROR:"loaderror"},S={EVENT:"playerEvent",INIT:"playerInit",VIDEO_AUTH_VALID:"videoAuthValid",VIDEO_DATA_START:"videoDataStart",VIDEO_DATA_CMP:"videoDataCmp",GSLB_START:"gslbStart",GSLB_CMP:"gslbCmp",VPH:"videoPageHide",VPS:"videoPageShow",WPH:"webPageHide",ERROR:"playerError",RESIZE:"playerResize",VIDEO_INFO:"videoInfo",FULLSCREEN:"fullscreen",PRESIZE:"resize",VIDEO_LIVESTOP:"videoLiveStop",VIDEO_INTERRUPT:"videoLiveInterupt"},k={EVENT:"MediaEvent",CONNECT:"videoConnect",START:"videoStart",PLAY:"videoResume",STOP:"videoStop",PAUSE:"videoPause",BUFFEREMPTY:"videoEmpty",BUFFEREFULL:"videoFull",SEEK:"videoSeek",SEEKEMPTY:"videoSeekEmpty",PLAYING:"videoPlaying",LODING:"videoLoading",METADATA:"MetaData",DURATION:"videoDuration",DEFSTART:"swapDefinition",ERROR:"videoError",REPLAY:"videoReplay"},P={EVENT:"skinEvent",PLAY:"skinPlay",PAUSE:"skinPause",SETDEFINITION:"setDefinition",SEEK:"skinSeek",VOLUME:"skinVolume",FULLSCREEN:"skinFullscreen",REPLAY:"skinReplay"},qt=(ze.prototype={init:function(t){switch(this.platform){case"sdk":this._uuid="",this.playType=t.ptype,delete t.ptype;for(var e="autoplay uu vu liveId streamId activityId".split(" "),i=0;i<e.length;i++){var o=e[i];t.hasOwnProperty(o)&&(this.config[o]=t[o],delete t[o])}this.systemData.refresh(t),$.log("[Stat K]  model init:"+this.systemData.deviceId+"  _2016-03-17 15:05:40.087"),this._apprunid=this.systemData.deviceId+"_"+h.now();break;case"html5":this.systemData.refresh(t),this._apprunid=this.lc()+"_"+h.now()}},clear:function(){this._uuid="",this._lc=h.getLocal("lc"),this.userData=new Fe,this.videoSetting=new Me,this.playerConfig=new Ue,this.platform="html5",this.playType="vod"},uuid:function(){if("sdk"==this.platform){if(this.videoSetting.hasOwnProperty("uuid")&&6<this.videoSetting.uuid.length)return this.videoSetting.uuid;var t=ExternalInterface.callSDK(this.systemData.os,"getVideoSetting","");if(this.videoSetting.refresh(t),this.videoSetting.hasOwnProperty("uuid")&&6<this.videoSetting.uuid.length)return this.videoSetting.uuid}return""==this._uuid&&(this._uuid=h.creatUuid()),this._uuid+"_"+this.videoSetting.definitionCount},clearUuid:function(){this._uuid=""},lc:function(){return null==this._lc&&(this._lc=h.creatUuid(),h.setLocal("lc",this._lc)),this._lc},getTypeFrom:function(){var t=h.getUrlParams("ch");if(t)return t.toString();try{if(""!=this.userInfo().userId)return"bcloud_"+this.userInfo().userId}catch(t){}return"letv"},apprunid:function(){return this._apprunid},auid:function(){return this.systemData.deviceId},pcode:function(){return"-"},videoInfo:function(){switch(this.platform){case"sdk":var t=ExternalInterface.callSDK(this.systemData.os,"getVideoSetting","");return t.hasOwnProperty("cid")&&""!=t.cid||(t.cid=100),t.hasOwnProperty("liveid")&&(t.lid=t.liveid,delete t.liveid),t.hasOwnProperty("time")&&""==t.time&&(t.time="0"),this.videoSetting.refresh(t),t;case"html5":return t=this.api.getVideoInfo(),this.videoSetting.refresh(t),t}},userInfo:function(){switch(this.platform){case"sdk":var t;return""==this.userData.userId&&(t=ExternalInterface.callSDK(this.systemData.os,"getUserSetting",""),this.userData.refresh(t)),this.userData;case"html5":return this.userData}}},ze),Gt=(t.inherits(_,At),_.prototype.load=function(t){this.curTime=0,this.superClass.load.call(this,t)},_.prototype.getRequestList=function(){for(var t=[],e=["//106.39.244.239/","//111.206.211.221/","//223.95.79.18/"],i={cf:this.getCf(),ran:this.getCurTime(),pver:this.model.playerConfig.version,bver:encodeURIComponent(h.getBrowserVersion()),uuid:this.model.uuid(),pf:"html5",spf:this.getSpf()},o=tt("http://api.letvcloud.com")+"/gpc.php?format=jsonp&ver=2.1&playid=0",s="ark uu vu payer_name check_code pu".split(" "),n=0;n<s.length;n++){var r=s[n];this.model.config.hasOwnProperty(r)&&(i[r]=this.model.config[r])}for(r in i.sign=this.getSign(["cf"+i.cf,"ran"+i.ran,"uu"+i.uu,"bver"+i.bver,"vu"+i.vu]),i)o+="&"+r+"="+i[r];for(o+="&page_url="+encodeURIComponent(window.location.href),t.push({url:o,timeout:5e3,maxCount:3,retryTime:0}),n=0;n<e.length;n++)-1!=t[0].url.indexOf("//api.letvcloud.com/")&&(i=o.replace("//api.letvcloud.com/",e[n]),t.push({url:i,timeout:5e3,maxCount:3,retryTime:0}));return t},_.prototype.getSign=function(t){return j.hash(t.join("")+"fbeh5player12c43eccf2bec3300344")},_.prototype.getCurTime=function(t){return 0!=this.curTime?this.curTime:parseInt(.001*h.now())},_.prototype.getCf=function(){switch(h.getDevice()){case"ipad":case"iphone":return"html5_ios"}return"html5"},_.prototype.getSpf=function(){var t=h.getDevice(),e={androidPhone:0,iphone:1,letvTv:2,ipad:3,androidPad:4};return e.hasOwnProperty(t)?e[t]:0},_.prototype.loadCmp=function(t,e){if(!this.isClose){var i=this.model;if(this.log("gpc ok data:"+X.jsonToString(t)+"----time:"+X.jsonToString(e)),0==t.code){t=t.data;var o,s={},n=(s.userId=t.user_info.user_id,i.userData.refresh(s),(s={}).mloadingUrl=t.player_info.loading_url,s.logo={pic:t.player_info.logo_pic,pos:t.player_info.logo_pos,url:t.player_info.logo_url||t.user_info.logo_url},i.playerConfig.refresh(s),(s={}).vid=t.video_info.video_id,s.cid=100,s.pid="",s.title=t.video_info.video_name,s.duration=t.video_info.video_duration,s.defaultDefinition=t.video_info.default_play,s.isdrm=t.video_info.isdrm,s.ark=t.user_info.ark,s.mmsid=t.video_info.media_id,t.video_info.hasOwnProperty("pa")&&(s.pano=t.video_info.pa),{});for(o in t.video_info.media){var r=t.video_info.media[o],a=(n[o]={},["main_url","backup_url_1","backup_url_2","backup_url_3"]);n[o].urls=[];for(var l=0;l<a.length;l++)r.play_url.hasOwnProperty(a[l])&&n[o].urls.push(this.checkGslbUrl(W(r.play_url[a[l]])));n[o].videoWidth=r.play_url.vwidth,n[o].videoHeight=r.play_url.vheight,n[o].gbr=r.play_url.gbr,n[o].vtype=r.play_url.vtype,n[o].definition=r.definition,n[o].videoType=r.video_type}s.media=n,s.pic=t.play_info.init_pic,i.videoSetting.refresh(s),i.vodPlayType=function(){var t="samsung-sm-n9009__weibo__5.1.2__android__android4.3;HUAWEI MT1-T00 Build/HuaweiMT1-T00;cpqb;360zqb;p6-t00;sm-n9008;sm-;samsung;huawei;android.+chrome".split(";");switch(h.getDevice()){case"ipad":case"iphone":return"ios";case"androidPad":case"androidPhone":case"android":if("mp4"==h.getLocal("playType"))break;for(var e=navigator.userAgent.toLowerCase(),i=0;i<t.length;i++)if(-1!=e.indexOf(t[i].toLowerCase()))return"mp4";if(/samsung/i.test(e)&&/weibo/i.test(e))break;if(""==document.createElement("video").canPlayType("application/x-mpegURL"))break;return"ios"}return"mp4"}(),this.dispatchEvent(new w(b.LOADCMP,[t,e]))}else"10071"==t.code?(this.curTime=t.timestamp,this.reload()):this.dispatchEvent(new w(b.LOADERROR,[{code:bt,message:t.message,errInfo:"url:"+this.getUrl()+" respponse:"+X.jsonToString(t)},e]))}},_.prototype.reload=function(){this.unload(),this.superClass.load.call(this)},_.prototype.checkGslbUrl=function(t){return t},_.prototype.loadError=function(t,e){this.isClose||this.dispatchEvent(new w(b.LOADERROR,[{code:Et,errInfo:"url:"+this.getUrl()},e]))},_),Kt=(t.inherits(_e,At),_e.prototype.getRequestList=function(){var t=[],e=h.clone(this.model.videoSetting.urls);h.addUrlParams(e,{jsonp:"?",_r:"jsonp",format:1,expect:3});for(var i=0;i<e.length;i++){var o=this.checkGslbUrl(e[i]);t.push({url:o,timeout:1e4,maxCount:3,retryTime:0})}return t},_e.prototype.checkGslbUrl=function(t){return"ios"==this.model.vodPlayType&&-1==t.indexOf("&tss=ios&")&&(t=-1!=t.indexOf("&tss=no&")?t.replace("&tss=no&","&tss=ios&"):t+"&tss=ios"),t="mp4"==this.model.vodPlayType&&-1==t.indexOf("&tss=no&")?-1!=t.indexOf("&tss=ios&")?t.replace("&tss=ios&","&tss=no&"):t+"&tss=no":t},_e.prototype.loadCmp=function(t,e){if(!this.isClose)if(this.log("gslb data:"+X.jsonToString(t)+" time"+X.jsonToString(e)),200==t.status){t.ercode="0";for(var i=[t.location],o=0;o<t.nodelist.length;o++)t.nodelist[o].location!=i[0]&&i.push(t.nodelist[o].location);this.dispatchEvent(new w(b.LOADCMP,i))}else this.dispatchEvent(new w(b.LOADERROR,[{code:Pt,message:"调度错误"},e]))},_e.prototype.loadError=function(t,e){this.isClose||this.dispatchEvent(new w(b.LOADERROR,[{code:kt,errInfo:"url:"+this.getUrl()},e]))},_e),Xt=(Mt={pc:{value:30,sub:{value:300}},sdk:{value:32,sub:{value:321,ios:{value:321},android:{value:322}}},html5:{value:31,sub:{value:310,ios:{value:311},android:{value:312},pc:{value:310}}}},zt={android:600,ios:601},He.prototype={init:function(){this.model.reportParam.p1=3,this.model.reportParam.p2=Mt[this.model.platform.toLowerCase()].value,Mt[this.model.platform.toLowerCase()].sub.hasOwnProperty(this.model.systemData.os.toLowerCase())?this.model.reportParam.p3=Mt[this.model.platform.toLowerCase()].sub[this.model.systemData.os.toLowerCase()].value:this.model.reportParam.p3=Mt[this.model.platform.toLowerCase()].sub.value},reset:function(){this.heartTimer&&(this.heartTimer.stop(),this.heartTimer=null),this.reportParam=new Re},onStateChanged:function(t,e){switch(e=X.stringToJson(e),$.log("[Stat K 日志数据]  type:"+t+" data:"+e),t){case"init":this.reportParam.isStartPlay=!1,this.model.init(e),this.init(),this.sendEnvStat();break;case"start":this.reportParam.isStartPlay=!1,this.sendPlayStat("init");break;case"play":this.reportParam.isStartPlay||(this.sendPlayStat("play",e),this.startHeartTimer(),this.resumePtStat(),this.reportParam.isStartPlay=!0);break;case"bufferEmpty":this.reportParam.state!=t&&this.reportParam.isStartPlay&&(this.pausePtStat(),this.sendPlayStat("block"));break;case"bufferFull":"bufferEmpty"==this.reportParam.state&&this.reportParam.isStartPlay&&(this.resumePtStat(),this.sendPlayStat("eblock")),this.reportParam.isStartPlay||(this.reportParam.isStartPlay=!0);break;case"seek":this.reportParam.isStartPlay&&(this.pausePtStat(),this.sendPlayStat("drag",{py:{dr:this.model.videoInfo().time+"_"+e.time}}));break;case"pause":this.reportParam.state!=t&&this.reportParam.isStartPlay&&(this.pausePtStat(),this.sendPlayStat("pa"));break;case"resume":this.reportParam.isStartPlay&&this.resumePtStat();break;case"definition":this.reportParam.isStartPlay&&(this.pausePtStat(),this.model.videoSetting.definitionCount++,this.reportParam.replaytype=2,this.sendPlayStat("tg"));break;case"stopPlay":this.reportParam.isStartPlay&&(this.reportParam.isStartPlay=!1,this.pausePtStat(),this.pauseHeadStat(),this.sendPlayStat("end"));break;case"playStop":this.reportParam.isStartPlay&&(this.reportParam.isStartPlay=!1,this.pauseHeadStat(),this.sendPlayStat("end"),this.sendPlayStat("finish"));break;case"hide":null!=this.heartTimer&&this.reportParam.isStartPlay&&(this.pausePtStat(!0),this.heartTimer.stop());break;case"show":null!=this.heartTimer&&this.reportParam.isStartPlay&&(this.resumePtStat(!0),this.heartTimer.start());break;case"error":this.reportParam.isStartPlay=!1,this.sendErrorStat(e),null!=this.heartTimer&&this.heartTimer.stop()}this.reportParam.state=t},startHeartTimer:function(){this.heartTimer?this.heartTimer.running||(this.setDelay(),this.heartTimer.start()):(this.heartTimer=new Yt(18e4,this,this.heartHanlder),this.setDelay(),this.heartTimer.start())},pauseHeadStat:function(){this.heartHanlder(),this.heartTimer&&this.heartTimer.stop()},setDelay:function(){if(this.heartTimer)switch(this.heartTimer.currentCount){case 0:this.heartTimer.delay=15e3;break;case 1:this.heartTimer.delay=6e4;break;default:this.heartTimer.delay=18e4}},heartHanlder:function(){this.pausePtStat(!0),this.resumePtStat(!0),this.setDelay(),this.sendPlayStat("time"),this.reportParam.pt=0},pausePtStat:function(t){void 0===t&&(t=!1);var e=h.now();this.reportParam.isPauseRecord||0==this.reportParam.lastTime||(this.reportParam.pt+=e-this.reportParam.lastTime),0==this.reportParam.lastTime&&(this.reportParam.pt=0),this.reportParam.lastTime=e,t||(this.reportParam.isPauseRecord=!0)},resumePtStat:function(t){void 0===t&&(t=!1);var e=h.now();this.reportParam.lastTime=e,t||(this.reportParam.isPauseRecord=!1)},sendEnvStat:function(){var t=this.model,e="http://apple.www.letv.com/env/?ver=3.0.5&p1="+this.model.reportParam.p1;e=(e+="&p2="+this.model.reportParam.p2)+"&p3="+this.model.reportParam.p3,"html5"==this.model.platform&&(e+="&lc="+t.lc()),"sdk"==this.model.platform&&(e+="&auid="+t.auid()),e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e+="&uuid="+t.uuid())+"&mac="+t.systemData.mac)+"&nt="+t.systemData.nt)+"&os="+t.systemData.os)+"&osv="+t.systemData.osv)+"&app="+t.systemData.appv)+"&bd="+encodeURIComponent(t.systemData.bd))+"&xh="+encodeURIComponent(t.systemData.xh))+"&ro="+encodeURIComponent(t.systemData.ro)+"&src=pl")+"&ch="+t.getTypeFrom())+"&cs="+encodeURIComponent(t.systemData.cs))+"&ssid="+encodeURIComponent(t.systemData.ssid))+"&lo="+encodeURIComponent(t.systemData.lo))+"&la="+encodeURIComponent(t.systemData.la))+"&apprunid="+t.apprunid())+"&r="+Math.random(),this.report(e)},sendPlayStat:function(t,e){var i=this.model,o="http://apple.www.letv.com/cloud_pl/?ver=3.0.5&p1="+this.model.reportParam.p1;o=(o=(o+="&p2="+this.model.reportParam.p2)+"&p3="+this.model.reportParam.p3+"&ac="+t)+"&prg="+i.videoInfo().time,"time"==t&&(18e4<this.reportParam.pt&&(this.reportParam.pt=18e4),o+="&pt="+Math.abs(Math.round(.001*this.reportParam.pt))),"html5"==this.model.platform&&(o+="&lc="+i.lc()),"sdk"==this.model.platform&&(o+="&auid="+i.auid()),o+="&uuid="+i.uuid(),"vod"==i.playType&&(o+="&cid="+i.videoSetting.cid,""!=i.videoSetting.pid&&(o+="&pid="+i.videoSetting.pid),o=(o+="&vid="+i.videoSetting.vid)+"&ty=0"+("&vlen="+i.videoSetting.duration)),"live"==i.playType&&(o=(o=(o+="&lid="+i.videoSetting.lid)+("&sid="+i.videoSetting.sid))+"&ty=1"+"&vlen=6000",i.videoSetting.hasOwnProperty("activityId")&&(o+="&zid="+i.videoSetting.activityId)),o=(o=(o+="&ch="+i.getTypeFrom())+"&vt="+i.videoSetting.vtype)+"&pv="+encodeURIComponent(this.model.systemData.appv),"sdk"==this.model.platform&&((e=e||{}).hasOwnProperty("py")||(e.py={}),e.py.replaytype=this.reportParam.replaytype),null!=e&&e.hasOwnProperty("py")&&(o+="&py="+encodeURIComponent(h.objectParseToString(e.py))),"sdk"==this.model.platform&&(o=(o+="&pcode="+this.model.pcode())+("&nt="+i.systemData.nt)),o+="&ap="+this.model.config.autoplay,"init"==t&&"sdk"==this.model.platform&&(o=(o+="&cdev="+i.systemData.cdev)+("&caid="+zt[i.systemData.os.toLowerCase()])),"play"==t&&(o+="&pay=0",e&&e.hasOwnProperty("cv")&&(o=(o+="&stc="+encodeURIComponent(h.objectParseToString(e.cv.stc)))+("&joint="+e.cv.joint))),o=(o=(o=(o+="&prl=0")+"&ctime="+h.now())+"&custid="+i.userInfo().userId+"&ipt=0&owner=1")+"&apprunid="+i.apprunid(),"sdk"!=this.model.platform&&(o=(o+="&url="+encodeURIComponent(window.location.href))+("&ref="+encodeURIComponent(document.referrer))),o+="&r="+Math.random(),this.report(o)},sendErrorStat:function(t){var e=this.model,i="http://apple.www.letv.com/er/?ver=3.0.5&p1="+this.model.reportParam.p1;i=(i=(i+="&p2="+this.model.reportParam.p2)+"&p3="+this.model.reportParam.p3)+"&et=pl&err="+t.errcode,"html5"==this.model.platform&&(i+="&lc="+e.lc()),"sdk"==this.model.platform&&(i+="&auid="+e.auid()),i=(i=(i=(i=(i=(i=(i=(i+="&mac="+e.systemData.mac)+"&nt="+e.systemData.nt)+"&os="+e.systemData.os)+"&osv="+e.systemData.osv)+"&app="+e.systemData.appv)+"&bd="+e.systemData.bd)+"&xh="+e.systemData.xh)+"&ro="+e.systemData.ro,"vod"==e.playType&&(i+="&cid="+e.videoSetting.cid,""!=e.videoSetting.pid&&(i+="&pid="+e.videoSetting.pid),i+="&vid="+e.videoSetting.vid),"live"==e.playType&&(i=(i+="&lid="+e.videoSetting.lid)+("&sid="+e.videoSetting.sid)),t={ch:e.getTypeFrom(),custid:e.userInfo().userId};for(var o=["uu","vu","liveId","streamId","activityId"],s=0;s<o.length;s++)e.config.hasOwnProperty(o[s])&&(t[o[s]]=e.config[o[s]]);i=(i=(i=(i=(i+="&ep="+encodeURIComponent(h.objectParseToString(t)))+"&ap="+e.config.autoplay)+"&uuid="+e.uuid())+"&apprunid="+e.apprunid())+"&r="+Math.random(),this.report(i)},report:function(t){var e;"html5"==this.model.platform&&($.log("[Stat K]  url:"+t),(e=new Image(1,1)).onload=e.onerror=e.onabort=function(){e=e.onload=e.onerror=e.onabort=null},e.src=t),"sdk"==this.model.platform&&ExternalInterface.callSDK(this.model.systemData.os,"logRequest",{url:t})}},He),$t=(t.inherits(Ie,e),Ie.prototype.setUp=function(t,e){t.hasOwnProperty("uu")&&t.hasOwnProperty("vu")?(this.vodproxy=new Gt(this.model),this.vodproxy.addEventListener(b.LOADCMP,this.gpcCmp,this),this.vodproxy.addEventListener(b.LOADERROR,this.errorHanlder,this),this.vodproxy.load()):this.dispatchEvent(new w(b.LOADERROR,[{code:vt}]))},Ie.prototype.destroy=function(t){this.vodproxy.unload()},Ie.prototype.errorHanlder=function(t){this.dispatchEvent(new w(b.LOADERROR,t.args[1]))},Ie.prototype.gpcCmp=function(t){this.refreshLoadingData(t),this.dispatchEvent(new w(b.LOADCMP,t))},Ie.prototype.refreshLoadingData=function(){this.model.config.hasOwnProperty("loadingurl")&&(this.model.playerConfig.mloadingUrl=0==this.model.config.loadingurl?this.model.playerConfig.loadingUrl:this.model.config.loadingurl)},Ie),Jt=(t.inherits(H,e),H.prototype.init=function(){this.playUrlList=[],this.isFtc=this.startPlay=this.autoplay=!1,this.playState=0,this.render=null,this.emptyDelay=1e3},H.prototype.setConfig=function(t){},H.prototype.errorHandler=function(t){1<this.playUrlList.length&&t&&t.code&&4!=t.code?(this.playUrlList.shift(),this.log("播放失败， errCode:"+t.code+",切换下一个地址:"+this.playUrlList[0]),this.changeurl(this.playUrlList[0])):(t.hasOwnProperty("retryCdn")||(t.retryCdn=!0),t.hasOwnProperty("code")||(t.code=wt),this.log("播放失败: errCode:"+t.code+",url:"+this.playUrlList[0]),this.dispatchEvent(new w(k.EVENT,k.ERROR,[t])))},H.prototype.onPlaySeekHandler=function(){this.emptyST&&clearTimeout(this.emptyST),this.startPlay&&(this.playState=5,this.dispatchEvent(new w(k.EVENT,k.SEEK,this.getTime())))},H.prototype.onPlayFullHandler=function(){this.startPlay||(this.startPlay=!0,this.dispatchEvent(new w(k.EVENT,k.START)),this.render&&this.render.start()),1!=this.playState&&(this.playState=1,this.dispatchEvent(new w(k.EVENT,k.BUFFEREFULL,this.getTime()))),this.emptyST&&clearTimeout(this.emptyST)},H.prototype.onPlayEmptyHandler=function(){var t=this;t.emptyST&&clearTimeout(t.emptyST),t.startPlay&&3!=t.playState&&(5!=t.playState?(t.playState=3,t.emptyST=setTimeout(function(){t.dispatchEvent(new w(k.EVENT,k.BUFFEREMPTY,t.getTime()))},t.emptyDelay)):(t.playState=3,t.dispatchEvent(new w(k.EVENT,k.SEEKEMPTY,t.getTime()))))},H.prototype.onPlaStopHandler=function(){this.emptyST&&clearTimeout(this.emptyST),4!=this.playState&&(this.playState=4,this.dispatchEvent(new w(k.EVENT,k.STOP,!0)))},H.prototype.onPlayHandler=function(){this.emptyST&&clearTimeout(this.emptyST),this.playState=1,this.dispatchEvent(new w(k.EVENT,k.PLAY,this.getTime()))},H.prototype.onPauseHandler=function(){this.emptyST&&clearTimeout(this.emptyST),this.playState=2,this.dispatchEvent(new w(k.EVENT,k.PAUSE,this.getTime()))},H.prototype.onPlayIngHandler=function(){var t=this.getTime();0<=t&&!this.isFtc&&(0<t?(this.log("第一次获得非0的播放时间"+t),this.isFtc=!0,this.onPlayFullHandler()):"iphone"==h.getDevice()&&"qq"==h.getBrowser()&&this.onPlayFullHandler()),this.startPlay&&this.dispatchEvent(new w(k.EVENT,k.PLAYING,t))},H.prototype.onLoadIngHandler=function(){this.dispatchEvent(new w(k.EVENT,k.LODING,this.getLoadPercent()))},H.prototype.onMetaDataHandler=function(t){this.videoWidth=t.width||0,this.videoHeight=t.height||0,0<this.videoWidth&&0<this.videoHeight&!this.hasMetadata&&(this.setSize(),this.hasMetadata=!0,this.dispatchEvent(new w(k.EVENT,k.METADATA,{videoWidth:this.videoWidth,videoHeight:this.videoHeight,duration:this.duration}))),this.mduration&&0==t.duration&&(t.duration=this.mduration),0<t.duration&&this.duration!=t.duration&&(this.duration=t.duration,this.dispatchEvent(new w(k.EVENT,k.DURATION,{duration:this.duration})))},H),Zt=(Ut=0,Ft="error emptied abort playing play pause ended canplay waiting loadeddata loadedmetadata timeupdate seeked seeking progress durationchange".split(" "),t.inherits(R,Jt),R.prototype.destroy=function(){this.removeEvents(),this.video.pause(),this.video.src="",this.render&&this.render.close()},R.prototype.setPoster=function(t){this.video.poster=t},R.prototype.setUp=function(t,e){Ut++;var i="LecoudPlayer"+(new Date).getTime()+Ut,o=["preload","controls","width","height"],s='<div id="v{id}" style="left:0px;top:0px;width:100%;height:100%;display: block;position: relative;"><video  id="{id}" controls="controls"  style="width:100%;height:100%;"></video></div>'.replace(/{id}/g,i);for(e.innerHTML=s,this.outEl=e,this.video=document.getElementById(i),this.videoBox=document.getElementById("v"+i),this.config=t,this.isEndStartSeek=!(0<this.config.start),t.hasOwnProperty("pic")&&(this.video.poster=t.pic),t.hasOwnProperty("autoplay")&&"1"==t.autoplay?(this.video.autoplay="autoplay",this.autoplay=!0):this.autoplay=!1,t.hasOwnProperty("playsinline")&&"1"==t.playsinline&&(this.video.WebKitPlaysInline?this.video.WebKitPlaysInline=!0:(this.video.setAttribute("webkit-playsinline",""),this.video.setAttribute("playsinline",""))),i=0;i<o.length;i++)t.hasOwnProperty(o[i])&&"width"!=o[i]&&"height"!=o[i]&&(this.video[o[i]]=t[o[i]]);this.isShow=!0,this.vArea=this.videoBox,0<this.outEl.offsetWidth&0<this.outEl.offsetHeight||(this.videoBox.style.width="99.5%",this.videoBox.style.height="99.5%")},R.prototype.enableControls=function(){this.video.controls=!0},R.prototype.disableControls=function(){this.video.controls=!1},R.prototype.setContainer=function(t){this.vArea=t},R.prototype.setLoop=function(t){},R.prototype.hide=function(t){this.isShow&&(t?this.video.style.display="none":(this.tmpwidth=this.videoBox.style.width,this.tmpheight=this.videoBox.style.height,this.videoBox.style.width="1px",this.videoBox.style.height="1px",this.videoBox.style.left="-1000px",this.videoBox.style.top="-1000px"),this.isShow=!1)},R.prototype.show=function(){this.isShow||(this.videoBox.style.display="",this.videoBox.style.width=this.tmpwidth,this.videoBox.style.height=this.tmpheight,this.videoBox.style.left="0px",this.videoBox.style.top="0px",this.isShow=!0)},R.prototype.setSize=function(){var t,e;this.display=!!(0<this.outEl.offsetWidth&0<this.outEl.offsetHeight),this.isShow&&(this.config.dvideoSize?this.display&&(this.videoBox.style.width="100%",this.videoBox.style.height="100%"):0<this.videoWidth&&0<this.videoHeight&0<this.outEl.offsetWidth&0<this.outEl.offsetHeight&&(this.videoWidth/this.videoHeight>this.outEl.offsetWidth/this.outEl.offsetHeight?(t=this.outEl.offsetWidth,e=this.videoHeight*this.outEl.offsetWidth/this.videoWidth):(e=this.outEl.offsetHeight,t=this.videoWidth*this.outEl.offsetHeight/this.videoHeight),this.videoBox.style.width=t+"px",this.videoBox.style.height=e+"px",this.videoBox.style.top=.5*(this.outEl.offsetHeight-this.videoBox.offsetHeight)+"px",this.videoBox.style.left=.5*(this.outEl.offsetWidth-this.videoBox.offsetWidth)+"px")),this.render&&this.render.setSize(this.vArea.offsetWidth,this.vArea.offsetHeight)},R.prototype.addEvents=function(){for(var t=this.video,e=0;e<Ft.length;e++)t.addEventListener(Ft[e],this.videoHandlerBack,!0)},R.prototype.removeEvents=function(){for(var t=this.video,e=0;e<Ft.length;e++)t.removeEventListener(Ft[e],this.videoHandlerBack,!0)},R.prototype.videoHandler=function(t){switch(t.type){case"error":if("firefox"==h.getBrowser()&&null==this.video.error)break;if(this.video.error&&4==this.video.error.code&&0<this.getTime())break;t={code:wt},this.video.error&&this.video.error.hasOwnProperty("code")&&(t.code="49"+this.video.error.code),this.errorHandler(t);break;case"playing":this.startPlay||this.onMetaDataHandler({width:this.video.videoWidth,height:this.video.videoHeight,duration:this.video.duration}),this.autoSeek(),this.isEndStartSeek&&this.onPlayFullHandler(),this.isStartSeek&&(this.isEndStartSeek=!0);break;case"emptied":case"waiting":this.onPlayEmptyHandler();break;case"seeked":this.isEndStartSeek=!0,this.onPlayFullHandler();break;case"seeking":this.onPlaySeekHandler();break;case"play":this.onPlayHandler();break;case"pause":this.onPauseHandler();break;case"ended":this.onPlaStopHandler();break;case"timeupdate":this.display||this.setSize(),this.isEndStartSeek&&this.onPlayIngHandler();break;case"progress":this.onLoadIngHandler();break;case"durationchange":case"loadedmetadata":this.onMetaDataHandler({width:this.video.videoWidth,height:this.video.videoHeight,duration:this.video.duration})}},R.prototype.autoSeek=function(){var t=this;this.log("autoSeek:"+t.config.start+"--"+t.startPlay+"-"+t.isEndStartSeek),0==t.config.start||t.startPlay||t.isEndStartSeek?t.isStartSeek=!0:setTimeout(function(){t.isStartSeek=!0,t.seek(t.config.start)},500)},R.prototype.getLoadPercent=function(){for(var t=this.video.buffered,e=0;e<t.length;e++)if(this.getTime()<t.end(e))return Math.min(1,t.end(e)/this.video.duration);return 0},R.prototype.play=function(t,e,i,o){var s=this;s.hasMetadata=!1,s.playUrlList=t,s.config.start=e,s.url=s.playUrlList[0],s.isEndStartSeek=!(0<s.config.start),s.isStartSeek=!1,this.isFtc=s.startPlay=!1,this.render||(this.render=new Qt),this.render.init({type:o,video:this.video,el:this.vArea,onstart:function(){s.log("渲染引擎初始化完毕，回调播放, url:"+s.url),s.addEvents(),s.video.src=s.url,(s.autoplay||i)&&(s.video.load&&s.video.load(),s.video.play())},onerror:function(t){s.log("渲染引擎初始化失败"),t.retryCdn=!1,s.errorHandler(t)}})},R.prototype.resume=function(){this.video.play&&this.video.play()},R.prototype.pause=function(){this.video.pause()},R.prototype.getTime=function(){return this.video.currentTime},R.prototype.seek=function(t){this.log("seek:"+t),this.video.currentTime=t},R.prototype.changeurl=function(t){this.url=t,this.video.src=this.url,this.config.start=this.getTime(),this.isEndStartSeek=!(0<this.config.start),this.video.load(),this.video.play()},R.prototype.setVol=function(t){this.video.volume=t},R.prototype.getVol=function(t){return this.video.volume},R.prototype.stop=function(){this.destroy()},R.prototype.getVideoRect=function(){return{w:this.video.offsetWidth,h:this.video.offsetHeight}},R),Qt=(Bt={pano:{name:"PanoRender",check:h.checkPano,err:{code:"",message:""}}},t.inherits(Oe,Ct),Oe.prototype.init=function(t){this.isStart=!1,this.options=t,this.log("初始化渲染引擎"+this.eg),this.eg?t.type!=this.eg.type?this.eg=null:this.eg.reset(t):this.eg=this.initPlugin(t,this.pluginOk,Bt)},Oe.prototype.pluginOk=function(t){this.eg=t?new t(this.options):null},Oe.prototype.start=function(){this.isStart||(this.isStart=!0,this.eg&&this.eg.start())},Oe.prototype.close=function(){this.log("关闭渲染引擎"+this.eg),this.eg&&this.eg.close(),this.isStart=!1},Oe.prototype.setSize=function(t,e){this.eg&&this.eg.setSize(t,e)},Oe),te=(t.inherits(I,e),I.prototype.init=function(t){this.time=0,this.config=t},I.prototype.setUp=function(t,e){var i=h.clone(this.config),o=["pic","volume"];this.loop=!1,this.el=e,this.volume=t.volume;for(var s=0;s<o.length;s++){var n=o[s];!i.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(i[n]=t[n])}this.creatPlayer(i,e),this.player.duration=t.duration},I.prototype.creatPlayer=function(t,e){this.player&&(this.player.removeEventListener(k.EVENT,this.MediaHanlder,this),this.player.destroy(),this.player=null),this.player=this.getPlayer(t),this.player.init(),this.player.setUp(t,e)},I.prototype.setMedia=function(t){},I.prototype.hide=function(t){this.player.hide(t)},I.prototype.show=function(){this.player.show()},I.prototype.setConfig=function(t){},I.prototype.setContainer=function(t){null!=t&&this.player.setContainer(t)},I.prototype.getPlayer=function(t){return new Zt},I.prototype.startPlay=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=!1),void 0===o&&(o=""),this.destroy(),this.setVol(this.volume),this.player.addEventListener(k.EVENT,this.MediaHanlder,this),this.player.mduration=t.duration,this.player.play(t.urls,e,i,o)},I.prototype.setSize=function(){this.player.setSize()},I.prototype.play=function(){this.player.resume()},I.prototype.setVol=function(t){this.player.setVol(t)},I.prototype.pause=function(){this.player.pause()},I.prototype.destroy=function(){this.closeVideo(),this.loop=!1,this.player.setLoop(!1),this.player.destroy()},I.prototype.closeVideo=function(){this.player.removeEventListener(k.EVENT,this.MediaHanlder,this),this.player.stop()},I.prototype.getTime=function(){return parseInt(this.player.getTime())},I.prototype.seek=function(t){0<=t&&t-this.player.duration<0&&(this.player.seek(t),this.player.resume())},I.prototype.getBufferPercent=function(t){return 1},I.prototype.getLoadPercent=function(t){return this.player.getLoadPercent()},I.prototype.setLoop=function(t){this.loop=t,this.player.setLoop(t)},I.prototype.MediaHanlder=function(t){if(t.args[1]===k.STOP)if(this.loop)return void this.seek(0);this.dispatchEvent(t)},I.prototype.changeurl=function(t){this.player.changeurl(t)},I.prototype.getVideoRect=function(){return this.player.getVideoRect()},I.prototype.replay=function(){this.player.seek(0),this.dispatchEvent(new w(k.EVENT,k.REPLAY,this.getTime()))},I.prototype.getVideoEl=function(){return this.player.video},I.prototype.setPoster=function(t){return this.player.setPoster(t)},I),ee=(t.inherits(O,Vt),O.prototype.init=function(){this.tplKey="controlBar",this.isSeeking=this.addEvent=!1,this.duration=this.model.videoSetting.duration},O.prototype.setUp=function(t){this.superClass.setUp.call(this,t,!0);var i=this;this.el.playBtn.addEventListener("click",function(){i.facade.dispatchEvent(new w(P.EVENT,P.PLAY))}),this.el.pauseBtn.addEventListener("click",function(){i.facade.dispatchEvent(new w(P.EVENT,P.PAUSE))}),this.el.definition.addEventListener("mouseover",function(){i.definitionListShow.apply(i,arguments)}),this.el.definitionList.addEventListener("mouseover",function(t){"touchstart"!=t.type&&i.definitionListShow.apply(i,arguments)}),this.el.definition.addEventListener("mouseout",function(){i.definitionListHide.apply(i,arguments)}),this.el.definitionList.addEventListener("mouseout",function(){i.definitionListHide.apply(i,arguments)}),this.el.fullScreen.addEventListener("click",function(){i.facade.dispatchEvent(new w(P.EVENT,P.FULLSCREEN))}),this.el.playBarIco.drag({rect:function(){return{x:0,y:i.el.playBarIco.getY(),w:i.el.playIngBar.getWidth(),h:0}},onDown:function(t){i.isSeeking=!0},onMove:function(t){i.seekHanler.apply(i,[!1])},onUp:function(t){i.seekHanler.apply(i,[!0]),i.isSeeking=!1}}),this.el.playIngBar.addEventListener("click",function(t){var e=f.getPos(i.el.playIngBar.el);t=f.getMousePoint(t),i.el.playBarIco.setX(t.x-e.x),i.seekHanler.apply(i,[!0])}),this.el.playBtn.setVisible(!1),this.el.playBar.setWidth("0%"),this.el.playBarIco.setX(0),this.el.bufferBar.setWidth("0%"),this.el.definitionList.setVisible(!1),this.el.volBox.setVisible(!1),this.setSize(this.el.offsetWidth,this.el.offsetHeight),"live"==this.model.playType&&this.el.playIngBar.setVisible(!1),this.model.config.playIngBg||this.el.playIngBg.setVisible(!1),this.el.fullScreenBox.setVisible(this.model.config.fullscreen),this.el.definition.setVisible(this.model.config.definition)},O.prototype.seekHanler=function(t){var e;this.playRate=(.5*this.el.playBarIco.getWidth()+this.el.playBarIco.getX())/this.el.playIngBar.getWidth(),this.el.playBar.setWidth(100*this.playRate+"%"),e=this.playRate*this.duration,this.el.time.html(h.num2Time(this.playRate*this.duration)),t&&this.facade.dispatchEvent(new w(P.EVENT,P.SEEK,e))},O.prototype.setSize=function(t,e,i){if(i=12,this.el.logo.getVisible()&&0<this.el.logo.getWidth()&&this.el.logo.getHeight()){switch(this.logoInfo.pos){case"left":this.el.logo.setX(i),i=i+this.el.logo.getWidth()+12;break;case"right":this.el.logo.setX(t),t=t-this.el.logo.getWidth()-12}this.el.logo.setY(.5*(e-this.el.logo.getHeight()))}this.el.playBtnBox.setX(i),i+=this.el.playBtnBox.getWidth(),this.el.fullScreenBox.getVisible()&&(t=t-this.el.fullScreenBox.getWidth()-24,this.el.fullScreenBox.setX(t)),this.el.definition.getVisible()&&(t=t-this.el.definition.getWidth()-12,this.el.definition.setX(t)),this.el.volBox.getVisible()&&(t=t-this.el.volBox.getWidth()-12,this.el.volBox.setX(t)),t-=24,this.el.playIngBar.setX(i+=12),this.el.playIngBar.setWidth(t-i)},O.prototype.skinAction=function(t,e){switch(t){case ct:"live"==this.model.playType&&this.model.liveback&&this.el.playIngBar.setVisible(!0),this.duration=e.duration,this.el.duration.html(h.num2Time(this.duration));break;case dt:"live"==this.model.playType&&this.model.liveback&&this.el.playIngBar.setVisible(!0),0<this.duration&&(this.playRate=e/this.duration,this.isSeeking||(this.el.playBar.setWidth(100*this.playRate+"%"),this.el.playBarIco.setX(100*this.playRate+"%"),this.el.time.html(h.num2Time(e))));break;case ht:this.loadingRate=e,this.el.bufferBar.setWidth(100*this.loadingRate+"%");break;case lt:switch(e){case nt:this.el.playBtn.setVisible(!1),this.el.pauseBtn.setVisible(!0);break;case at:case rt:this.el.playBtn.setVisible(!0),this.el.pauseBtn.setVisible(!1)}break;case ut:this.setUpDefinitionList(e);break;case ft:this.setUpDefinition(e);break;case yt:e?this.skin.removeClassName("hCrtBar"):this.skin.addClassName("hCrtBar");break;case mt:this.setUpControlbarLogo(e)}},O.prototype.definitionListShow=function(t){var e,i,o=this;o.elDeList.length<=1||(clearTimeout(o.deTimeoutId),o.el.definitionList.setVisible(!0),e=this.el.definition.getY()-this.el.definitionList.getHeight()-5,i=this.el.definition.getX()+.5*this.el.definition.getWidth()-.5*this.el.definitionList.getWidth(),this.el.definitionList.setY(e),this.el.definitionList.setX(i),void 0!==t&&"touchstart"==t.type&&(o.deTimeoutId=setTimeout(function(){o.el.definitionList.setVisible(!1)},5e3)))},O.prototype.definitionListHide=function(t){var e=this;e.elDeList.length<=1||(clearTimeout(e.deTimeoutId),t?e.deTimeoutId=setTimeout(function(){e.el.definitionList.setVisible(!1)},200):e.el.definitionList.setVisible(!1))},O.prototype.setUpDefinitionList=function(t){if(this.el.definitionList.html(""),this.elDeList=[],t.length<=1)this.el.definitionList.setVisible(!1);else for(var e=0;e<t.length;e++){var i=new Dt(f.$C("DIV"));i.setClassName("text button litem"),i.setAttribute({ratedata:t[e].rate}),i.html(t[e].name),this.elDeList.push(i),this.el.definitionList.appendChild(i),this.addDefinitionItemEvents(i)}},O.prototype.addDefinitionItemEvents=function(t){var e=this;t.addEventListener("click",function(){this.hasAttribute("checked")||(e.definitionListHide(!1),e.facade.dispatchEvent(new w(P.EVENT,P.SETDEFINITION,this.getAttribute("rateData"))))})},O.prototype.setUpDefinition=function(t){this.el.definition.html(t.name);for(var e=0;e<this.elDeList.length;e++){var i=this.elDeList[e];i.getAttribute("ratedata")==t.rate?(i.addClassName("activeText"),i.setAttribute({checked:1})):(i.removeClassName("activeText"),i.removeAttribute("checked"))}this.setSize.call(this,this.el.offsetWidth,this.el.offsetHeight)},O.prototype.setUpControlbarLogo=function(t){var e,i,o=this;o.logoInfo=t,o.el.logo.html(""),""!=o.logoInfo.pic&&(i=f.$C("IMG"),""!=o.logoInfo.url?((e=f.$C("A")).href=o.logoInfo.url,e.target="_blank",e.style.display="block",e.appendChild(i)):e=i,i.onload=function(){o.el.logo.appendChild(e),i.height>.9*o.el.offsetHeight&&(i.width=i.width*o.el.offsetHeight*.9/i.height,i.height=.9*o.el.offsetHeight),o.el.logo.setVisible(!0),o.setSize.call(o,o.el.offsetWidth,o.el.offsetHeight)},i.src=this.logoInfo.pic)},O),ie=(t.inherits(De,Vt),De.prototype.init=function(){this.tplKey="error",this.addEvent=!1},De.prototype.setUp=function(t){this.superClass.setUp.call(this,t,!0),this.skin.setVisible(!1)},De.prototype.skinAction=function(t,e){switch(t){case pt:this.skin.setVisible(!0);var i=e.hasOwnProperty("message")&&""!=e.message?e.message:"播放失败了，不如刷新一下试试";this.el.message.html(i),this.el.errCode.html("<"+e.code+">"),i=.5*(this.el.offsetHeight-(this.el.message.getHeight()+this.el.errCode.getHeight())),this.el.message.setY(i),this.el.errCode.setY(i+this.el.message.getHeight());break;case gt:this.skin.setVisible(!1),this.el.message.html(""),this.el.errCode.html("")}},t.inherits(Ve,Vt),Ve.prototype.init=function(){this.tplKey="loading",this.addEvent=!1},Ve.prototype.setUp=function(t){this.superClass.setUp.call(this,t,!0)},Ve.prototype.setSize=function(t,e,i){this.loading&&((this.loading.getWidth()>t||this.loading.getHeight()>e)&&(i=this.loading.getWidth()/this.loading.getHeight(),this.loading.getWidth()/this.loading.getHeight()>t/e?(this.loading.setWidth(parseInt(t)),this.loading.setHeight(parseInt(t/i))):(this.loading.setHeight(parseInt(e)),this.loading.setWidth(parseInt(e*i)))),this.loading.setStyle({marginLeft:-.5*this.loading.getWidth()+"px",marginTop:-.5*this.loading.getHeight()+"px"}))},Ve.prototype.skinAction=function(t,e,i){var o,s;t===a&&(o=this,e.show?(e.hasOwnProperty("type")&&0==e.type||""==e.url?(o.el.bld.setVisible(!1),o.el.sld.setVisible(!0)):(o.el.bld.setVisible(!0),o.el.sld.setVisible(!1),o.el.bld.getAttribute("url")!=e.url?(o.el.bld.html(""),o.loading&&(o.loading.el.onload=null,o.loading=null),(s=f.$C("img")).onload=function(){o.el.bld.html(""),o.loading=new Dt(s),o.el.bld.appendChild(this),o.el.bld.setAttribute({url:e.url}),o.setSize(o.skin.getWidth(),o.skin.getHeight()),this.onload=null},s.src=e.url):o.setSize(o.skin.getWidth(),o.skin.getHeight())),this.skin.setVisible(!0)):this.skin.setVisible(!1))},Ve),oe=(t.inherits(Ce,Vt),Ce.prototype.init=function(){this.tplKey="playbtn",this.addEvent=!1},Ce.prototype.setUp=function(t){var e=this;e.superClass.setUp.call(this,t,!0),e.skin.setVisible(!1),e.skin.addEventListener("click",function(){e.facade.dispatchEvent(new w(P.EVENT,P.PLAY))})},Ce.prototype.setSize=function(t,e,i){},Ce.prototype.skinAction=function(t,e){if(t===lt)switch(e){case nt:this.skin.setVisible(!1);break;case at:case rt:this.skin.setVisible(!0)}},Ce),se=(t.inherits(Ae,Vt),Ae.prototype.init=function(){this.superClass.init.apply(this,arguments),this.tplKey="skin",this.facade=new Lt},Ae.prototype.setUp=function(t){this.superClass.setUp.call(this,t),this.controlBar=new ee(this.facade,this.model),this.controlBar.setUp(this.el.controlBar),this.loading=new ie(this.facade,this.model),this.loading.setUp(this.el.loading),this.bigPlaybtn=new oe(this.facade,this.model),this.bigPlaybtn.setUp(this.el.playBtn)},Ae.prototype.skinHandler=function(t){this.dispatchEvent(t)},Ae.prototype.skinInit=function(t){this.skin.setVisible(!0),this.controlBar.skinAction(mt,h.clone(this.model.playerConfig.logo))},Ae.prototype.skinAction=function(t,e){this.controlBar.skinAction(t,e),this.loading.skinAction(t,e),this.bigPlaybtn.skinAction(t,e)},Ae.prototype.setSize=function(t,e){this.controlBar.setSize(this.controlBar.skin.getWidth(),this.controlBar.skin.getHeight()),this.loading.setSize(this.loading.skin.getWidth(),this.loading.skin.getHeight()),this.bigPlaybtn.setSize()},Ae),ne=(t.inherits(Le,e),Le.prototype.translate=function(){this.gslbLoader=new Kt(this.model),this.model.videoSetting.gslb?(this.gslbLoader.addEventListener(b.LOADCMP,this.gslbCmp,this),this.gslbLoader.addEventListener(b.LOADERROR,this.gslbErr,this),this.gslbLoader.load()):this.dispatchEvent(new w(b.LOADCMP,this.leUrlsHandler()))},Le.prototype.gslbCmp=function(t){this.dispatchEvent(new w(b.LOADCMP,t.args[1]))},Le.prototype.gslbErr=function(t){this.dispatchEvent(new w(b.LOADCMP,this.leUrlsHandler()))},Le.prototype.leUrlsHandler=function(t){t=h.clone(this.model.videoSetting.urls);for(var e=0;e<t.length;e++)t[e]=this.gslbLoader.checkGslbUrl(t[e]);return t},Le),re=(t.inherits(D,xt),D.prototype.init=function(t,e){this.facade=t,this.model=e,this.model.record={},this.reportApi=new Xt(e),this.reportApi.onStateChanged("init",{deviceId:this.model.lc(),os:h.getOs(),osv:"-",width:window.screen.width,height:window.screen.height,appv:this.model.playerConfig.version})},D.prototype.setUp=function(t,e){this.model.videoSetting.errCode=0,this.facade.addEventListener(S.EVENT,this.videoSateHandler,this)},D.prototype.destroy=function(){this.superClass.destroy.apply(this,arguments),this.reportApi.reset(),this.facade.removeEventListener(S.EVENT,this.videoSateHandler,this)},D.prototype.videoSateHandler=function(t){switch(t.args[1]){case S.VIDEO_DATA_CMP:0!=this.model.record.ms&&(this.model.record.mr=h.now()-this.model.record.ms,this.model.record.ms=0),this.reportApi.onStateChanged("start",{});break;case k.BUFFEREMPTY:this.reportApi.onStateChanged("bufferEmpty");break;case k.BUFFEREFULL:this.reportApi.onStateChanged("bufferFull");break;case k.PLAY:this.reportApi.onStateChanged("resume");break;case k.START:0!=this.model.record.vs&&(this.model.record.pr=h.now()-this.model.record.vs,this.model.record.vs=0),this.reportApi.onStateChanged("play",{cv:{stc:{mr:this.model.record.mr,adr:this.model.record.adr,pr:this.model.record.pr,gslbr:this.model.record.gslbr},joint:this.model.joint}});break;case k.STOP:t.args[2]?this.reportApi.onStateChanged("playStop"):this.reportApi.onStateChanged("stopPlay");break;case k.PAUSE:this.reportApi.onStateChanged("pause");break;case k.SEEK:this.reportApi.onStateChanged("seek",{time:t.args[2]});break;case S.VPH:this.reportApi.onStateChanged("hide");break;case S.VPS:this.reportApi.onStateChanged("show");break;case k.DEFSTART:this.reportApi.onStateChanged("definition");break;case S.ERROR:case k.ERROR:t=t.args[2][0],this.model.videoSetting.errCode=t.code,this.reportApi.onStateChanged("error",{errcode:t.code}),this.report({logcontent:t.errInfo||""});break;case E.HEADEND:case E.NOAD:0!=this.model.record.as&&(this.model.record.adr=h.now()-this.model.record.as,this.model.record.as=0),this.model.record.vs=h.now();break;case S.VIDEO_DATA_START:this.model.record.ms=h.now();break;case S.GSLB_START:this.model.record.gslbs=h.now();break;case S.GSLB_CMP:0!=this.model.record.gslbs&&(this.model.record.gslbr=h.now()-this.model.record.gslbs,this.model.record.gslbs=0),this.model.record.vs=h.now()}},D.prototype.report=function(t){var e,i=this.model.videoSetting.errCode,o=(t&&t.hasOwnProperty("code")&&(i=t.code),{ver:"1.0"});for(e in o.uuid=this.model.uuid(),o.ec=i,o.p3="h5",o.cvid="vod"==this.model.playType?this.model.videoSetting.vid:this.model.videoSetting.sid,o.vtyp=this.model.playType,o.mtyp="cloud",o.cuid=this.model.userData.userId,o.leid=this.model.lc(),o.pver=this.model.playerConfig.version,o.type=1,o.logcontent="",t)o[e]=t[e];J.report("http://log.cdn.letvcloud.com/sdk/epl",o)},D.prototype.showLog=function(){J.print($.getLog(),this.model.lc())},D.prototype.getLog=function(){return $.getLog()},D),ae=(Nt="http://yuntv.letv.com/player/plugin/adPlayer.js","https:"==window.location.protocol&&(Nt=Nt.replace("http://","https://s.")),t.inherits(V,xt),V.prototype.setUp=function(t,e){var i=this;if(i.player=t,i.videoOutEl=e,i.model.config.hasOwnProperty("onPlayerReady"))if("function"!=typeof i.model.config.onPlayerReady&&(i.model.config.onPlayerReady=window[i.model.config.onPlayerReady]),"function"==typeof i.model.config.onPlayerReady)try{var o=setTimeout(function(){i.startLeAd.call(i)},5e3);i.model.config.onPlayerReady({video:i.player.player.video,el:this.videoOutEl},function(t,e){switch(t){case"adstart":clearTimeout(o);break;case"adend":i.startLeAd.call(i)}})}catch(t){i.startLeAd.call(i)}else i.startLeAd.call(i);else i.startLeAd.call(i)},V.prototype.startLeAd=function(){this.checkAd()?"undefined"==typeof H5AD||"function"!=typeof H5AD.initAD?h.getJS(Nt,this.initAd,this.initAd,this,"utf-8"):this.initAd():this.facade.dispatchEvent(new w(E.EVENT,E.NOAD,"skip"))},V.prototype.checkAd=function(){return!(this.model.config.hasOwnProperty("letvad")&&"0"==this.model.config.letvad.toString()||this.model.videoSetting.hasOwnProperty("ark")&&"0"==this.model.videoSetting.ark.toString())},V.prototype.initAd=function(t,e){var i,o=this;"undefined"!=typeof H5AD&&"function"==typeof H5AD.initAD?((i=new xe).p1=this.model.reportParam.p1,i.p2=this.model.reportParam.p2,i.p3=this.model.reportParam.p2,i.lc=this.model.lc(),i.uuid=this.model.uuid(),i.ver=this.model.playerConfig.version,i.gdur=this.model.videoSetting.duration,i.cont=this.videoOutEl.id,"vod"==this.model.playType?(i.islive=!1,i.cid=this.model.videoSetting.cid,i.vid=this.model.videoSetting.vid,i.mmsid=this.model.videoSetting.mmsid,this.model.videoSetting.hasOwnProperty("pid")&&(i.pid=this.model.videoSetting.pid)):"live"==this.model.playType&&(i.islive=!0,i.sid=this.model.config.activityId),i.ch=this.model.getTypeFrom(),i.ark=this.model.videoSetting.ark,i.useui=1,H5AD.initAD(i,function(t,e){if(o.log(t),o.player)switch(t){case"playAD":o.adList=e,o.adList&&0==o.adList.length?setTimeout(function(){o.destroy(),o.facade.dispatchEvent(new w(E.EVENT,E.NOAD))},0):(o.curAdIndex=0,o.playAD(),o.facade.dispatchEvent(new w(E.EVENT,E.HEADSTART)));break;case"stopAD":setTimeout(function(){o.destroy(),o.facade.dispatchEvent(new w(E.EVENT,E.HEADEND))},0);break;case"resumeAD":o.videoPlay();break;case"pauseAD":o.videoPause();break;case"getCurrTime":return o.getTime()||0;case"getVideoRect":return o.getVideoRect()}})):this.facade.dispatchEvent(new w(E.EVENT,E.NOAD,"error")),V.prototype.playAD=function(){var t;this.curAdIndex<this.adList.length?(this.curAd=this.adList[this.curAdIndex],this.player.addEventListener(k.EVENT,this.mediaHandler,this),t=!0,0==this.curAdIndex&&-2==this.model.config.posterType&&(t="1"==this.model.config.autoplay),this.player.startPlay({urls:[this.curAd.url]},0,t)):(this.destroy(),this.facade.dispatchEvent(new w(E.EVENT,E.HEADEND)))},V.prototype.mediaHandler=function(t){switch(t.args[1]){case k.PLAY:H5AD.sendEvent("AD_PLAY",{curAD:this.curAd,curIndex:this.curAdIndex});break;case k.PAUSE:H5AD.sendEvent("AD_PAUSE",{curAD:this.curAd,curIndex:this.curAdIndex});break;case k.STOP:H5AD.sendEvent("AD_ENDED",{curAD:this.curAd,curIndex:this.curAdIndex}),this.curAdIndex++,H5AD.destory(this.curAd),this.playAD();break;case k.ERROR:H5AD.sendEvent("AD_ERROR",{curAD:this.curAd,curIndex:this.curAdIndex}),this.curAdIndex++,H5AD.destory(this.curAd),this.playAD()}},V.prototype.videoPlay=function(){this.player&&this.player.play()},V.prototype.getTime=function(){return this.player?this.player.getTime():0},V.prototype.videoPause=function(){this.player&&this.player.pause()},V.prototype.getVideoRect=function(){return this.player?this.player.getVideoRect():{w:0,h:0}},V.prototype.destroy=function(){this.player&&(this.player.removeEventListener(k.EVENT,this.mediaHandler,this),this.player.closeVideo(),this.player=null);try{H5AD&&this.curAd&&H5AD.destory(this.curAd)}catch(t){this.log("ad error "+t)}}},V),le=(t.inherits(C,xt),C.prototype.setUp=function(t,e,i){t=(t='<div id="#{video}" style="left:0px;top:0px;position: absolute;width:{width};height:{height};z-index:1;display: block;background-color: #000000;overflow:hidden"></div><div id="#{skin}" style="left:0px;top:0px;position: relative;width:{width};height:{height};z-index:2;overflow: hidden;"></div><div id="#{error}" style="left:0px;top:0px;position: absolute;width:{width};height:{height};z-index:3;overflow: hidden;display:none;"></div>'.replace(/{width}/g,"100%")).replace(/{height}/g,"100%"),this.el=f.$E(e),this.outEl=f.$E(i),this.setStylebyConfig(this.model.config),this.skin=new Dt(this.el),f.getTemplate(this.el,t),this.model.config.skinnable?(this.facade.addEventListener(S.EVENT,this.videoSateHandler,this),this.skinView=new se(this.facade,this.model),this.skinView.addEventListener(P.EVENT,this.skinHandler,this),this.skinView.setUp(this.el.skin),this.skinView.skinAction(yt,!1),this.skinView.skin.setVisible(!1)):this.el.removeChild(this.el.skin)},C.prototype.setStylebyConfig=function(t){var e=["controls","fullscreen"],i="vb"+h.creatUuid();this.el.className=i;for(var o=0;o<e.length;o++)t[e[o]]||(t.pageControls?et["setMedia"+e[o]]("",!1):et["setMedia"+e[o]](i,!1))},C.prototype.getVideArea=function(){return this.el.skin.videoArea||null},C.prototype.autoSize=function(){var t=this.model.videoSetting.videoWidth,e=this.model.videoSetting.videoHeight;if(0!=t&&0!=e)switch(t/=e,this.model.config.autoSize){case"1":e=f.$E(this.el).offsetWidth,this.log("获得容器的宽度=============================="+e),0==e&&(e=-1==(e=f.$E(this.outEl).style.width).indexOf("%")?parseInt(e):0),this.log("获得容器的宽度=============================="+e),0<e&&(this.model.config.changeParent&&(this.outEl.style.height=e/t+"px"),this.el.style.height=e/t+"px");break;case"2":0<(e=0==(e=f.$E(this.el).offsetHeight)?-1==(e=f.$E(this.outEl).style.height).indexOf("%")?parseInt(e):0:e)&&(this.model.config.changeParent&&(this.outEl.style.width=e*t+"px"),this.el.style.width=e*t+"px")}},C.prototype.setSize=function(){0<this.el.offsetWidth&&0<this.el.offsetHeight?(this.display=!0,this.skinView&&this.skinView.setSize()):this.display=!1},C.prototype.addEvents=function(){this.skinView&&(this.hideFun=h.bindFun(this.autoHide,this),this.showFun=h.bindFun(this.autoShow,this),this.skinView.skin.addEventListener("mouseout",this.hideFun),this.skinView.skin.addEventListener("mouseover",this.showFun))},C.prototype.removeEvents=function(){this.skinView&&this.hideFun&&this.showFun&&(this.skinView.skin.removeEventListener("mouseout",this.hideFun),this.skinView.skin.removeEventListener("mouseover",this.showFun))},C.prototype.autoHide=function(t){this.skinView&&(this.timer&&this.timer.reset(),this.skinView.skinAction(yt,!1))},C.prototype.autoShow=function(t){this.skinView&&(this.skinView.skinAction(yt,!0),void 0===t||"mouseover"!=t.type)&&(this.timer?this.timer.reset():this.timer=new Yt(5e3,this,this.autoHide,1),this.timer.start())},C.prototype.destroy=function(){this.shutDown(),this.skinView&&(this.facade.removeEventListener(S.EVENT,this.videoSateHandler,this),this.skinView.removeEventListener(P.EVENT,this.skinHandler,this),this.removeEvents(),this.skinView=null)},C.prototype.skinHandler=function(t){this.facade.dispatchEvent(t)},C.prototype.shutDown=function(){this.skinView&&(this.skinView.skinAction(ht,0),this.skinView.skinAction(dt,0),this.skinView.skinAction(a,{show:!1}),this.skinView.skinAction(yt,!1),this.skinView.skin.setVisible(!1),this.removeEvents())},C.prototype.videoSateHandler=function(t){switch(t.args[1]!==k.LODING&&t.args[1]!=k.PLAYING&&this.log(t.args[1]),t.args[1]){case k.SEEKEMPTY:case k.BUFFEREMPTY:this.skinView.skinAction(a,{show:!0,url:this.model.playerConfig.loadingUrl,type:"0"});break;case k.BUFFEREFULL:this.skinView.skinAction(a,{show:!1});break;case k.START:this.skinView.skinAction(a,{show:!1}),this.addEvents(),this.autoShow(),this.model.config.onlyPic&&this.skinView.skinAction(lt,rt);break;case k.PLAY:this.model.config.onlyPic||this.skinView.skinAction(lt,nt);break;case k.STOP:this.skinView.skinAction(a,!1),this.skinView.skinAction(lt,at),this.autoShow(),this.timer.stop();break;case k.PAUSE:this.skinView.skinAction(lt,rt),this.autoShow();break;case k.SEEK:this.skinView.skinAction(dt,t.args[2]),this.autoShow();break;case k.PLAYING:this.skinView.skinAction(dt,t.args[2]),this.display||this.facade.dispatchEvent(new w(S.EVENT,S.PRESIZE));break;case k.DURATION:case k.METADATA:this.skinView.skinAction(ct,t.args[2]);break;case k.LODING:this.skinView.skinAction(ht,t.args[2]);break;case k.ERROR:case S.ERROR:case S.VIDEO_INFO:this.skinView.skin.setVisible(!0),this.skinView.skinAction(a,{show:!1,url:this.model.playerConfig.mloadingUrl}),this.autoHide();break;case E.HEADSTART:this.skinView.skinAction(a,{show:!1,url:this.model.playerConfig.mloadingUrl});break;case k.CONNECT:this.skinView.skinInit(),this.skinView.skinAction(a,{show:!0,url:this.model.playerConfig.mloadingUrl}),this.skinView.skinAction(ut,this.getDefinitionList()),this.skinView.skinAction(ft,this.getDefinition()),this.autoHide();break;case k.DEFSTART:this.skinView.skinAction(a,{show:!0,url:this.model.playerConfig.loadingUrl,type:"0"}),this.skinView.skinAction(ft,this.getDefinition());break;case S.VIDEO_AUTH_VALID:this.skinView.skin.setVisible(!1);break;case S.PRESIZE:this.setSize()}},C.prototype.getDefinition=function(){var t={},e=this.model.videoSetting;return t.rate=e.definition,t.name=e.media[t.rate].definition,t},C.prototype.getDefinitionList=function(){for(var t=[],e=this.model.videoSetting,i=0;i<e.definitionList.length;i++){var o={};o.rate=e.definitionList[i],o.name=e.media[o.rate].definition,t.push(o)}return t},C.prototype.setVideoPercent=function(t){},C.prototype.setVideoScale=function(t){},C.prototype.setVideoRect=function(t){},C),de=(t.inherits(A,xt),A.prototype.setUp=function(t,e){this.log("开始创建视频模块"),this.el=e,this.mediaPlayer=new te(this.getConfig()),this.model.videoSetting.volume=.8,this.model.videoSetting.fullscreen=!1,this.setDefinitionList(),this.getDefaultConfig(this.model.config),this.changeVideoInfo(this.definition),this.mediaPlayer.setUp(this.model.videoSetting,e),this.facade.dispatchEvent(new w(S.EVENT,S.INIT))},A.prototype.getConfig=function(t){switch((t=h.clone(this.model.config)).posterType){case"-1":case"-2":break;default:t.autoplay="1",t.pic=""}return t},A.prototype.changeVideoInfo=function(t){this.videoInfo=h.clone(this.model.videoSetting.media[t]),this.videoInfo.definitionName=this.videoInfo.definition,this.videoInfo.definition=t,t={uuid:this.model.uuid(),p1:this.model.reportParam.p1,p2:this.model.reportParam.p2,p3:this.model.reportParam.p3},this.model.videoSetting.hasOwnProperty("liveId")&&(t.liveid=this.model.videoSetting.liveId,this.videoInfo.lid=this.model.videoSetting.liveId),this.model.videoSetting.hasOwnProperty("vid")&&(t.vid=this.model.videoSetting.vid),t.ajax=1,h.addUrlParams(this.videoInfo.urls,t),this.model.videoSetting.refresh(this.videoInfo)},A.prototype.setDefinitionList=function(){var t,e=[];for(t in this.model.videoSetting.media)e.push(t);this.model.videoSetting.refresh({definitionList:e})},A.prototype.getDefaultConfig=function(t){this.definition=this.model.videoSetting.defaultDefinition||this.model.videoSetting.definitionList[0],t.hasOwnProperty("rate")&&-1!=this.model.videoSetting.definitionList.indexOf(t.rate)&&(this.definition=t.rate),this.startime=0,t.hasOwnProperty("start")&&(this.startime=t.start)},A.prototype.setSize=function(t,e,i){this.mediaPlayer.setSize()},A.prototype.showPoster=function(t){var e=this;switch(e.hidePoster(),e.poster=null,e.mediaPlayer.hide(!1),this.model.config.posterType){case"-2":case"-1":e.mediaPlayer.show();break;case"0":break;default:e.addPoster()}-2==this.model.config.posterType?(this.mediaPlayer.setPoster(this.model.videoSetting.pic),this.facade.dispatchEvent(new w(S.EVENT,S.VIDEO_AUTH_VALID))):(this.model.config.skinnable||this.model.config.controls)&&(e.playBtn=f.$C("DIV"),e.playBtn.style.cssText="position:absolute;width:75px;height:75px;left:50%;top:50%;background:rgba(1, 1, 1, 0) url(http://yuntv.letv.com/assets/img/skin.png?v=1901) no-repeat -111px -101px;margin: -40px 0 0 -38px;z-index:2;cursor:pointer;",e.el.appendChild(e.playBtn),f.addEvent(e.playBtn,"click",function(t){e.startAuth.call(e)}))},A.prototype.addPoster=function(t){this.poster?this.poster.style.display="":(this.poster=f.$C("DIV"),this.model.config.hasOwnProperty("pic")?this.poster.src=this.model.config.pic:this.poster.src=this.model.videoSetting.pic,this.poster.style.cssText="position:absolute;width:100%;height:100%; top: 0px;left: 0px;background:rgba(1, 1, 1, 0) url("+this.poster.src+") no-repeat 50% 50%;background-size:"+["","contain","cover","100% 100%"][this.model.config.posterType]+";z-index:2;cursor:pointer;"),this.el.appendChild(this.poster)},A.prototype.hidePoster=function(t){this.poster&&this.el&&this.poster.parentNode==this.el&&(this.el.removeChild(this.poster),this.poster=null),this.playBtn&&this.el&&this.playBtn.parentNode==this.el&&(this.el.removeChild(this.playBtn),this.playBtn=null)},A.prototype.startAuth=function(t){this.hidePoster(),this.model.config.onlyPic?this.mediaPlayer.hide():this.mediaPlayer.show(),this.mediaPlayer.play(),this.model.config.posterType+0<0?this.mediaPlayer.setPoster(this.model.videoSetting.pic):this.mediaPlayer.setPoster(""),this.facade.dispatchEvent(new w(S.EVENT,S.VIDEO_AUTH_VALID))},A.prototype.startPlay=function(t){this.log("开始尝试播放"),this.isStartPlay=!1,this.setDefinitionList(),this.getDefaultConfig(this.model.config),this.mediaPlayer.addEventListener(k.EVENT,this.mediaHandler,this),this.facade.addEventListener(P.EVENT,this.skinSateHandler,this),this.facade.addEventListener(S.EVENT,this.videoSateHandler,this),this.mediaPlayer.setContainer(t),this.mediaPlayer.setLoop(this.model.config.loop),this.playVideo(this.start),this.facade.dispatchEvent(new w(S.EVENT,k.CONNECT))},A.prototype.startGslb=function(t){this.gslbplayTime=t,this.gslbLoader=new ne(this.model),this.gslbLoader.addEventListener(b.LOADCMP,this.gslbCmp,this),this.gslbLoader.addEventListener(b.LOADERROR,this.gslbErr,this),this.gslbLoader.translate(),this.facade.dispatchEvent(new w(S.EVENT,S.GSLB_START))},A.prototype.gslbCmp=function(t){this.videoInfo.urls=t.args[1];var e,i=!0;0!=this.model.joint||this.isStartPlay||-2!=this.model.config.posterType||(i="1"==this.model.config.autoplay),this.model.config.onlyPic?((e=this).mediaPlayer.show(),setTimeout(function(){e.mediaPlayer.startPlay(e.videoInfo,e.gslbplayTime,i,e.getPlayerType())},10)):this.mediaPlayer.startPlay(this.videoInfo,this.gslbplayTime,i,this.getPlayerType()),this.facade.dispatchEvent(new w(S.EVENT,S.GSLB_CMP))},A.prototype.gslbErr=function(t){this.facade.dispatchEvent(new w(S.EVENT,S.ERROR,t.args[2]))},A.prototype.setAutoReplay=function(t){this.mediaPlayer.setLoop(t)},A.prototype.setDefinition=function(t){this.definition!=t&&-1!=this.model.videoSetting.definitionList.indexOf(t)&&(this.log("切换码流-----------------------------"+t),this.definition=t,this.isStartPlay=!1,this.playVideo(this.mediaPlayer.getTime()),this.facade.dispatchEvent(new w(S.EVENT,k.DEFSTART)))},A.prototype.playVideo=function(t){"pano"!=this.getPlayerType()||h.checkPano()?(this.changeVideoInfo(this.definition),this.mediaPlayer.getVideoEl()&&this.mediaPlayer.getVideoEl().setAttribute("data-rate",st(this.model.videoSetting.definition)),this.startGslb(t)):this.facade.dispatchEvent(new w(S.EVENT,S.VIDEO_INFO,[{code:490,message:"该设备还不支持3d功能,建议使用windows和安卓系统下的谷歌浏览器体验该功能"}]))},A.prototype.getDefinitionList=function(){return this.model.videoSetting.definitionList},A.prototype.videoSateHandler=function(t){switch(t.args[1]){case S.VPH:this.isStartPlay&&this.mediaPlayer.pause();break;case k.START:this.isStartPlay=!0,this.model.config.onlyPic&&this.addPoster();break;case k.STOP:case S.ERROR:case k.ERROR:this.isStartPlay=!1;break;case S.FULLSCREEN:this.model.config.onlyPic&&!this.model.videoSetting.fullscreen&&this.mediaPlayer.hide();break;case S.PRESIZE:this.setSize()}},A.prototype.skinSateHandler=function(t){switch(t.args[1]){case P.PLAY:var e;this.model.config.onlyPic?((e=this).mediaPlayer.show(),setTimeout(function(){e.mediaPlayer.play()},10)):this.mediaPlayer.play();break;case P.PAUSE:this.mediaPlayer.pause();break;case P.SEEK:this.mediaPlayer.seek(t.args[2]);break;case P.VOLUME:this.model.videoSetting.volume=t.args[2],this.mediaPlayer.setVol(this.model.videoSetting.volume);break;case P.SETDEFINITION:this.setDefinition(t.args[2]);break;case P.REPLAY:this.mediaPlayer.replay()}},A.prototype.getPlayerType=function(){return this.model.config.hasOwnProperty("pano")&&"1"==this.model.config.pano||"1"==this.model.videoSetting.pano?"pano":""},A.prototype.mediaHandler=function(t){if(t.args[1]===k.ERROR)if("vod"==this.model.playType&&this.model.vodPlayType&&"ios"==this.model.vodPlayType&&t.args[2][0].retryCdn)return this.model.vodPlayType="mp4",h.setLocal("playType",this.model.vodPlayType),this.log("重新调度"),void this.startGslb(0);this.facade.dispatchEvent(new w(S.EVENT,t.args[1],t.args[2]))},A.prototype.destroy=function(t){this.facade.removeEventListener(P.EVENT,this.skinSateHandler,this),this.facade.removeEventListener(S.EVENT,this.videoSateHandler,this),this.mediaPlayer.removeEventListener(k.EVENT,this.mediaHandler,this),this.mediaPlayer.destroy(),this.facade.dispatchEvent(new w(S.EVENT,k.STOP,!1))},A),he=(t.inherits(L,xt),L.prototype.setUp=function(t){this.player=t,this.addEvents()},L.prototype.addEvents=function(){var e,t=this;t.addVideoEvent=!1,t.facade.addEventListener(P.EVENT,t.skinSateHandler,t),t.facade.addEventListener(S.EVENT,t.videoSateHandler,t),t.fullChangeFun=h.bindFun(t.fullChange,t),t.resizeFun=h.bindFun(t.resize,t),f.addEvent(document,"fullscreenchange,webkitfullscreenchange,mozfullscreenchange,MSFullscreenChange",t.fullChangeFun),f.addEvent(window,"resize",this.resizeFun),f.addEvent(window,"pagehide",h.bindFun(this.pageHide,this)),["webkit","moz","o","ms"].forEach(function(t){void 0!==document[t+"Hidden"]&&(e=t)}),f.addEvent(document,e+"visibilitychange",function(){"hidden"==document[e+"VisibilityState"]?t.facade.dispatchEvent(new w(S.EVENT,S.VPH)):"visible"==document[e+"VisibilityState"]&&t.facade.dispatchEvent(new w(S.EVENT,S.VPS))})},L.prototype.videoSateHandler=function(t){t.args[1]===S.INIT&&this.addVideoEvents()},L.prototype.pageHide=function(t){this.facade.dispatchEvent(new w(S.EVENT,S.WPH))},L.prototype.fullChange=function(){this.model.videoSetting&&(this.model.videoSetting.fullscreen=f.isFullScreen(),this.model.videoSetting.fullscreen||(this.cancelFullscreen(),this.resizeFun()),this.facade.dispatchEvent(new w(S.EVENT,S.FULLSCREEN,this.model.videoSetting.fullscreen)))},L.prototype.resize=function(){this.facade.dispatchEvent(new w(S.EVENT,S.PRESIZE))},L.prototype.cancelFullscreen=function(){var t=this.player.skinplugin.skin;t.hasAttribute("tmpStyle")&&(t.setStyle({cssText:t.getAttribute("tmpStyle")}),t.removeAttribute("tmpStyle")),this.bodyTmpOverFlow&&(document.body.style.overflow=this.bodyTmpOverFlow)},L.prototype.addVideoEvents=function(t){t=this.player.videoplugin.mediaPlayer.getVideoEl();var e=this;e.addVideoEvent||(t.addEventListener("webkitbeginfullscreen",function(){e.model.videoSetting.fullscreen=!0,e.facade.dispatchEvent(new w(S.EVENT,S.FULLSCREEN,e.model.videoSetting.fullscreen))}),t.addEventListener("webkitendfullscreen",function(){e.model.videoSetting.fullscreen=!1,e.facade.dispatchEvent(new w(S.EVENT,S.FULLSCREEN,e.model.videoSetting.fullscreen)),e.resizeFun()}),e.addVideoEvent=!0)},L.prototype.skinSateHandler=function(t){switch(t.args[1]){case P.FULLSCREEN:if(t=this.player.videoplugin.mediaPlayer.getVideoEl(),this.model.config.dfull&&t&&t.webkitEnterFullscreen&&"chrome"!=h.getBrowser()){t.webkitEnterFullscreen();break}this.model.videoSetting.fullscreen?(this.model.videoSetting.fullscreen=!1,this.cancelFullscreen(),f.supportFullScreen()&&this.model.config.dfull&&f.cancelFullScreen()):(this.model.videoSetting.fullscreen=!0,this.player.skinplugin.skin.setAttribute({tmpStyle:this.player.skinplugin.el.style.cssText}),f.supportFullScreen()&&this.model.config.dfull?f.fullScreen(this.player.skinplugin.el):(this.bodyTmpOverFlow=document.body.style.overflow,document.body.style.overflow="hidden"),this.player.skinplugin.skin.setStyle({cssText:"background: #000;width:100%;height:100%;position:fixed;top:0;left:0;z-index:1000;overflow:hidden;"})),this.resizeFun()}},L),pe=(t.inherits(Te,xt),Te.prototype.setUp=function(t,e,i){this.el=e,this._api=i,this.skin=new Dt(this.el),this.playingStop=!1,this.error=null,this.facade.addEventListener(S.EVENT,this.videoSateHandler,this)},Te.prototype.videoSateHandler=function(e){var i=this;switch(e.args[1]){case k.START:case k.BUFFEREFULL:this.skin.setVisible(!1);break;case k.ERROR:case S.ERROR:case S.VIDEO_INFO:if(this.skin.setVisible(!0),!this.model.config.skinnable)break;i.error?i.error.show(e.args[2],i.el,{api:i._api,model:i.model}):o.getPlugin("ErrorInfo",function(t){t&&(i.error=new t,i.error.show(e.args[2],i.el,{api:i._api,model:i.model}))});break;case k.STOP:this.playingStop=!0,this.skin.setVisible(!1);break;case k.PLAYING:this.playingStop&&this.skin.setVisible(!1),this.playingStop=!1;break;case S.VIDEO_LIVESTOP:this.playingStop=!0}},Te.prototype.report=function(){},Te),ce=function(t){for(var e=0;e<z.length;e++)!function(t,e,i){void 0!==i.api[t]&&(e[t]=function(){return i.api[t].apply(i.api,arguments)})}(z[e],this,t)},ue=Pe,fe=(x.prototype.playNewId=function(t){return this._pl.playNewId(t)},x.prototype.getVideoSetting=function(){for(var t=h.clone(this._pl.model.videoSetting),e={},i=0;i<it.length;i++){var o=it[i];t.hasOwnProperty(o)?e[o]="definition"==o?this.getDefinition():"defaultDefinition"==o?this.getDefaultDefinition():t[o]:e[o]=""}return e},x.prototype.getVideoTime=function(){return this._pl.videoplugin?this._pl.videoplugin.mediaPlayer.getTime():0},x.prototype.pauseVideo=function(){this._pl.facade.dispatchEvent(new w(P.EVENT,P.PAUSE))},x.prototype.resumeVideo=function(){this._pl.facade.dispatchEvent(new w(P.EVENT,P.PLAY))},x.prototype.seekTo=function(t){this._pl.facade.dispatchEvent(new w(P.EVENT,P.SEEK,t))},x.prototype.replayVideo=function(){this._pl.facade.dispatchEvent(new w(P.EVENT,P.REPLAY))},x.prototype.closeVideo=function(){this._pl.closeVideo()},x.prototype.setVolume=function(t){this._pl.facade.dispatchEvent(new w(P.EVENT,P.VOLUME,t))},x.prototype.shutDown=function(){this._pl.shutDown()},x.prototype.startUp=function(){this._pl.startUp()},x.prototype.getBufferPercent=function(){return this._pl.videoplugin?this._pl.videoplugin.mediaPlayer.getBufferPercent():0},x.prototype.setDefinition=function(t){t=ot(t),this._pl.facade.dispatchEvent(new w(P.EVENT,P.SETDEFINITION,t))},x.prototype.getDefinition=function(){return st(this._pl.model.videoSetting.definition)},x.prototype.getDefaultDefinition=function(){return st(this._pl.model.videoSetting.defaultDefinition)},x.prototype.getDefinitionList=function(){for(var t=[],e=0;e<this._pl.model.videoSetting.definitionList.length;e++){var i=st(this._pl.model.videoSetting.definitionList[e]);t.push(i)}return t},x.prototype.setVideoPercent=function(t){this._pl.skinplugin.setVideoPercent(t)},x.prototype.getVideoPercent=function(){},x.prototype.setVideoScale=function(t){return this._pl.skinplugin.setVideoScale(t),0},x.prototype.getVideoScale=function(){return 0},x.prototype.resetVideoScale=function(){return this._pl.skinplugin.setVideoScale(0),0},x.prototype.fullVideoScale=function(){this._pl.skinplugin.setVideoScale(1)},x.prototype.setVideoRect=function(t){this._pl.skinplugin.setVideoScale(t)},x.prototype.getLoadPercent=function(){if(this._pl.videoplugin)return this._pl.videoplugin.mediaPlayer.getLoadPercent()},x.prototype.getDownloadSpeed=function(){return 0},x.prototype.getPlayRecord=function(){if(this._pl.videoplugin)return this._pl.videoplugin.getPlayRecord()},x.prototype.getPlayState=function(){if(this._pl.videoplugin)return this._pl.videoplugin.getPlayState()},x.prototype.setVideoColor=function(){return-1},x.prototype.getVideoColor=function(){return-1},x.prototype.getVersion=function(){return this._pl.version},x.prototype.setAutoReplay=function(t){return this._pl.videoplugin.setAutoReplay(t)},x.prototype.feedback=function(t){return this._pl.feedback(t)},x.prototype.getLog=function(t){return this._pl.getLog(t)},x.prototype.getServerTime=function(t){},x),ye=function(t){var e={dfull:!0,fullscreen:!0,skinnable:!0,controls:!1,loop:!1,definition:!0,autoSize:"0",changeParent:!1,posterType:"1",playsinline:"1",autoplay:"0",onlyPic:!1,playIngBg:!1,dvideoSize:!0,mustAutoplay:!1,pageControls:!1};for(o in parseInt(t.posterType)<0&&!t.hasOwnProperty("controls")&&!t.hasOwnProperty("skinnable")&&(t.controls="1",t.skinnable="0"),e)t.hasOwnProperty(o)?"boolean"==typeof e[o]&&(t[o]="1"==t[o]):t[o]=e[o];switch(t.hasOwnProperty("pa")&&(t.pano=t.pa,delete t.pa),t.hasOwnProperty("auto_play")&&(t.autoplay=t.auto_play,delete t.auto_play),t.hasOwnProperty("autoReplay")&&(t.loop="1"==t.autoReplay,delete t.autoReplay),(1<parseInt(t.autoplay)||parseInt(t.autoplay)<0)&&(t.autoplay="0"),(3<parseInt(t.posterType)||parseInt(t.posterType)<-2)&&(t.posterType="1"),t.autoplay+="",t.posterType+="",t.hasOwnProperty("rate")&&(t.rate=ot(t.rate)),t.onlyPic=!1,t.playIngBg=!0,h.getDevice()){case"androidPhone":case"androidPad":case"android":"uc"===h.getBrowser()?(t.skinnable=!1,t.controls=!0):t.mustAutoplay||(t.autoplay="0");break;case"iphone":switch(h.getBrowser()){case"uc":t.dfull=!1;break;case"qq":t.onlyPic=!0;break;default:for(var e=navigator.userAgent.toLowerCase(),i=[/cpu iphone os 8_/],o=0;o<i.length;o++)if(i[o].test(e)){t.dvideoSize=!1;break}if(0<=parseInt(t.posterType)&&(i=[/cpu iphone os 7_/,/cpu iphone os 6_/],t.skinnable))for(o=0;o<i.length;o++)if(i[o].test(e)){t.onlyPic=!0;break}}case"ipad":switch(h.getBrowser()){case"qqwebview":case"weixin":e=navigator.userAgent.toLowerCase(),/cpu iphone os 8_/.test(e)&&!t.mustAutoplay&&(t.autoplay="0");break;default:t.mustAutoplay||(t.autoplay="0")}break;case"pc":t.playIngBg=!1}},ge=(t.inherits(T,e),T.prototype.init=function(){this.api=new fe(this)},T.prototype.setUp=function(t,e,i){this.vModelInit=this.canplay=!1,this.model=new qt,this.setModelType(),this.model.api=this.getVideoApi(),this.configHanlder(t),this.model.config.refresh(t),this.model.playerConfig.refresh({version:this.version}),this.facade=new Lt,this.skinplugin=new le(this.facade,this.model),this.skinplugin.setUp(t,e,i),this.reportplugin=new re(this.facade,this.model),this.reportplugin.setUp(),this.globalplugin=new he(this.facade,this.model),this.globalplugin.setUp(this),this.errorplugin=new pe(this.facade,this.model),this.errorplugin.setUp(this,this.skinplugin.el.error,this.api),this.addEvents(),this.envCheck()&&this.startGetData()},T.prototype.envCheck=function(){return!("1"==this.model.config.pano&&!h.checkPano())||(this.facade.dispatchEvent(new w(S.EVENT,S.VIDEO_INFO,[{code:490,message:"该设备还不支持3d功能,建议使用window或安卓系统下的谷歌浏览器体验该功能"}])),!1)},T.prototype.setModelType=function(){},T.prototype.configHanlder=function(t){ye(t)},T.prototype.addEvents=function(){this.facade.addEventListener(P.EVENT,this.skinHandler,this),this.facade.addEventListener(S.EVENT,this.videoHandler,this)},T.prototype.removedEvents=function(){this.facade.removeEventListener(P.EVENT,this.skinHandler,this),this.facade.removeEventListener(S.EVENT,this.videoHandler,this)},T.prototype.startGetData=function(){this.log("开始请求数据"),this.facade.dispatchEvent(new w(S.EVENT,S.VIDEO_DATA_START))},T.prototype.dataCmp=function(){this.log("请求GpC成功"),"0"==this.model.videoSetting.isdrm?(this.setupPlayer(),this.vModelInit=!0,"0"==this.model.config.autoplay?this.videoplugin.showPoster():this.videoplugin.startAuth(),this.facade.dispatchEvent(new w(S.EVENT,S.VIDEO_DATA_CMP))):this.facade.dispatchEvent(new w(S.EVENT,S.ERROR,[{code:St,message:"视频为加密视频，无法解密播放"}]))},T.prototype.setupPlayer=function(){this.log("开始创建播放器"),this.videoplugin||(this.videoplugin=new de(this.facade,this.model),this.videoplugin.setUp(this.model.videoSetting,this.skinplugin.el.video))},T.prototype.creatVideo=function(){this.log("开始创建视频"),this.videoplugin.startPlay(this.skinplugin.getVideArea())},T.prototype.setupAdplugin=function(){this.model.record.as=h.now(),this.log("开始请求广告"),this.adplugin=new ae(this.facade,this.model),this.facade.addEventListener(E.EVENT,this.adHandler,this),this.adplugin.setUp(this.videoplugin.mediaPlayer,this.skinplugin.el)},T.prototype.errorHanlder=function(t){this.log("数据请求失败"),this.facade.dispatchEvent(new w(S.EVENT,S.ERROR,t.args[1]))},T.prototype.adHandler=function(t){switch(this.log("广告返回"+t.args[1]),t.args[1]){case E.HEADSTART:this.model.joint=2,this.facade.dispatchEvent(new w(S.EVENT,E.HEADSTART));break;case E.HEADEND:this.model.joint=2;case E.NOAD:this.model.joint=0,this.facade.removeEventListener(E.EVENT,this.adHandler,this),this.facade.dispatchEvent(new w(S.EVENT,t.args[1],t.args[2])),this.creatVideo()}},T.prototype.videoHandler=function(t){switch(this.vStateHandler(t),t.args[1]){case S.VIDEO_AUTH_VALID:this.canplay=!0,this.setupAdplugin();break;case S.VIDEO_DATA_START:case S.GSLB_START:case S.GSLB_CMP:case S.VIDEO_DATA_CMP:case k.PLAYING:case k.LODING:return;case S.INIT:"0"!=this.model.config.autoSize&&this.skinplugin.autoSize();break;case S.WPH:return void this.destroy()}var e;this.model.config.hasOwnProperty("callbackJs")&&(e=t.args[1],t=t.args[2],e==S.ERROR&&(e=k.ERROR),p[this.model.config.callbackJs]&&p[this.model.config.callbackJs](e,t))},T.prototype.vStateHandler=function(t){},T.prototype.skinHandler=function(t){},T.prototype.destroy=function(){this.skinplugin&&this.skinplugin.shutDown(),this.globalplugin&&this.globalplugin.destroy(),this.videoplugin&&this.videoplugin.destroy(),this.removedEvents(),this.vModel&&(this.vModel.destroy(),this.vModel=null),this.adplugin&&(this.adplugin.destroy(),this.adplugin=null),this.reportplugin&&this.reportplugin.destroy()},T.prototype.closeVideo=function(){this.videoplugin.destroy()},T.prototype.shutDown=function(){this.destroy(),this.addEvents(),this.videoplugin&&this.videoplugin.showPoster()},T.prototype.startUp=function(){this.log("call startUp -vModelInit:"+this.vModelInit),this.destroy(),this.vModelInit?(this.reportplugin.setUp(),this.addEvents(),this.videoplugin&&this.videoplugin.startAuth()):(this.model.config.autoplay="1",this.reportplugin.setUp(),this.addEvents(),this.startGetData())},T.prototype.playNewId=function(t){var e="";this.destroy(),this.model.clear(),this.setModelType(),this.model.playerConfig.refresh({version:this.version}),this.model.init({deviceId:this.model.lc(),os:h.getOs(),osv:"-",width:window.screen.width,height:window.screen.height,appv:this.version}),this.vModelInit=!1,this.canplay&&!t.hasOwnProperty("autoplay")&&(e="1"),this.configHanlder(t),""!=e&&(t.autoplay=e),this.model.config.refresh(t),this.reportplugin.setUp(),this.addEvents(),this.startGetData()},T.prototype.feedback=function(t){(t=void 0===t?{}:t).type="0",t.logcontent=api.getLog(),this.reportplugin.report(t)},T.prototype.getLog=function(){return this.reportplugin.getLog()},T.prototype.getVideoApi=function(){var t=this;return{getVideoInfo:function(){return{time:t.videoplugin.mediaPlayer.getTime()}}}},T),me=(t.inherits(ke,ge),ke.prototype.init=function(){this.superClass.init.apply(this,arguments),this.version="H5_Vod_20160317_4.1.9"},ke.prototype.setModelType=function(){this.model.playType="vod",this.model.videoSetting.gslb=!0,h.isHttps()&&(this.model.videoSetting.gslb=!1)},ke.prototype.startGetData=function(){this.superClass.startGetData.apply(this,arguments),this.vModel=new $t(this.model),this.vModel.addEventListener(b.LOADCMP,this.dataCmp,this),this.vModel.addEventListener(b.LOADERROR,this.errorHanlder,this),this.vModel.setUp(this.model.config,this.skinplugin)},ke),ve=(Se.prototype={setUp:function(t,e){var i="http://yuntv.letv.com/bcloud.swf",o=(h.isHttps()&&(i="https://s.yuntv.letv.com/bclouds.swf"),"Opaque");t.hasOwnProperty("wmode")&&(o=t.wmode,delete t.wmode),"Opaque"==o&&(t.panoType=1),this.id=Z.create(e,{url:i,version:this.minVer,wmode:o},this.flashvarsToString(t)),this.plugin=Z.getPlayer(this.id),this.api=new ue(this)},flashvarsToString:function(t){var e,i="";for(e in t)i+=e+"="+t[e]+"&";return i}},Se),we=(be.prototype={init:function(t){"swf"===this.check(t)?this.player=new ve(10):this.player=new me},setUp:function(t,e,i){this.player.setUp.apply(this.player,arguments)},check:function(t){return t.hasOwnProperty("type")?t.type:t.hasOwnProperty("dbd")&&"LETV"==t.dbd||("android"==h.getOs()||"iphone"==h.getDevice()||"ipad"==h.getDevice()||!Z.check(10))&&document.createElement("video").canPlayType?"h5":"swf"}},be),At=(t.inherits(Ee,e),Ee.prototype.init=function(e,t,i){o=e,s=t,r=n="100%",a="player"+h.creatUuid(),o.hasOwnProperty("width")&&(isNaN(o.width)?-1!=n.indexOf("%")&&(n=o.width):n=o.width+"px"),o.hasOwnProperty("height")&&(isNaN(o.height)?-1!=r.indexOf("%")&&(r=o.height):r=o.height+"px"),n=(n=(n='<div id="#{player}" style="position: relative;width: {width};height:{height};margin-right:auto;margin-left:auto"></div>'.replace(/{width}/g,n)).replace(/{height}/g,r)).replace(/#{player}/g,a),"string"==typeof s&&""!=s&&f.$E(s)?f.$E(s).innerHTML=n:M.write(n);o=a,r=t,(n=new we(s=e)).setUp(s,o,r);var o,s,n,r,a,l,d=n.player;this.sdk=new ce(d),i&&(l=function(t){t.args[1]===S.INIT&&(d.facade.removeEventListener(S.EVENT,l,this),e.hasOwnProperty("callback")&&("function"==typeof e.callback?e.callback&&e.callback(d.videoplugin.mediaPlayer.player.video):e.callback&&p[e.callback]&&p[e.callback](d.videoplugin.mediaPlayer.player.video)))},d.facade&&d.facade.addEventListener(S.EVENT,l,this))},Ee);function Ee(){}function be(t){this.init(t)}function Se(t){this.minVer=t}function ke(){this.superClass.constructor.apply(this,arguments)}function T(){this.init()}function x(t){this._pl=t}function Pe(t){for(this.player=t,t=0;t<z.length;t++)!function(t,e){Pe.prototype[t]=function(){return e[t].apply(e,arguments)}}(z[t],this.player.plugin);Pe.prototype.playNewId=function(t){return this.player.plugin.setLejuData(t)},Pe.prototype.callFlash=function(t){return this.player.plugin[t.action](t.value)}}function Te(){this.superClass.constructor.apply(this,arguments)}function L(){this.superClass.constructor.apply(this,arguments)}function A(){this.superClass.constructor.apply(this,arguments)}function C(){this.superClass.constructor.apply(this,arguments)}function xe(){this.up=this.isvip=0,this.isTrylook=!1,this.pname="",this.ark=this.gdur=0}function V(){this.superClass.constructor.apply(this,arguments)}function D(){this.superClass.constructor.apply(this,arguments)}function Le(t){this.model=t}function Ae(){this.superClass.constructor.apply(this,arguments)}function Ce(){this.superClass.constructor.apply(this,arguments)}function Ve(){this.superClass.constructor.apply(this,arguments)}function De(){this.superClass.constructor.apply(this,arguments)}function O(){this.superClass.constructor.apply(this,arguments)}function I(t){this.init(t)}function Oe(t){}function R(){var t=this;this.type="video",this.videoHandlerBack=function(){t.videoHandler.apply(t,arguments)}}function H(){}function Ie(t){this.model=t}function Re(){this.lastTime=this.pt=0,this.isStartPlay=this.isPauseRecord=!1,this.state="",this.replaytype=1}function He(t){this.model=t,this.reset()}function _e(t){this.model=t}function _(t){this.model=t}function Ne(){for(var t="mac nt os osv app bd xh ro cs ssid lo la".split(" "),i=this,e=0;e<t.length;e++)this[t[e]]="";this.refresh=function(t){for(var e in t)i[e]=t[e]}}function Be(){var i=this;this.autoplay=0,this.refresh=function(t){for(var e in t)i[e]=t[e]}}function Ue(){var i=this;this.refresh=function(t){for(var e in t)i[e]=t[e]}}function Fe(){for(var t=["userId"],i=this,e=0;e<t.length;e++)this[t[e]]="";this.refresh=function(t){for(var e in t)i[e]=t[e]}}function Me(){for(var t="title duration volume definition defaultDefinition fullscreen percent time url videoWidth videoHeight".split(" "),i=this,e=0;e<t.length;e++)this[t[e]]="";this.definitionCount=0,this.refresh=function(t){for(var e in t)i[e]=t[e]}}function ze(){this.systemData=new Ne,this.config=new Be,this.reportParam={},this.clear()}function We(t,e,i,o){this.delay=t,this.timerHandler=i,this.handlerThis=e,this.max=o=void 0===o?0:o,this.currentCount=this.T=0,this.running=!0}function je(){}void 0!==p.letvcloud_player_conf&&(Wt=new CloudVodPlayer,p.letvcloud_player_conf.hasOwnProperty("callbackJs")&&(p.letvcloud_player_conf.callback=p.letvcloud_player_conf.callbackJs,delete p.letvcloud_player_conf.callbackJs),p.letvcloud_player_conf.hasOwnProperty("posterType")||(p.letvcloud_player_conf.posterType="-1",-1<(Jt=navigator.userAgent.toLowerCase()).indexOf("iphone")&&-1<Jt.indexOf("mac")&&-1<Jt.indexOf("7.0")&&(p.letvcloud_player_conf.posterType="-2")),Wt.init(p.letvcloud_player_conf,"",!0),p.letvcloud_player_conf=void 0,p.Util={setRate:function(t){Wt.sdk.setDefinition(t)},getRate:function(){return Wt.sdk.getDefinition()}}),U.exports=At});